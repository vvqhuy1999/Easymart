import{_ as K,u as N,r as p,c as g,o as L,s as B,y as D,d as l,e as t,f as v,w as y,g as M,h as c,k as j,t as h,j as k,z as G,x as R,v as E,A as F,F as I,p as U,b as W,q as r,m as x,P as Z}from"./index-BIETZaLS.js";const z={class:"search-page"},H={class:"container py-5 mt-5"},J={"aria-label":"breadcrumb",class:"mb-4"},O={class:"breadcrumb"},X={class:"breadcrumb-item"},Y={class:"search-header mb-4"},$={class:"d-flex justify-content-between align-items-center"},Q={key:0,class:"text-muted mb-0"},tt={class:"ms-2"},st={class:"search-sort"},et={class:"search-box mb-5"},at={class:"row justify-content-center"},ot={class:"col-md-8"},nt={class:"input-group"},lt={key:0},rt={class:"row g-4"},it={key:1,class:"no-results text-center py-5"},ct={class:"no-results-content"},ut={class:"text-muted mb-4"},dt={key:2,class:"initial-state text-center py-5"},mt={__name:"Search",setup(pt){const f=W(),_=B(),{products:T,searchQuery:u,formatPrice:C,addToCart:w,showNotification:q}=N(),n=p(""),a=p(""),d=p("relevance"),m=g(()=>{if(!a.value||a.value.length<2)return[];const e=a.value.toLowerCase();return T.value.filter(s=>s.name.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))}),S=g(()=>{const e=[...m.value];switch(d.value){case"name-asc":return e.sort((s,o)=>s.name.localeCompare(o.name));case"name-desc":return e.sort((s,o)=>o.name.localeCompare(s.name));case"price-asc":return e.sort((s,o)=>s.price-o.price);case"price-desc":return e.sort((s,o)=>o.price-s.price);default:return e}}),b=()=>{n.value.trim()&&(a.value=n.value.trim(),u.value=n.value.trim(),f.push({name:"Search",query:{q:a.value}}))},P=e=>{f.push({name:"ProductDetail",params:{id:e}})},V=e=>{q("Đã thêm vào danh sách yêu thích!","success")},A=()=>{};return L(()=>{const e=_.query.q;e&&(a.value=e,n.value=e,u.value=e)}),D(()=>_.query.q,e=>{e&&(a.value=e,n.value=e,u.value=e)}),(e,s)=>{const o=M("router-link");return r(),l("div",z,[t("div",H,[t("nav",J,[t("ol",O,[t("li",X,[v(o,{to:"/",class:"text-decoration-none"},{default:y(()=>s[2]||(s[2]=[t("i",{class:"fas fa-home"},null,-1),c(" Trang chủ ")])),_:1,__:[2]})]),s[3]||(s[3]=t("li",{class:"breadcrumb-item active","aria-current":"page"},[t("i",{class:"fas fa-search"}),c(" Kết quả tìm kiếm ")],-1))])]),t("div",Y,[t("div",$,[t("div",null,[s[5]||(s[5]=t("h2",{class:"mb-2"},[t("i",{class:"fas fa-search text-primary me-2"}),c(" Kết quả tìm kiếm ")],-1)),a.value?(r(),l("p",Q,[s[4]||(s[4]=c(" Tìm kiếm cho: ")),t("strong",null,'"'+h(a.value)+'"',1),t("span",tt,"("+h(m.value.length)+" sản phẩm)",1)])):j("",!0)]),t("div",st,[k(t("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>d.value=i),onChange:A,class:"form-select form-select-sm"},s[6]||(s[6]=[R('<option value="relevance" data-v-30a88a67>Liên quan nhất</option><option value="name-asc" data-v-30a88a67>Tên A-Z</option><option value="name-desc" data-v-30a88a67>Tên Z-A</option><option value="price-asc" data-v-30a88a67>Giá thấp - cao</option><option value="price-desc" data-v-30a88a67>Giá cao - thấp</option>',5)]),544),[[G,d.value]])])])]),t("div",et,[t("div",at,[t("div",ot,[t("div",nt,[k(t("input",{type:"text",class:"form-control form-control-lg",placeholder:"Tìm kiếm sản phẩm...","onUpdate:modelValue":s[1]||(s[1]=i=>n.value=i),onKeyup:F(b,["enter"])},null,544),[[E,n.value]]),t("button",{class:"btn btn-primary btn-lg",type:"button",onClick:b},s[7]||(s[7]=[t("i",{class:"fas fa-search"},null,-1)]))])])])]),m.value.length>0?(r(),l("div",lt,[t("div",rt,[(r(!0),l(I,null,U(S.value,i=>(r(),l("div",{key:i.id,class:"col-6 col-md-4 col-lg-3"},[v(Z,{product:i,formatPrice:x(C),onAddToCart:x(w),onViewDetail:P,onAddToWishlist:V},null,8,["product","formatPrice","onAddToCart"])]))),128))])])):a.value?(r(),l("div",it,[t("div",ct,[s[10]||(s[10]=t("i",{class:"fas fa-search fa-4x text-muted mb-4"},null,-1)),s[11]||(s[11]=t("h3",{class:"text-muted mb-3"},"Không tìm thấy kết quả",-1)),t("p",ut,[s[8]||(s[8]=c(" Không tìm thấy sản phẩm nào cho từ khóa ")),t("strong",null,'"'+h(a.value)+'"',1)]),s[12]||(s[12]=t("div",{class:"search-suggestions"},[t("p",{class:"mb-3"},[t("strong",null,"Gợi ý:")]),t("ul",{class:"list-unstyled text-muted"},[t("li",null,"• Kiểm tra chính tả từ khóa"),t("li",null,"• Thử sử dụng từ khóa khác"),t("li",null,"• Sử dụng từ khóa ngắn gọn hơn")])],-1)),v(o,{to:"/",class:"btn btn-primary mt-3"},{default:y(()=>s[9]||(s[9]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),c(" Về trang chủ ")])),_:1,__:[9]})])])):(r(),l("div",dt,s[13]||(s[13]=[t("div",{class:"initial-content"},[t("i",{class:"fas fa-search fa-4x text-muted mb-4"}),t("h3",{class:"text-muted mb-3"},"Tìm kiếm sản phẩm"),t("p",{class:"text-muted mb-4"},"Nhập từ khóa để tìm kiếm sản phẩm bạn muốn")],-1)])))])])}}},ht=K(mt,[["__scopeId","data-v-30a88a67"]]);export{ht as default};
