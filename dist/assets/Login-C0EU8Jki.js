import{_ as M,r as a,o as C,d as n,e as s,k as u,h as l,t as g,n as p,i as V,j as b,v as N,H as I,I as S,f as q,w as B,g as L,b as T,q as r,J as D}from"./index-r8GnmL0A.js";const E={class:"d-flex justify-content-center align-items-center",style:{"min-height":"80vh",background:"#f8fafc"}},P={class:"card shadow p-4 border-0",style:{"max-width":"400px",width:"100%","border-radius":"1.5rem"}},U={key:0,class:"text-center mb-3"},j={key:1,class:"alert alert-info",role:"alert"},R={key:2,class:"alert alert-danger",role:"alert"},$={key:3,class:"alert alert-success",role:"alert"},z={class:"mb-3"},A={class:"input-group"},G={class:"mb-3"},H={class:"input-group"},J=["type"],F={class:"mb-3 form-check"},K=["disabled"],O={key:0,class:"fas fa-sign-in-alt me-2"},Q={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},W={__name:"Login",setup(X){const k=T(),{login:x}=D(),v=a(""),f=a(""),h=a(!1),m=a(!1),t=a(!1),d=a(""),c=a(""),y=a(!1);C(()=>{const o=localStorage.getItem("easymart-redirect-after-login");y.value=o==="/checkout"});async function w(){d.value="",c.value="",t.value=!0;try{const o=await x(v.value,f.value);if(o.success){c.value=`Chào mừng ${o.user.name}! Đang chuyển hướng...`;const e=localStorage.getItem("easymart-redirect-after-login");localStorage.removeItem("easymart-redirect-after-login"),setTimeout(()=>{k.push(e||"/")},1500)}else d.value=o.error||"Đăng nhập thất bại"}catch{d.value="Có lỗi xảy ra, vui lòng thử lại"}finally{t.value=!1}}return(o,e)=>{const _=L("router-link");return r(),n("div",null,[s("div",E,[s("div",P,[e[16]||(e[16]=s("h2",{class:"mb-4 text-center text-primary fw-bold"},"Đăng nhập",-1)),t.value?(r(),n("div",U,e[4]||(e[4]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Đang đăng nhập...")],-1),s("p",{class:"mt-2 text-muted"},"Đang xử lý...",-1)]))):u("",!0),y.value?(r(),n("div",j,e[5]||(e[5]=[s("i",{class:"fas fa-info-circle me-2"},null,-1),l(" Vui lòng đăng nhập để tiến hành thanh toán! ")]))):u("",!0),d.value?(r(),n("div",R,[e[6]||(e[6]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),l(g(d.value),1)])):u("",!0),c.value?(r(),n("div",$,[e[7]||(e[7]=s("i",{class:"fas fa-check-circle me-2"},null,-1)),l(g(c.value),1)])):u("",!0),s("form",{onSubmit:V(w,["prevent"]),class:p({"d-none":t.value})},[s("div",z,[e[9]||(e[9]=s("label",{for:"email",class:"form-label"},"Email",-1)),s("div",A,[e[8]||(e[8]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-envelope"})],-1)),b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>v.value=i),type:"email",class:"form-control",id:"email",required:"",autocomplete:"username",placeholder:"Nhập email của bạn"},null,512),[[N,v.value]])])]),s("div",G,[e[11]||(e[11]=s("label",{for:"password",class:"form-label"},"Mật khẩu",-1)),s("div",H,[e[10]||(e[10]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-lock"})],-1)),b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>f.value=i),type:m.value?"text":"password",class:"form-control",id:"password",required:"",autocomplete:"current-password",placeholder:"Nhập mật khẩu"},null,8,J),[[I,f.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[2]||(e[2]=i=>m.value=!m.value)},[s("i",{class:p(m.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",F,[b(s("input",{type:"checkbox",class:"form-check-input",id:"rememberMe","onUpdate:modelValue":e[3]||(e[3]=i=>h.value=i)},null,512),[[S,h.value]]),e[12]||(e[12]=s("label",{class:"form-check-label",for:"rememberMe"}," Ghi nhớ đăng nhập ",-1))]),s("button",{type:"submit",class:"btn btn-primary w-100 fw-bold",disabled:t.value},[t.value?u("",!0):(r(),n("i",O)),t.value?(r(),n("span",Q)):u("",!0),l(" "+g(t.value?"Đang đăng nhập...":"Đăng nhập"),1)],8,K)],34),s("div",{class:p(["text-center mt-3",{"d-none":t.value}])},[e[14]||(e[14]=s("span",null,"Bạn chưa có tài khoản?",-1)),q(_,{to:"/register",class:"ms-1 text-primary"},{default:B(()=>e[13]||(e[13]=[l("Đăng ký")])),_:1,__:[13]})],2),s("div",{class:p(["mt-4 p-3 bg-light rounded",{"d-none":t.value}])},e[15]||(e[15]=[s("h6",{class:"text-muted mb-2"},[s("i",{class:"fas fa-info-circle me-2"}),l("Tài khoản demo:")],-1),s("small",{class:"text-muted"},[l(" Email: demo@easymart.vn"),s("br"),l(" Mật khẩu: bất kỳ ")],-1)]),2)])])])}}},Z=M(W,[["__scopeId","data-v-adfc798c"]]);export{Z as default};
