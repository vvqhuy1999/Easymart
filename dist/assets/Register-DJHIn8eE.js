import{_ as S,r as o,d as r,e as i,f as s,l as v,i as u,t as w,n as d,j as $,k as p,v as C,I as N,J as G,g as _,w as T,p as B,H as D,h as j,b as E,K as H}from"./index-BeyCD7yF.js";const I={class:"d-flex justify-content-center align-items-center",style:{"min-height":"80vh",background:"#f8fafc"}},z={class:"card shadow p-4 border-0",style:{"max-width":"400px",width:"100%","border-radius":"1.5rem"}},A={key:0,class:"text-center mb-3"},J={key:1,class:"alert alert-danger",role:"alert"},K={key:2,class:"alert alert-success",role:"alert"},L={class:"mb-3"},W={class:"input-group"},F={class:"mb-3"},O={class:"input-group"},Q={class:"mb-3"},X={class:"input-group"},Y={class:"mb-3"},Z={class:"input-group"},ee=["type"],se={class:"mb-3"},te={class:"input-group"},le=["type"],ae={class:"mb-3 form-check"},oe=["disabled"],ne={key:0,class:"fas fa-user-plus me-2"},re={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},ie={__name:"Register",setup(ue){const V=E(),{register:R,registerWithGoogle:q}=H(),h=o(""),y=o(""),m=o(""),c=o(""),f=o(""),k=o(!1),g=o(!1),b=o(!1),t=o(!1),a=o(""),n=o("");async function M(){if(a.value="",n.value="",c.value!==f.value){a.value="Mật khẩu không khớp!";return}if(!/^[0-9]{10,11}$/.test(m.value)){a.value="Số điện thoại phải có 10-11 chữ số!";return}if(!k.value){a.value="Vui lòng đồng ý với điều khoản sử dụng!";return}t.value=!0;try{const e=await R(h.value,y.value,m.value,c.value,f.value);e.success?(n.value=`Chào mừng ${e.user.name}! Đăng ký thành công. Đang chuyển hướng...`,setTimeout(()=>{V.push("/")},2e3)):a.value=e.error||"Đăng ký thất bại"}catch{a.value="Có lỗi xảy ra, vui lòng thử lại"}finally{t.value=!1}}async function U(x){a.value="",n.value="",t.value=!0;try{const e=await q(x.credential);e.success?(n.value=`Chào mừng ${e.user.name}! Đăng ký thành công. Đang chuyển hướng...`,setTimeout(()=>{V.push("/")},2e3)):a.value=e.error||"Đăng ký với Google thất bại"}catch{a.value="Có lỗi xảy ra, vui lòng thử lại"}finally{t.value=!1}}return(x,e)=>{const P=j("router-link");return i(),r("div",null,[s("div",I,[s("div",z,[e[26]||(e[26]=s("h2",{class:"mb-4 text-center text-primary fw-bold"},"Đăng ký",-1)),t.value?(i(),r("div",A,e[8]||(e[8]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Đang đăng ký...")],-1),s("p",{class:"mt-2 text-muted"},"Đang xử lý...",-1)]))):v("",!0),a.value?(i(),r("div",J,[e[9]||(e[9]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),u(w(a.value),1)])):v("",!0),n.value?(i(),r("div",K,[e[10]||(e[10]=s("i",{class:"fas fa-check-circle me-2"},null,-1)),u(w(n.value),1)])):v("",!0),s("form",{onSubmit:$(M,["prevent"]),class:d({"d-none":t.value})},[s("div",L,[e[12]||(e[12]=s("label",{for:"name",class:"form-label"},"Họ và tên",-1)),s("div",W,[e[11]||(e[11]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-user"})],-1)),p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>h.value=l),type:"text",class:"form-control",id:"name",required:"",autocomplete:"name",placeholder:"Nhập họ và tên"},null,512),[[C,h.value]])])]),s("div",F,[e[14]||(e[14]=s("label",{for:"email",class:"form-label"},"Email",-1)),s("div",O,[e[13]||(e[13]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-envelope"})],-1)),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),type:"email",class:"form-control",id:"email",required:"",autocomplete:"username",placeholder:"Nhập email của bạn"},null,512),[[C,y.value]])])]),s("div",Q,[e[16]||(e[16]=s("label",{for:"phone",class:"form-label"},"Số điện thoại",-1)),s("div",X,[e[15]||(e[15]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-phone"})],-1)),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),type:"tel",class:"form-control",id:"phone",required:"",autocomplete:"tel",placeholder:"Nhập số điện thoại",pattern:"[0-9]{10,11}",title:"Số điện thoại phải có 10-11 chữ số"},null,512),[[C,m.value]])])]),s("div",Y,[e[18]||(e[18]=s("label",{for:"password",class:"form-label"},"Mật khẩu",-1)),s("div",Z,[e[17]||(e[17]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-lock"})],-1)),p(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>c.value=l),type:g.value?"text":"password",class:"form-control",id:"password",required:"",autocomplete:"new-password",placeholder:"Nhập mật khẩu"},null,8,ee),[[N,c.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[4]||(e[4]=l=>g.value=!g.value)},[s("i",{class:d(g.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",se,[e[20]||(e[20]=s("label",{for:"confirmPassword",class:"form-label"},"Nhập lại mật khẩu",-1)),s("div",te,[e[19]||(e[19]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-lock"})],-1)),p(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>f.value=l),type:b.value?"text":"password",class:"form-control",id:"confirmPassword",required:"",autocomplete:"new-password",placeholder:"Nhập lại mật khẩu"},null,8,le),[[N,f.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[6]||(e[6]=l=>b.value=!b.value)},[s("i",{class:d(b.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",ae,[p(s("input",{type:"checkbox",class:"form-check-input",id:"agreeTerms","onUpdate:modelValue":e[7]||(e[7]=l=>k.value=l),required:""},null,512),[[G,k.value]]),e[21]||(e[21]=s("label",{class:"form-check-label",for:"agreeTerms"},[u(" Tôi đồng ý với "),s("a",{href:"#",class:"text-primary"},"điều khoản sử dụng")],-1))]),s("button",{type:"submit",class:"btn btn-primary w-100 fw-bold",disabled:t.value},[t.value?v("",!0):(i(),r("i",ne)),t.value?(i(),r("span",re)):v("",!0),u(" "+w(t.value?"Đang đăng ký...":"Đăng ký"),1)],8,oe)],34),s("div",{class:d(["text-center my-3",{"d-none":t.value}])},e[22]||(e[22]=[s("div",{class:"position-relative"},[s("hr"),s("span",{class:"position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted"},"hoặc")],-1)]),2),s("div",{class:d(["mb-3",{"d-none":t.value}])},[_(B(D),{callback:U,class:"w-100"},{default:T(()=>e[23]||(e[23]=[s("button",{type:"button",class:"btn btn-outline-danger w-100 fw-bold"},[s("i",{class:"fab fa-google me-2"}),u(" Đăng ký với Google ")],-1)])),_:1,__:[23]})],2),s("div",{class:d(["text-center mt-3",{"d-none":t.value}])},[e[25]||(e[25]=s("span",null,"Đã có tài khoản?",-1)),_(P,{to:"/login",class:"ms-1 text-primary"},{default:T(()=>e[24]||(e[24]=[u("Đăng nhập")])),_:1,__:[24]})],2)])])])}}},pe=S(ie,[["__scopeId","data-v-61dbba02"]]);export{pe as default};
