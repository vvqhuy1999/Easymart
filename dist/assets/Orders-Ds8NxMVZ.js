import{_ as nn,x as tn,r as k,R as en,p as sn,q as E,h as ln,m as an,S as on,c,a as t,g as a,l as h,f as y,t as l,d as v,F as M,e as R,i as rn,j as cn,k as un,T as U,A as N,o as u,z as dn}from"./index-DQ4OBKkW.js";const gn={class:"orders-page"},hn={class:"container mt-5 pt-5"},mn={class:"row"},fn={class:"col-12"},pn={class:"d-flex justify-content-between align-items-center mb-4"},yn={class:"d-flex gap-2"},vn=["disabled"],bn={class:"order-tabs mb-4"},kn={class:"nav nav-pills nav-fill"},Hn={class:"nav-item"},Tn={class:"nav-item"},xn={class:"nav-item"},Kn={class:"nav-item"},In={key:0,class:"container"},Cn={key:1,class:"container"},wn={class:"row justify-content-center"},_n={class:"col-md-8"},Dn={class:"alert alert-danger",role:"alert"},Sn={key:2,class:"container"},An={class:"row"},Pn={class:"col-12"},On={class:"alert alert-info mb-3"},En={class:"tab-info mb-3"},Un={class:"alert alert-info d-flex align-items-center"},Nn={key:0,class:"text-center py-5"},Ln={class:"text-muted"},$n={class:"text-muted"},Bn={key:0},Gn={key:1},Mn={key:2},Rn={key:3},jn={key:1,class:"orders-list"},Fn={class:"order-header p-3 bg-light rounded-top"},Vn={class:"row align-items-center"},zn={class:"col-md-6"},qn={class:"mb-1"},Jn={class:"text-muted"},Wn={class:"text-muted"},Xn={class:"col-md-6 text-md-end"},Yn={class:"mt-2"},Qn={class:"text-success"},Zn={class:"order-items p-3"},nt={class:"row"},tt={class:"col-md-8"},et={class:"mb-3"},st={key:0,class:"alert alert-info"},lt={key:1,class:"items-list"},at={class:"item-image me-3"},ot=["src","alt"],rt={class:"item-details flex-grow-1"},it={class:"fw-bold"},ct={class:"text-muted"},ut={class:"text-muted"},dt={class:"item-total text-end"},gt={class:"col-md-4"},ht={class:"order-summary"},mt={class:"summary-item d-flex justify-content-between mb-2"},ft={key:0,class:"summary-item d-flex justify-content-between mb-2 text-success"},pt={key:1,class:"summary-item d-flex justify-content-between mb-2 text-info"},yt={class:"summary-item d-flex justify-content-between mb-2 fw-bold"},vt={class:"text-success"},bt={key:2,class:"summary-item d-flex justify-content-between mb-2 text-muted"},kt={class:"order-footer p-3 bg-light rounded-bottom"},Ht={class:"row align-items-center"},Tt={class:"col-md-6"},xt={class:"text-muted"},Kt={class:"text-muted"},It={class:"col-md-6 text-md-end"},Ct=["onClick","disabled"],wt=["onClick","disabled"],_t={key:2,class:"text-muted"},Dt={key:3,class:"container"},St={class:"row justify-content-center"},At={class:"col-md-8 text-center"},Pt={class:"alert alert-warning mb-4"},Ot={class:"empty-state"},Et={__name:"Orders",setup(Ut){const K=an();let L,$;try{const e=tn();L=e.user,$=e.isAuthenticated}catch(e){console.error("❌ useAuth failed:",e),L=k(null),$=k(!1)}let i,m,f,S,A;try{const e=en();i=e.orders,m=e.loading,f=e.error,S=e.loadCustomerOrders,A=e.cancelOrder,console.log("🔍 useOrders initialized successfully:"),console.log("   - orders:",i),console.log("   - orders.value:",i?.value),console.log("   - loading:",m),console.log("   - error:",f)}catch(e){console.error("❌ useOrders failed:",e),i=k([]),m=k(!1),f=k(null),S=async()=>({success:!1,error:"useOrders not available"}),A=async()=>({success:!1,error:"cancelOrder not available"})}let H;try{H=sn()}catch(e){console.error("❌ useCart failed:",e),H={maKH:null,isResolved:!1}}const d=k(null),p=k("pending"),j=E(()=>i.value.length>0),I=E(()=>{if(!i.value||i.value.length===0)return[];switch(p.value){case"pending":return i.value.filter(e=>(typeof e.trangThai=="string"?parseInt(e.trangThai):e.trangThai)===0);case"paid":return i.value.filter(e=>(typeof e.trangThai=="string"?parseInt(e.trangThai):e.trangThai)===1);case"completed":return i.value.filter(e=>(typeof e.trangThai=="string"?parseInt(e.trangThai):e.trangThai)===2);case"cancelled":return i.value.filter(e=>(typeof e.trangThai=="string"?parseInt(e.trangThai):e.trangThai)===3);default:return i.value.filter(e=>(typeof e.trangThai=="string"?parseInt(e.trangThai):e.trangThai)===0)}}),C=E(()=>{if(!i.value||i.value.length===0)return{pending:0,paid:0,completed:0,cancelled:0};const e={pending:0,paid:0,completed:0,cancelled:0};return i.value.forEach(n=>{switch(typeof n.trangThai=="string"?parseInt(n.trangThai):n.trangThai){case 0:e.pending++;break;case 1:e.paid++;break;case 2:e.completed++;break;case 3:e.cancelled++;break}}),e}),B=(e,n)=>e?.maKH?e.maKH:e?.customer?.maKH?e.customer.maKH:e?.result?.maKH?e.result.maKH:e?.data?.maKH?e.data.maKH:null,P=async()=>{try{const e=JSON.parse(localStorage.getItem("easymart-user"));if(!e)return null;if(console.log("🔍 === GETTING MAKH FROM API ==="),console.log("🔍 User data from localStorage:",e),e?.email){console.log("📧 Trying to find customer by email (PUBLIC endpoint):",e.email);try{const r=U(),s=await fetch(`${N.BASE_URL}/api/khachhang/by-email/${encodeURIComponent(e.email)}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},credentials:"include"});if(s.ok){const g=await s.json();console.log("✅ Customer data from email API:",g);const o=B(g,"email API");if(o)return console.log("✅ Found maKH from email API:",o),o}else console.log("⚠️ Email API failed with status:",s.status)}catch(r){console.log("⚠️ Email API lookup failed:",r.message)}}const n=e?.id||e?.sub||e?.maNguoiDung;if(n&&!n.startsWith("USER_")&&!n.startsWith("OAUTH_")){console.log("👤 Trying to find customer by user ID:",n);try{const r=U(),s=await fetch(`${N.BASE_URL}/api/khachhang/by-nguoidung/${n}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},credentials:"include"});if(s.ok){const g=await s.json();console.log("✅ Customer data from user ID API:",g);const o=B(g,"User ID API");if(o)return console.log("✅ Found maKH from user ID API:",o),o}else console.log("⚠️ User ID API failed with status:",s.status)}catch(r){console.log("⚠️ User ID lookup failed:",r.message)}}else console.log("⚠️ Skipping user ID lookup - frontend-generated ID:",n);return console.log("❌ All available API endpoints failed"),console.log("💡 Cart is working properly with maKH: KH86E39463"),console.log("🔧 Consider using maKH from cart or fix backend endpoints"),console.log("❌ No maKH found from any API endpoint"),null}catch(e){return console.error("❌ Error getting maKH from API:",e),null}},b=async()=>{try{console.log("🔄 === LOADING ORDERS ==="),console.log("🔄 Current orders state:",i?.value),console.log("🔄 Current loading state:",m?.value);let e=H?.maKH||d.value?.maKH||d.value?.khachHang?.maKH;if(console.log("🔑 Found maKH from sources:",{cart:H?.maKH,currentUser:d.value?.maKH,currentUserKhachHang:d.value?.khachHang?.maKH,final:e}),H?.maKH)e=H.maKH,console.log("✅ Using maKH from cart (most reliable):",e),d.value&&(d.value.maKH=e,d.value.khachHang={maKH:e});else if(!e){console.log("🔍 No maKH found from cart, trying API...");const r=await P();if(r)e=r,console.log("✅ Got maKH from API:",e),d.value&&(d.value.maKH=r,d.value.khachHang={maKH:r});else{console.log("❌ No maKH found from any source"),f.value="Không thể xác định thông tin khách hàng. Vui lòng đăng nhập lại hoặc cập nhật thông tin cá nhân trong trang Profile.";return}}console.log("🚀 Calling loadCustomerOrders with maKH:",e);const n=await S(e);console.log("✅ loadCustomerOrders completed:",n),console.log("📊 Orders after loading:",i?.value),console.log("📊 Orders length:",i?.value?.length)}catch(e){console.error("❌ Error loading orders:",e),f.value=e.message||"Có lỗi xảy ra khi tải danh sách đơn hàng"}},F=()=>{K.push("/profile")},V=async()=>{try{const e=await P();return e?(d.value&&(d.value.maKH=e,d.value.khachHang={maKH:e}),await b(),!0):!1}catch(e){return console.error("❌ Error refreshing customer info:",e),!1}},z=e=>{if(!e)return"/placeholder-image.jpg";const n=dn.IMAGES.PRODUCT_IMAGES(e);return n[0]?`${N.BASE_URL}${n[0]}`:"/placeholder-image.jpg"},q=e=>{e.target.src="/placeholder-image.jpg"},J=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}},T=e=>e==null?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),W=e=>{const n=typeof e=="string"?parseInt(e):e;return{0:"badge bg-warning text-dark",1:"badge bg-success",2:"badge bg-info",3:"badge bg-danger",4:"badge bg-secondary"}[n]||"badge bg-secondary"},O=e=>{const n=typeof e=="string"?parseInt(e):e;return{0:"Chờ thanh toán",1:"Đã thanh toán",2:"Đang xử lý",3:"Đã hủy",4:"Hoàn trả"}[n]||`Không xác định (${e})`},w=e=>(typeof e=="string"?parseInt(e):e)===0,X=async()=>{try{i.value=[],await b()}catch(e){console.error("❌ Error refreshing orders:",e),alert("Có lỗi xảy ra khi làm mới danh sách đơn hàng!")}},x=e=>{p.value=e},_=e=>p.value===e?"nav-link active":"nav-link",D=e=>{const n="badge rounded-pill ms-2";switch(e){case"pending":return`${n} bg-warning text-dark`;case"paid":return`${n} bg-success`;case"completed":return`${n} bg-info`;case"cancelled":return`${n} bg-danger`;default:return`${n} bg-warning text-dark`}},G=e=>{switch(e){case"pending":return"chờ thanh toán";case"paid":return"đã thanh toán";case"completed":return"hoàn thành";case"cancelled":return"đã hủy";default:return"chờ thanh toán"}},Y=async e=>{try{if(!e){alert("Không có mã đơn hàng để checkout!");return}const n=i.value.find(r=>r.maHD===e);if(n){if(n.trangThai!==0){alert("Chỉ có thể checkout đơn hàng đang chờ thanh toán!");return}const r={maHD:n.maHD,tongTien:n.tongTien,chiTietHoaDon:n.chiTietHoaDon||n.chiTietList||[],timestamp:new Date().toISOString(),source:"orders-page"},s=(n.chiTietHoaDon||n.chiTietList||[]).map(g=>g.sanPham?.maSP||g.maSP).filter(Boolean);localStorage.setItem("easymart-invoice",JSON.stringify(r)),localStorage.setItem("easymart-selected-items",JSON.stringify(s)),console.log("✅ Saved to localStorage:",{invoice:r,selectedItems:s}),K.push("/checkout")}else alert("Không tìm thấy thông tin đơn hàng!")}catch(n){console.error("❌ Error during checkout:",n),alert("Không thể chuyển đến trang checkout. Vui lòng thử lại!")}},Q=async e=>{const n=i.value.find(r=>r.maHD===e);if(!n){alert("Không tìm thấy đơn hàng!");return}if(!w(n.trangThai)){const r=O(n.trangThai);alert(`Không thể hủy đơn hàng này. Trạng thái hiện tại: ${r}`);return}if(confirm("Bạn có chắc chắn muốn hủy đơn hàng này?"))try{console.log("❌ Cancelling order:",e),await A(e,"Khách hàng yêu cầu hủy đơn hàng"),console.log("🔄 Refreshing orders after successful cancellation..."),await b(),alert("Đã hủy đơn hàng thành công!"),console.log("✅ Order cancelled and UI updated successfully")}catch(r){console.error("❌ Error cancelling order:",r);let s=r.message||"Lỗi không xác định",g=!1;s.includes("đã được hủy trước đó")||s.includes("already cancelled")||s.includes("đã hủy")||s.includes("cancelled")?(s="Đơn hàng này đã được hủy trước đó.",g=!0):s.includes("không thể hủy")||s.includes("cannot cancel")||s.includes("không được phép")||s.includes("not allowed")?(s="Không thể hủy đơn hàng này do trạng thái hiện tại không cho phép.",g=!0):s.includes("Bad Request")||s.includes("400")?(s="Yêu cầu hủy đơn hàng không hợp lệ. Có thể đơn hàng đã được xử lý hoặc không tồn tại.",g=!0):s.includes("Unauthorized")||s.includes("401")?s="Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.":s.includes("Forbidden")||s.includes("403")?s="Bạn không có quyền hủy đơn hàng này.":(s.includes("Not Found")||s.includes("404"))&&(s="Không tìm thấy đơn hàng này.",g=!0),alert(`Không thể hủy đơn hàng: ${s}`),g&&(console.log("🔄 Auto-refreshing orders due to error..."),setTimeout(()=>{b()},2e3))}},Z=()=>{const e=localStorage.getItem("easymart-user"),n=U();return e&&n};return ln(async()=>{try{console.log("🚀 === ORDERS PAGE MOUNTED ===");const e=Z();if(console.log("🔐 User login status:",e),!e){console.log("❌ User not logged in, redirecting to login"),K.push("/login");return}const n=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!n){console.log("❌ No user data in localStorage, redirecting to login"),K.push("/login");return}console.log("📦 User data loaded:",n),d.value=n;const r=n.maKH||n.customerInfo?.maKH;if(console.log("🔑 Existing maKH from user data:",r),r)console.log("✅ maKH already available, loading orders directly"),await b();else{console.log("🔍 No maKH found, trying to get from API...");const o=await P();o?(console.log("✅ Got maKH from API, updating user data and loading orders"),d.value.maKH=o,d.value.khachHang={maKH:o},await b()):(console.log("❌ Could not get maKH from API, showing error"),f.value="Không thể xác định thông tin khách hàng. Vui lòng đăng nhập lại hoặc cập nhật thông tin cá nhân trong trang Profile.")}const s=setInterval(async()=>{try{console.log("🔄 Auto-refreshing orders..."),await b()}catch(o){console.warn("⚠️ Auto-refresh failed:",o.message)}},3e4);on(()=>{s&&clearInterval(s)})}catch(e){console.error("❌ Error in onMounted:",e),f.value="Có lỗi xảy ra khi khởi tạo trang. Vui lòng thử lại."}}),(e,n)=>{const r=un("router-link");return u(),c("div",gn,[t("div",hn,[t("div",mn,[t("div",fn,[t("div",pn,[n[6]||(n[6]=t("h1",{class:"text-primary mb-0"},[t("i",{class:"fas fa-box me-3"}),a("Đơn hàng của tôi ")],-1)),t("div",yn,[t("button",{onClick:X,class:"btn btn-outline-primary",disabled:h(m)},[t("i",{class:y(["fas fa-sync-alt me-2",{"fa-spin":h(m)}])},null,2),n[5]||(n[5]=a(" Làm mới "))],8,vn)])]),t("div",bn,[t("ul",kn,[t("li",Hn,[t("button",{class:y(_("pending")),onClick:n[0]||(n[0]=s=>x("pending"))},[n[7]||(n[7]=t("i",{class:"fas fa-clock me-2"},null,-1)),n[8]||(n[8]=a("Chờ thanh toán ")),t("span",{class:y(D("pending"))},l(C.value.pending),3)],2)]),t("li",Tn,[t("button",{class:y(_("paid")),onClick:n[1]||(n[1]=s=>x("paid"))},[n[9]||(n[9]=t("i",{class:"fas fa-check-circle me-2"},null,-1)),n[10]||(n[10]=a("Đã thanh toán ")),t("span",{class:y(D("paid"))},l(C.value.paid),3)],2)]),t("li",xn,[t("button",{class:y(_("completed")),onClick:n[2]||(n[2]=s=>x("completed"))},[n[11]||(n[11]=t("i",{class:"fas fa-shipping-fast me-2"},null,-1)),n[12]||(n[12]=a("Hoàn thành ")),t("span",{class:y(D("completed"))},l(C.value.completed),3)],2)]),t("li",Kn,[t("button",{class:y(_("cancelled")),onClick:n[3]||(n[3]=s=>x("cancelled"))},[n[13]||(n[13]=t("i",{class:"fas fa-times-circle me-2"},null,-1)),n[14]||(n[14]=a("Đã hủy ")),t("span",{class:y(D("cancelled"))},l(C.value.cancelled),3)],2)])])])])])]),h(m)?(u(),c("div",In,n[15]||(n[15]=[t("div",{class:"row justify-content-center"},[t("div",{class:"col-md-8 text-center"},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Đang tải...")]),t("p",{class:"mt-3 text-muted"},"Đang tải danh sách đơn hàng...")])],-1)]))):h(f)?(u(),c("div",Cn,[t("div",wn,[t("div",_n,[t("div",Dn,[n[19]||(n[19]=t("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n[20]||(n[20]=t("strong",null,"Lỗi:",-1)),a(" "+l(h(f))+" ",1),t("div",{class:"mt-3"},[t("button",{onClick:b,class:"btn btn-outline-danger btn-sm me-2"},n[16]||(n[16]=[t("i",{class:"fas fa-redo me-1"},null,-1),a("Thử lại ")])),t("button",{onClick:V,class:"btn btn-outline-info btn-sm me-2"},n[17]||(n[17]=[t("i",{class:"fas fa-sync-alt me-1"},null,-1),a("Làm mới thông tin khách hàng ")])),t("button",{onClick:F,class:"btn btn-primary btn-sm"},n[18]||(n[18]=[t("i",{class:"fas fa-user-edit me-1"},null,-1),a("Cập nhật thông tin cá nhân ")]))])])])])])):h(i).length>0?(u(),c("div",Sn,[t("div",An,[t("div",Pn,[t("div",On,[n[21]||(n[21]=t("strong",null,"Debug Info:",-1)),n[22]||(n[22]=t("br",null,null,-1)),a("Orders length: "+l(h(i).length)+" ",1),n[23]||(n[23]=t("br",null,null,-1)),a("Filtered orders: "+l(I.value.length)+" ",1),n[24]||(n[24]=t("br",null,null,-1)),a("Active tab: "+l(p.value)+" ",1),n[25]||(n[25]=t("br",null,null,-1)),a("Loading: "+l(h(m))+" ",1),n[26]||(n[26]=t("br",null,null,-1)),a("Error: "+l(h(f)),1)]),t("div",En,[t("div",Un,[n[27]||(n[27]=t("i",{class:"fas fa-info-circle me-2"},null,-1)),t("span",null,[a(" Hiển thị "+l(I.value.length)+" đơn hàng ",1),t("strong",null,l(G(p.value)),1)])])]),I.value.length===0?(u(),c("div",Nn,[n[29]||(n[29]=t("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),t("h4",Ln,"Không có đơn hàng "+l(G(p.value).toLowerCase()),1),t("p",$n,[p.value==="pending"?(u(),c("span",Bn,"Bạn chưa có đơn hàng nào đang chờ thanh toán.")):p.value==="paid"?(u(),c("span",Gn,"Bạn chưa có đơn hàng nào đã thanh toán.")):p.value==="completed"?(u(),c("span",Mn,"Bạn chưa có đơn hàng nào hoàn thành.")):p.value==="cancelled"?(u(),c("span",Rn,"Bạn chưa có đơn hàng nào bị hủy.")):v("",!0)]),t("button",{onClick:n[4]||(n[4]=s=>x("pending")),class:"btn btn-outline-primary"},n[28]||(n[28]=[t("i",{class:"fas fa-clock me-2"},null,-1),a("Xem đơn hàng chờ thanh toán ")]))])):(u(),c("div",jn,[(u(!0),c(M,null,R(I.value,(s,g)=>(u(),c("div",{key:s.maHD,class:"order-card mb-4"},[t("div",Fn,[t("div",Vn,[t("div",zn,[t("h5",qn,[n[30]||(n[30]=t("i",{class:"fas fa-receipt me-2 text-primary"},null,-1)),a(" Hóa đơn #"+l(g+1),1)]),t("small",Jn,[n[31]||(n[31]=t("i",{class:"fas fa-calendar me-1"},null,-1)),a(" "+l(J(s.ngayLap)),1)]),n[33]||(n[33]=t("br",null,null,-1)),t("small",Wn,[n[32]||(n[32]=t("i",{class:"fas fa-hashtag me-1"},null,-1)),a(" Mã: "+l(s.maHD),1)])]),t("div",Xn,[t("span",{class:y(W(s.trangThai))},l(O(s.trangThai)),3),t("div",Yn,[t("strong",Qn,l(T(s.tongTien)),1)])])])]),t("div",Zn,[t("div",nt,[t("div",tt,[t("h6",et,[n[34]||(n[34]=t("i",{class:"fas fa-shopping-bag me-2 text-info"},null,-1)),a(" Sản phẩm đã đặt ("+l(s.chiTietHoaDon?.length||0)+") ",1)]),!s.chiTietHoaDon||s.chiTietHoaDon.length===0?(u(),c("div",st,n[35]||(n[35]=[t("i",{class:"fas fa-info-circle me-2"},null,-1),t("strong",null,"Không có sản phẩm trong đơn hàng này",-1),t("br",null,null,-1),t("small",{class:"text-muted"},"Đơn hàng có thể đã được xử lý hoặc chưa có chi tiết sản phẩm.",-1)]))):v("",!0),s.chiTietHoaDon&&s.chiTietHoaDon.length>0?(u(),c("div",lt,[(u(!0),c(M,null,R(s.chiTietHoaDon,o=>(u(),c("div",{key:o.maCTHD||o.id,class:"item-row d-flex align-items-center py-2 border-bottom"},[t("div",at,[t("img",{src:z(o.sanPham?.maSP||o.maSP),alt:o.sanPham?.tenSP||o.tenSP||"Sản phẩm",class:"rounded",style:{width:"50px",height:"50px","object-fit":"cover"},onError:q},null,40,ot)]),t("div",rt,[t("div",it,l(o.sanPham?.tenSP||o.tenSP||"Tên sản phẩm"),1),t("small",ct," Mã SP: "+l(o.sanPham?.maSP||o.maSP||"N/A"),1),n[36]||(n[36]=t("br",null,null,-1)),t("small",ut," Số lượng: "+l(o.soLuong)+" x "+l(T(o.donGiaBan||o.donGia)),1)]),t("div",dt,[t("strong",null,l(T(o.thanhTienSauGiam||o.thanhTien||(o.donGiaBan||o.donGia)*o.soLuong)),1)])]))),128))])):v("",!0)]),t("div",gt,[t("div",ht,[n[42]||(n[42]=t("h6",{class:"mb-3"},[t("i",{class:"fas fa-calculator me-2 text-warning"}),a(" Tổng quan ")],-1)),t("div",mt,[n[37]||(n[37]=t("span",null,"Tổng tiền hàng:",-1)),t("span",null,l(T(s.tongTienHang)),1)]),s.tienGiamGia>0?(u(),c("div",ft,[n[38]||(n[38]=t("span",null,"Giảm giá:",-1)),t("span",null,"-"+l(T(s.tienGiamGia)),1)])):v("",!0),s.khuyenMai?(u(),c("div",pt,[n[39]||(n[39]=t("span",null,"Khuyến mãi:",-1)),t("span",null,l(s.khuyenMai.tenChuongTrinh),1)])):v("",!0),n[43]||(n[43]=t("hr",null,null,-1)),t("div",yt,[n[40]||(n[40]=t("span",null,"Tổng thanh toán:",-1)),t("span",vt,l(T(s.tongTien)),1)]),s.diemTichLuy?(u(),c("div",bt,[n[41]||(n[41]=t("small",null,"Điểm tích lũy:",-1)),t("small",null,"+"+l(s.diemTichLuy)+" điểm",1)])):v("",!0)])])])]),t("div",kt,[t("div",Ht,[t("div",Tt,[t("small",xt,[n[44]||(n[44]=t("i",{class:"fas fa-user me-1"},null,-1)),a(" "+l(s.khachHang?.hoTen||"Khách hàng"),1)]),n[46]||(n[46]=t("br",null,null,-1)),t("small",Kt,[n[45]||(n[45]=t("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),a(" "+l(s.khachHang?.diaChi||"Địa chỉ giao hàng"),1)])]),t("div",It,[w(s.trangThai)?(u(),c("button",{key:0,onClick:o=>Y(s.maHD),class:"btn btn-success btn-sm me-2",disabled:h(m)},n[47]||(n[47]=[t("i",{class:"fas fa-credit-card me-1"},null,-1),a("Checkout ")]),8,Ct)):v("",!0),w(s.trangThai)?(u(),c("button",{key:1,onClick:o=>Q(s.maHD),class:"btn btn-outline-danger btn-sm",disabled:h(m)},n[48]||(n[48]=[t("i",{class:"fas fa-times me-1"},null,-1),a("Hủy đơn ")]),8,wt)):v("",!0),w(s.trangThai)?v("",!0):(u(),c("small",_t,[n[49]||(n[49]=t("i",{class:"fas fa-info-circle me-1"},null,-1)),a(" "+l(O(s.trangThai)),1)]))])])])]))),128))]))])])])):(u(),c("div",Dt,[t("div",St,[t("div",At,[t("div",Pt,[n[50]||(n[50]=t("strong",null,"Debug - Empty State:",-1)),n[51]||(n[51]=t("br",null,null,-1)),a("Orders length: "+l(h(i).length)+" ",1),n[52]||(n[52]=t("br",null,null,-1)),a("Loading: "+l(h(m))+" ",1),n[53]||(n[53]=t("br",null,null,-1)),a("Error: "+l(h(f))+" ",1),n[54]||(n[54]=t("br",null,null,-1)),a("Has orders: "+l(j.value)+" ",1),n[55]||(n[55]=t("br",null,null,-1)),a("Current user: "+l(d.value?.maKH)+" ",1),n[56]||(n[56]=t("br",null,null,-1)),a("User email: "+l(d.value?.email)+" ",1),n[57]||(n[57]=t("br",null,null,-1)),a("User ID: "+l(d.value?.id),1)]),t("div",Ot,[n[59]||(n[59]=t("i",{class:"fas fa-box-open fa-4x text-muted mb-4"},null,-1)),n[60]||(n[60]=t("h3",{class:"text-muted"},"Chưa có đơn hàng nào",-1)),n[61]||(n[61]=t("p",{class:"text-muted mb-4"}," Bạn chưa có đơn hàng nào. Hãy mua sắm và tạo đơn hàng đầu tiên! ",-1)),rn(r,{to:"/",class:"btn btn-primary"},{default:cn(()=>n[58]||(n[58]=[t("i",{class:"fas fa-shopping-cart me-2"},null,-1),a("Mua sắm ngay ")])),_:1,__:[58]})])])])]))])}}},Lt=nn(Et,[["__scopeId","data-v-02942b9e"]]);export{Lt as default};
