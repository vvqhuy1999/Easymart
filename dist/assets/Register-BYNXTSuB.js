import{_ as q,r as l,d as n,e as s,k as u,h as d,t as x,n as g,i as M,j as p,v as w,H as _,I as P,f as U,w as R,g as B,b as D,q as r,J as $}from"./index-r8GnmL0A.js";const j={class:"d-flex justify-content-center align-items-center",style:{"min-height":"80vh",background:"#f8fafc"}},E={class:"card shadow p-4 border-0",style:{"max-width":"400px",width:"100%","border-radius":"1.5rem"}},H={key:0,class:"text-center mb-3"},I={key:1,class:"alert alert-danger",role:"alert"},S={key:2,class:"alert alert-success",role:"alert"},z={class:"mb-3"},A={class:"input-group"},J={class:"mb-3"},L={class:"input-group"},F={class:"mb-3"},G={class:"input-group"},K=["type"],O={class:"mb-3"},Q={class:"input-group"},W=["type"],X={class:"mb-3 form-check"},Y=["disabled"],Z={key:0,class:"fas fa-user-plus me-2"},ee={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},se={__name:"Register",setup(te){const C=D(),{register:V}=$(),k=l(""),y=l(""),m=l(""),v=l(""),h=l(!1),c=l(!1),f=l(!1),a=l(!1),o=l(""),b=l("");async function N(){if(o.value="",b.value="",m.value!==v.value){o.value="Mật khẩu không khớp!";return}if(!h.value){o.value="Vui lòng đồng ý với điều khoản sử dụng!";return}a.value=!0;try{const i=await V(k.value,y.value,m.value,v.value);i.success?(b.value=`Chào mừng ${i.user.name}! Đăng ký thành công. Đang chuyển hướng...`,setTimeout(()=>{C.push("/")},2e3)):o.value=i.error||"Đăng ký thất bại"}catch{o.value="Có lỗi xảy ra, vui lòng thử lại"}finally{a.value=!1}}return(i,e)=>{const T=B("router-link");return r(),n("div",null,[s("div",j,[s("div",E,[e[21]||(e[21]=s("h2",{class:"mb-4 text-center text-primary fw-bold"},"Đăng ký",-1)),a.value?(r(),n("div",H,e[7]||(e[7]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Đang đăng ký...")],-1),s("p",{class:"mt-2 text-muted"},"Đang xử lý...",-1)]))):u("",!0),o.value?(r(),n("div",I,[e[8]||(e[8]=s("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),d(x(o.value),1)])):u("",!0),b.value?(r(),n("div",S,[e[9]||(e[9]=s("i",{class:"fas fa-check-circle me-2"},null,-1)),d(x(b.value),1)])):u("",!0),s("form",{onSubmit:M(N,["prevent"]),class:g({"d-none":a.value})},[s("div",z,[e[11]||(e[11]=s("label",{for:"name",class:"form-label"},"Họ và tên",-1)),s("div",A,[e[10]||(e[10]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-user"})],-1)),p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t),type:"text",class:"form-control",id:"name",required:"",autocomplete:"name",placeholder:"Nhập họ và tên"},null,512),[[w,k.value]])])]),s("div",J,[e[13]||(e[13]=s("label",{for:"email",class:"form-label"},"Email",-1)),s("div",L,[e[12]||(e[12]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-envelope"})],-1)),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>y.value=t),type:"email",class:"form-control",id:"email",required:"",autocomplete:"username",placeholder:"Nhập email của bạn"},null,512),[[w,y.value]])])]),s("div",F,[e[15]||(e[15]=s("label",{for:"password",class:"form-label"},"Mật khẩu",-1)),s("div",G,[e[14]||(e[14]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-lock"})],-1)),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),type:c.value?"text":"password",class:"form-control",id:"password",required:"",autocomplete:"new-password",placeholder:"Nhập mật khẩu"},null,8,K),[[_,m.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[3]||(e[3]=t=>c.value=!c.value)},[s("i",{class:g(c.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",O,[e[17]||(e[17]=s("label",{for:"confirmPassword",class:"form-label"},"Nhập lại mật khẩu",-1)),s("div",Q,[e[16]||(e[16]=s("span",{class:"input-group-text"},[s("i",{class:"fas fa-lock"})],-1)),p(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>v.value=t),type:f.value?"text":"password",class:"form-control",id:"confirmPassword",required:"",autocomplete:"new-password",placeholder:"Nhập lại mật khẩu"},null,8,W),[[_,v.value]]),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[5]||(e[5]=t=>f.value=!f.value)},[s("i",{class:g(f.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),s("div",X,[p(s("input",{type:"checkbox",class:"form-check-input",id:"agreeTerms","onUpdate:modelValue":e[6]||(e[6]=t=>h.value=t),required:""},null,512),[[P,h.value]]),e[18]||(e[18]=s("label",{class:"form-check-label",for:"agreeTerms"},[d(" Tôi đồng ý với "),s("a",{href:"#",class:"text-primary"},"điều khoản sử dụng")],-1))]),s("button",{type:"submit",class:"btn btn-primary w-100 fw-bold",disabled:a.value},[a.value?u("",!0):(r(),n("i",Z)),a.value?(r(),n("span",ee)):u("",!0),d(" "+x(a.value?"Đang đăng ký...":"Đăng ký"),1)],8,Y)],34),s("div",{class:g(["text-center mt-3",{"d-none":a.value}])},[e[20]||(e[20]=s("span",null,"Đã có tài khoản?",-1)),U(T,{to:"/login",class:"ms-1 text-primary"},{default:R(()=>e[19]||(e[19]=[d("Đăng nhập")])),_:1,__:[19]})],2)])])])}}},ae=q(se,[["__scopeId","data-v-5eec1d4a"]]);export{ae as default};
