import{_ as L,u as K,r as y,c as w,o as X,a as Y,b as W,d as i,e as d,f as s,g as O,w as $,h as ss,i as l,j as ts,k as p,l as v,v as V,n as N,t as o,m as T,p as f,F as A,q as B}from"./index-BeyCD7yF.js";const es={class:"checkout-page"},ns={class:"container py-5 mt-5"},ls={"aria-label":"breadcrumb",class:"mb-4"},as={class:"breadcrumb"},os={class:"breadcrumb-item"},is={class:"breadcrumb-item"},ds={key:0,class:"row"},us={class:"col-lg-8"},rs={class:"card mb-4"},cs={class:"card-body"},ms={class:"row"},hs={class:"col-md-6 mb-3"},vs={key:0,class:"invalid-feedback"},ps={class:"col-md-6 mb-3"},gs={key:0,class:"invalid-feedback"},fs={class:"mb-3"},ys={key:0,class:"invalid-feedback"},bs={class:"mb-3"},ks={key:0,class:"invalid-feedback"},xs={class:"mb-3"},_s={class:"card mb-4"},Ms={class:"card-body"},ws={class:"row"},Vs={class:"col-md-6 mb-3"},Ts={class:"form-check payment-method"},Cs={class:"col-md-6 mb-3"},Ns={class:"form-check payment-method"},Ss={class:"col-md-6 mb-3"},qs={class:"form-check payment-method"},Ps={class:"col-md-6 mb-3"},Is={class:"form-check payment-method"},Os={class:"col-md-6 mb-3"},$s={class:"form-check payment-method"},Us={class:"col-md-6 mb-3"},Ds={class:"form-check payment-method"},Es={key:0,class:"banking-info mt-3 p-3 bg-light rounded"},Qs={class:"row"},Rs={class:"col-md-6"},As={class:"mb-2"},Bs={key:1,class:"payment-info mt-3 p-3 bg-light rounded"},Hs={class:"row align-items-center"},js={class:"col-md-6"},Fs={class:"mb-2"},Gs={class:"mb-2"},zs={key:2,class:"payment-info mt-3 p-3 bg-light rounded"},Zs={class:"row"},Js={class:"col-md-6"},Ls={class:"mb-2"},Ks={class:"mb-2"},Xs={key:3,class:"payment-info mt-3 p-3 bg-light rounded"},Ys={class:"row"},Ws={class:"col-md-6"},st={class:"mb-2"},tt={class:"mb-2"},et={key:4,class:"payment-info mt-3 p-3 bg-light rounded"},nt={class:"row"},lt={class:"col-md-6"},at={class:"mb-2"},ot={class:"mb-2"},it={class:"col-lg-4"},dt={class:"card sticky-top",style:{top:"100px"}},ut={class:"card-body"},rt={class:"order-items mb-3"},ct=["src","alt"],mt={class:"flex-grow-1"},ht={class:"mb-1"},vt={class:"d-flex justify-content-between"},pt={class:"text-muted"},gt={class:"fw-bold"},ft={class:"order-summary"},yt={class:"d-flex justify-content-between mb-2"},bt={class:"d-flex justify-content-between mb-2"},kt={key:0,class:"small text-success mb-2"},xt={class:"coupon-section mb-3"},_t={class:"d-flex gap-2 mb-2"},Mt=["disabled"],wt=["disabled"],Vt={key:0},Tt={key:1},Ct={key:0,class:"applied-coupon"},Nt={class:"d-flex justify-content-between align-items-center p-2 bg-success bg-opacity-10 rounded"},St={class:"text-success fw-bold"},qt={class:"small text-muted"},Pt={key:1,class:"d-flex justify-content-between mb-2 text-success"},It={key:2,class:"available-coupons mt-2"},Ot={class:"d-flex flex-wrap gap-1"},$t=["onClick","title"],Ut={class:"d-flex justify-content-between mb-3"},Dt={class:"text-danger fs-5"},Et=["disabled"],Qt={key:0},Rt={key:1},At={key:1,class:"row"},Bt={class:"col-12"},Ht={class:"empty-checkout text-center py-5"},jt={__name:"Checkout",setup(Ft){const D=W(),{formatPrice:g,showNotification:c,products:H}=K(),{cart:S}=Y(),q=y(!1),h=y(""),r=y({}),k=y(""),m=y(null),P=y(!1),U=y([{code:"WELCOME10",description:"Giảm 10% cho đơn hàng đầu tiên",discountType:"percentage",discountValue:10,minOrderValue:1e5,maxDiscount:5e4},{code:"FREESHIP",description:"Miễn phí vận chuyển",discountType:"shipping",discountValue:0,minOrderValue:0,maxDiscount:3e4},{code:"SAVE50K",description:"Giảm 50.000đ cho đơn từ 500.000đ",discountType:"fixed",discountValue:5e4,minOrderValue:5e5,maxDiscount:5e4},{code:"VIP20",description:"Giảm 20% cho khách VIP (tối đa 100k)",discountType:"percentage",discountValue:20,minOrderValue:2e5,maxDiscount:1e5}]),n=y({fullName:"",phone:"",email:"",address:"",notes:"",paymentMethod:"cod"}),b=y([]),M=w(()=>b.value.reduce((a,t)=>a+(t.product?.price||0)*t.quantity,0)),x=w(()=>m.value?.discountType==="shipping"||M.value>=2e5?0:3e4),C=w(()=>{if(!m.value)return 0;const a=m.value,t=M.value;if(t<a.minOrderValue)return 0;let u=0;switch(a.discountType){case"percentage":u=t*a.discountValue/100;break;case"fixed":u=a.discountValue;break;case"shipping":u=x.value;break;default:u=0}return Math.min(u,a.maxDiscount)}),_=w(()=>M.value+x.value-C.value),E=w(()=>b.value.reduce((a,t)=>a+t.quantity,0)),j=w(()=>n.value.fullName&&n.value.phone&&n.value.address&&n.value.paymentMethod),F=()=>{const a=Date.now().toString().slice(-6),t=Math.random().toString(36).substr(2,4).toUpperCase();return`EM${a}${t}`},G=()=>(r.value={},n.value.fullName.trim()||(r.value.fullName="Vui lòng nhập họ và tên"),n.value.phone.trim()?/^[0-9]{10,11}$/.test(n.value.phone.replace(/\s/g,""))||(r.value.phone="Số điện thoại không hợp lệ"):r.value.phone="Vui lòng nhập số điện thoại",n.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)&&(r.value.email="Email không hợp lệ"),n.value.address.trim()||(r.value.address="Vui lòng nhập địa chỉ giao hàng"),Object.keys(r.value).length===0),Q=async()=>{if(k.value.trim()){P.value=!0;try{await new Promise(t=>setTimeout(t,1e3));const a=U.value.find(t=>t.code.toLowerCase()===k.value.trim().toLowerCase());if(!a){c("Mã khuyến mãi không hợp lệ!","error");return}if(M.value<a.minOrderValue){c(`Đơn hàng tối thiểu ${g(a.minOrderValue)} để áp dụng mã này!`,"warning");return}m.value=a,c(`Áp dụng mã ${a.code} thành công!`,"success")}catch{c("Có lỗi xảy ra khi áp dụng mã khuyến mãi!","error")}finally{P.value=!1}}},z=()=>{m.value=null,k.value="",c("Đã xóa mã khuyến mãi!","info")},Z=a=>{k.value=a,Q()},R=async()=>{if(!G()){c("Vui lòng kiểm tra lại thông tin đơn hàng","error");return}q.value=!0;try{await new Promise(u=>setTimeout(u,2e3));const a={orderCode:h.value,customer:{...n.value},items:b.value,summary:{subtotal:M.value,shippingFee:x.value,couponDiscount:C.value,total:_.value,itemsCount:E.value},coupon:m.value?{code:m.value.code,description:m.value.description,discountType:m.value.discountType,discountValue:C.value}:null,createdAt:new Date().toISOString()},t=JSON.parse(localStorage.getItem("easymart-orders")||"[]");t.push(a),localStorage.setItem("easymart-orders",JSON.stringify(t)),b.value.forEach(u=>{const e=S.value.findIndex(I=>I.productId===u.productId);e!==-1&&S.value.splice(e,1)}),localStorage.setItem("easymart-cart",JSON.stringify(S.value)),localStorage.removeItem("easymart-selected-items"),J(a)}catch{c("Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại!","error")}finally{q.value=!1}},J=a=>{const t=n.value.paymentMethod;switch(localStorage.setItem("easymart-last-order",JSON.stringify(a)),t){case"cod":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Bạn sẽ thanh toán khi nhận hàng.`,"success");break;case"banking":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng chuyển khoản theo thông tin đã cung cấp.`,"success");break;case"qr":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng quét mã QR để thanh toán.`,"success");break;case"momo":c("Đang chuyển đến MoMo để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán MoMo thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"vnpay":c("Đang chuyển đến VNPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán VNPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"zalopay":c("Đang chuyển đến ZaloPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán ZaloPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;default:c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}`,"success")}setTimeout(()=>{D.push({name:"PaymentSuccess",query:{orderCode:h.value,total:_.value,paymentMethod:t}})},3e3)};return X(()=>{h.value=F();const a=localStorage.getItem("easymart-selected-items");if(a){const t=JSON.parse(a);b.value=S.value.filter(u=>t.includes(u.productId)).map(u=>{const e=H.value.find(I=>I.id===u.productId);return{...u,product:e}}).filter(u=>u.product)}b.value.length===0&&(c("Vui lòng chọn sản phẩm từ giỏ hàng để thanh toán","warning"),D.push("/cart"))}),(a,t)=>{const u=ss("router-link");return d(),i("div",es,[s("div",ns,[s("nav",ls,[s("ol",as,[s("li",os,[O(u,{to:"/",class:"text-decoration-none"},{default:$(()=>t[12]||(t[12]=[s("i",{class:"fas fa-home"},null,-1),l(" Trang chủ ")])),_:1,__:[12]})]),s("li",is,[O(u,{to:"/cart",class:"text-decoration-none"},{default:$(()=>t[13]||(t[13]=[s("i",{class:"fas fa-shopping-cart"},null,-1),l(" Giỏ hàng ")])),_:1,__:[13]})]),t[14]||(t[14]=s("li",{class:"breadcrumb-item active","aria-current":"page"},[s("i",{class:"fas fa-credit-card"}),l(" Thanh toán ")],-1))])]),t[65]||(t[65]=s("h2",{class:"mb-4"},[s("i",{class:"fas fa-credit-card text-primary me-2"}),l(" Thanh toán đơn hàng ")],-1)),b.value.length>0?(d(),i("div",ds,[s("div",us,[s("div",rs,[t[20]||(t[20]=s("div",{class:"card-header bg-primary text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-truck me-2"}),l(" Thông tin giao hàng ")])],-1)),s("div",cs,[s("form",{onSubmit:ts(R,["prevent"])},[s("div",ms,[s("div",hs,[t[15]||(t[15]=s("label",{for:"fullName",class:"form-label"},"Họ và tên *",-1)),p(s("input",{type:"text",class:N(["form-control",{"is-invalid":r.value.fullName}]),id:"fullName","onUpdate:modelValue":t[0]||(t[0]=e=>n.value.fullName=e),required:""},null,2),[[V,n.value.fullName]]),r.value.fullName?(d(),i("div",vs,o(r.value.fullName),1)):v("",!0)]),s("div",ps,[t[16]||(t[16]=s("label",{for:"phone",class:"form-label"},"Số điện thoại *",-1)),p(s("input",{type:"tel",class:N(["form-control",{"is-invalid":r.value.phone}]),id:"phone","onUpdate:modelValue":t[1]||(t[1]=e=>n.value.phone=e),required:""},null,2),[[V,n.value.phone]]),r.value.phone?(d(),i("div",gs,o(r.value.phone),1)):v("",!0)])]),s("div",fs,[t[17]||(t[17]=s("label",{for:"email",class:"form-label"},"Email",-1)),p(s("input",{type:"email",class:N(["form-control",{"is-invalid":r.value.email}]),id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>n.value.email=e)},null,2),[[V,n.value.email]]),r.value.email?(d(),i("div",ys,o(r.value.email),1)):v("",!0)]),s("div",bs,[t[18]||(t[18]=s("label",{for:"address",class:"form-label"},"Địa chỉ giao hàng *",-1)),p(s("textarea",{class:N(["form-control",{"is-invalid":r.value.address}]),id:"address",rows:"3","onUpdate:modelValue":t[3]||(t[3]=e=>n.value.address=e),placeholder:"Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố",required:""},null,2),[[V,n.value.address]]),r.value.address?(d(),i("div",ks,o(r.value.address),1)):v("",!0)]),s("div",xs,[t[19]||(t[19]=s("label",{for:"notes",class:"form-label"},"Ghi chú đơn hàng",-1)),p(s("textarea",{class:"form-control",id:"notes",rows:"2","onUpdate:modelValue":t[4]||(t[4]=e=>n.value.notes=e),placeholder:"Ghi chú về đơn hàng, ví dụ: thời gian hay chỉ dẫn địa điểm giao hàng chi tiết hơn."},null,512),[[V,n.value.notes]])])],32)])]),s("div",_s,[t[48]||(t[48]=s("div",{class:"card-header bg-success text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-money-bill-wave me-2"}),l(" Phương thức thanh toán ")])],-1)),s("div",Ms,[s("div",ws,[s("div",Vs,[s("div",Ts,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"cod",value:"cod","onUpdate:modelValue":t[5]||(t[5]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[21]||(t[21]=s("label",{class:"form-check-label w-100",for:"cod"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-hand-holding-usd text-success me-3 fs-4"}),s("div",null,[s("strong",null,"Thanh toán khi nhận hàng (COD)"),s("div",{class:"text-muted small"},"Thanh toán bằng tiền mặt khi nhận hàng")])])],-1))])]),s("div",Cs,[s("div",Ns,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"banking",value:"banking","onUpdate:modelValue":t[6]||(t[6]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[22]||(t[22]=s("label",{class:"form-check-label w-100",for:"banking"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-university text-primary me-3 fs-4"}),s("div",null,[s("strong",null,"Chuyển khoản ngân hàng"),s("div",{class:"text-muted small"},"Chuyển khoản trước khi giao hàng")])])],-1))])]),s("div",Ss,[s("div",qs,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"qr",value:"qr","onUpdate:modelValue":t[7]||(t[7]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[23]||(t[23]=s("label",{class:"form-check-label w-100",for:"qr"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-qrcode text-dark me-3 fs-4"}),s("div",null,[s("strong",null,"Quét mã QR"),s("div",{class:"text-muted small"},"Quét QR để thanh toán nhanh")])])],-1))])]),s("div",Ps,[s("div",Is,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"momo",value:"momo","onUpdate:modelValue":t[8]||(t[8]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[24]||(t[24]=s("label",{class:"form-check-label w-100",for:"momo"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fab fa-momo text-danger me-3 fs-4"}),s("div",null,[s("strong",null,"Ví MoMo"),s("div",{class:"text-muted small"},"Thanh toán qua ví điện tử MoMo")])])],-1))])]),s("div",Os,[s("div",$s,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"vnpay",value:"vnpay","onUpdate:modelValue":t[9]||(t[9]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[25]||(t[25]=s("label",{class:"form-check-label w-100",for:"vnpay"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-credit-card text-info me-3 fs-4"}),s("div",null,[s("strong",null,"VNPay"),s("div",{class:"text-muted small"},"Thanh toán qua cổng VNPay")])])],-1))])]),s("div",Us,[s("div",Ds,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"zalopay",value:"zalopay","onUpdate:modelValue":t[10]||(t[10]=e=>n.value.paymentMethod=e)},null,512),[[T,n.value.paymentMethod]]),t[26]||(t[26]=s("label",{class:"form-check-label w-100",for:"zalopay"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-mobile-alt text-warning me-3 fs-4"}),s("div",null,[s("strong",null,"ZaloPay"),s("div",{class:"text-muted small"},"Thanh toán qua ví ZaloPay")])])],-1))])])]),n.value.paymentMethod==="banking"?(d(),i("div",Es,[t[30]||(t[30]=s("h6",{class:"text-primary mb-3"},[s("i",{class:"fas fa-info-circle me-2"}),l(" Thông tin chuyển khoản ")],-1)),s("div",Qs,[t[29]||(t[29]=s("div",{class:"col-md-6"},[s("p",{class:"mb-2"},[s("strong",null,"Ngân hàng:"),l(" Vietcombank")]),s("p",{class:"mb-2"},[s("strong",null,"Số tài khoản:"),l(" 1234567890")]),s("p",{class:"mb-2"},[s("strong",null,"Chủ tài khoản:"),l(" EASYMART COMPANY")])],-1)),s("div",Rs,[s("p",As,[t[27]||(t[27]=s("strong",null,"Nội dung:",-1)),l(" THANHTOAN "+o(h.value),1)]),t[28]||(t[28]=s("p",{class:"mb-0 text-danger"},[s("small",null,[s("strong",null,"Lưu ý:"),l(" Vui lòng chuyển khoản đúng nội dung để đơn hàng được xử lý nhanh chóng.")])],-1))])])])):v("",!0),n.value.paymentMethod==="qr"?(d(),i("div",Bs,[t[35]||(t[35]=s("h6",{class:"text-dark mb-3"},[s("i",{class:"fas fa-qrcode me-2"}),l(" Quét mã QR để thanh toán ")],-1)),s("div",Hs,[t[34]||(t[34]=s("div",{class:"col-md-6 text-center"},[s("div",{class:"qr-code-placeholder"},[s("i",{class:"fas fa-qrcode fa-5x text-muted mb-2"}),s("p",{class:"text-muted"},"Mã QR sẽ được tạo sau khi đặt hàng")])],-1)),s("div",js,[s("p",Fs,[t[31]||(t[31]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",Gs,[t[32]||(t[32]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)]),t[33]||(t[33]=s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Mở app ngân hàng → Quét QR → Xác nhận thanh toán")])],-1))])])])):v("",!0),n.value.paymentMethod==="momo"?(d(),i("div",zs,[t[39]||(t[39]=s("h6",{class:"text-danger mb-3"},[s("i",{class:"fab fa-momo me-2"}),l(" Thanh toán qua ví MoMo ")],-1)),s("div",Zs,[s("div",Js,[s("p",Ls,[t[36]||(t[36]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",Ks,[t[37]||(t[37]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),t[38]||(t[38]=s("div",{class:"col-md-6"},[s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app MoMo để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0),n.value.paymentMethod==="vnpay"?(d(),i("div",Xs,[t[43]||(t[43]=s("h6",{class:"text-info mb-3"},[s("i",{class:"fas fa-credit-card me-2"}),l(" Thanh toán qua VNPay ")],-1)),s("div",Ys,[s("div",Ws,[s("p",st,[t[40]||(t[40]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",tt,[t[41]||(t[41]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),t[42]||(t[42]=s("div",{class:"col-md-6"},[s("p",{class:"mb-2"},[s("strong",null,"Hỗ trợ:"),l(" Thẻ ATM, Internet Banking, Ví điện tử")]),s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến cổng thanh toán VNPay để hoàn tất giao dịch.")])])],-1))])])):v("",!0),n.value.paymentMethod==="zalopay"?(d(),i("div",et,[t[47]||(t[47]=s("h6",{class:"text-warning mb-3"},[s("i",{class:"fas fa-mobile-alt me-2"}),l(" Thanh toán qua ZaloPay ")],-1)),s("div",nt,[s("div",lt,[s("p",at,[t[44]||(t[44]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",ot,[t[45]||(t[45]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),t[46]||(t[46]=s("div",{class:"col-md-6"},[s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app ZaloPay để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0)])])]),s("div",it,[s("div",dt,[t[60]||(t[60]=s("div",{class:"card-header bg-warning text-dark"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-receipt me-2"}),l(" Đơn hàng của bạn ")])],-1)),s("div",ut,[s("div",rt,[(d(!0),i(A,null,B(b.value,e=>(d(),i("div",{key:e.productId,class:"order-item d-flex align-items-center mb-3 pb-3 border-bottom"},[s("img",{src:e.product?.image,alt:e.product?.name,class:"order-item-image me-3"},null,8,ct),s("div",mt,[s("h6",ht,o(e.product?.name),1),s("div",vt,[s("span",pt,o(f(g)(e.product?.price||0))+" x "+o(e.quantity),1),s("span",gt,o(f(g)((e.product?.price||0)*e.quantity)),1)])])]))),128))]),s("div",ft,[s("div",yt,[s("span",null,"Tạm tính ("+o(E.value)+" sản phẩm):",1),s("span",null,o(f(g)(M.value)),1)]),s("div",bt,[t[49]||(t[49]=s("span",null,"Phí vận chuyển:",-1)),s("span",{class:N(x.value===0?"text-success":"")},o(x.value===0?"Miễn phí":f(g)(x.value)),3)]),x.value===0?(d(),i("div",kt,t[50]||(t[50]=[s("i",{class:"fas fa-check-circle me-1"},null,-1),l(" Bạn được miễn phí vận chuyển! ")]))):v("",!0),s("div",xt,[s("div",_t,[p(s("input",{type:"text",class:"form-control form-control-sm",placeholder:"Nhập mã khuyến mãi","onUpdate:modelValue":t[11]||(t[11]=e=>k.value=e),disabled:m.value},null,8,Mt),[[V,k.value]]),s("button",{class:"btn btn-outline-primary btn-sm",onClick:Q,disabled:!k.value.trim()||m.value||P.value},[P.value?(d(),i("span",Vt,t[51]||(t[51]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(d(),i("span",Tt,o(m.value?"Đã áp dụng":"Áp dụng"),1))],8,wt)]),m.value?(d(),i("div",Ct,[s("div",Nt,[s("div",null,[s("small",St,[t[52]||(t[52]=s("i",{class:"fas fa-ticket-alt me-1"},null,-1)),l(" "+o(m.value.code),1)]),s("div",qt,o(m.value.description),1)]),s("button",{class:"btn btn-sm btn-outline-danger",onClick:z,title:"Xóa mã khuyến mãi"},t[53]||(t[53]=[s("i",{class:"fas fa-times"},null,-1)]))])])):v("",!0),C.value>0?(d(),i("div",Pt,[s("span",null,"Giảm giá ("+o(m.value?.code)+"):",1),s("span",null,"-"+o(f(g)(C.value)),1)])):v("",!0),!m.value&&U.value.length>0?(d(),i("div",It,[t[54]||(t[54]=s("small",{class:"text-muted d-block mb-2"},"Mã khuyến mãi có sẵn:",-1)),s("div",Ot,[(d(!0),i(A,null,B(U.value,e=>(d(),i("button",{key:e.code,class:"btn btn-outline-success btn-sm",onClick:I=>Z(e.code),title:e.description},o(e.code),9,$t))),128))])])):v("",!0)]),t[59]||(t[59]=s("hr",null,null,-1)),s("div",Ut,[t[55]||(t[55]=s("strong",{class:"fs-5"},"Tổng cộng:",-1)),s("strong",Dt,o(f(g)(_.value)),1)]),s("button",{type:"button",class:"btn btn-primary w-100 mb-2 py-2",onClick:R,disabled:q.value||!j.value},[q.value?(d(),i("span",Qt,t[56]||(t[56]=[s("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),l(" Đang xử lý... ")]))):(d(),i("span",Rt,t[57]||(t[57]=[s("i",{class:"fas fa-check me-2"},null,-1),l(" Đặt hàng ")])))],8,Et),O(u,{to:"/cart",class:"btn btn-outline-secondary w-100"},{default:$(()=>t[58]||(t[58]=[s("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[58]})])])])])])):(d(),i("div",At,[s("div",Bt,[s("div",Ht,[t[62]||(t[62]=s("div",{class:"empty-checkout-icon mb-4"},[s("i",{class:"fas fa-exclamation-triangle fa-5x text-warning"})],-1)),t[63]||(t[63]=s("h3",{class:"text-muted mb-3"},"Không có sản phẩm để thanh toán",-1)),t[64]||(t[64]=s("p",{class:"text-muted mb-4"},"Vui lòng quay lại giỏ hàng và chọn sản phẩm để thanh toán",-1)),O(u,{to:"/cart",class:"btn btn-primary btn-lg"},{default:$(()=>t[61]||(t[61]=[s("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[61]})])])]))])])}}},zt=L(jt,[["__scopeId","data-v-a454a58d"]]);export{zt as default};
