import{_ as L,u as K,p as X,r as y,q as w,h as Y,m as W,c as i,a as e,i as O,j as $,k as ee,g as l,w as se,s as p,d as v,v as V,f as N,t as o,x as T,l as f,F as A,e as B,o as d}from"./index-C7tt8mol.js";const te={class:"checkout-page"},ne={class:"container py-5 mt-5"},le={"aria-label":"breadcrumb",class:"mb-4"},ae={class:"breadcrumb"},oe={class:"breadcrumb-item"},ie={class:"breadcrumb-item"},de={key:0,class:"row"},ue={class:"col-lg-8"},re={class:"card mb-4"},ce={class:"card-body"},me={class:"row"},he={class:"col-md-6 mb-3"},ve={key:0,class:"invalid-feedback"},pe={class:"col-md-6 mb-3"},ge={key:0,class:"invalid-feedback"},fe={class:"mb-3"},ye={key:0,class:"invalid-feedback"},be={class:"mb-3"},ke={key:0,class:"invalid-feedback"},xe={class:"mb-3"},_e={class:"card mb-4"},Me={class:"card-body"},we={class:"row"},Ve={class:"col-md-6 mb-3"},Te={class:"form-check payment-method"},Ce={class:"col-md-6 mb-3"},Ne={class:"form-check payment-method"},Se={class:"col-md-6 mb-3"},qe={class:"form-check payment-method"},Pe={class:"col-md-6 mb-3"},Ie={class:"form-check payment-method"},Oe={class:"col-md-6 mb-3"},$e={class:"form-check payment-method"},Ue={class:"col-md-6 mb-3"},De={class:"form-check payment-method"},Ee={key:0,class:"banking-info mt-3 p-3 bg-light rounded"},Qe={class:"row"},Re={class:"col-md-6"},Ae={class:"mb-2"},Be={key:1,class:"payment-info mt-3 p-3 bg-light rounded"},He={class:"row align-items-center"},je={class:"col-md-6"},Fe={class:"mb-2"},Ge={class:"mb-2"},ze={key:2,class:"payment-info mt-3 p-3 bg-light rounded"},Ze={class:"row"},Je={class:"col-md-6"},Le={class:"mb-2"},Ke={class:"mb-2"},Xe={key:3,class:"payment-info mt-3 p-3 bg-light rounded"},Ye={class:"row"},We={class:"col-md-6"},es={class:"mb-2"},ss={class:"mb-2"},ts={key:4,class:"payment-info mt-3 p-3 bg-light rounded"},ns={class:"row"},ls={class:"col-md-6"},as={class:"mb-2"},os={class:"mb-2"},is={class:"col-lg-4"},ds={class:"card sticky-top",style:{top:"100px"}},us={class:"card-body"},rs={class:"order-items mb-3"},cs=["src","alt"],ms={class:"flex-grow-1"},hs={class:"mb-1"},vs={class:"d-flex justify-content-between"},ps={class:"text-muted"},gs={class:"fw-bold"},fs={class:"order-summary"},ys={class:"d-flex justify-content-between mb-2"},bs={class:"d-flex justify-content-between mb-2"},ks={key:0,class:"small text-success mb-2"},xs={class:"coupon-section mb-3"},_s={class:"d-flex gap-2 mb-2"},Ms=["disabled"],ws=["disabled"],Vs={key:0},Ts={key:1},Cs={key:0,class:"applied-coupon"},Ns={class:"d-flex justify-content-between align-items-center p-3 rounded-3",style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",border:"1px solid rgba(102, 126, 234, 0.3)"}},Ss={class:"fw-bold",style:{color:"#667eea"}},qs={class:"small text-muted"},Ps={key:1,class:"d-flex justify-content-between mb-2",style:{color:"#11998e"}},Is={key:2,class:"available-coupons mt-2"},Os={class:"d-flex flex-wrap gap-1"},$s=["onClick","title"],Us={class:"d-flex justify-content-between mb-3"},Ds={class:"text-danger fs-5"},Es=["disabled"],Qs={key:0},Rs={key:1},As={key:1,class:"row"},Bs={class:"col-12"},Hs={class:"empty-checkout text-center py-5"},js={__name:"Checkout",setup(Fs){const D=W(),{formatPrice:g,showNotification:c,products:H}=K(),{cart:S,clearCart:Gs}=X(),q=y(!1),h=y(""),r=y({}),k=y(""),m=y(null),P=y(!1),U=y([{code:"WELCOME10",description:"Giảm 10% cho đơn hàng đầu tiên",discountType:"percentage",discountValue:10,minOrderValue:1e5,maxDiscount:5e4},{code:"FREESHIP",description:"Miễn phí vận chuyển",discountType:"shipping",discountValue:0,minOrderValue:0,maxDiscount:3e4},{code:"SAVE50K",description:"Giảm 50.000đ cho đơn từ 500.000đ",discountType:"fixed",discountValue:5e4,minOrderValue:5e5,maxDiscount:5e4},{code:"VIP20",description:"Giảm 20% cho khách VIP (tối đa 100k)",discountType:"percentage",discountValue:20,minOrderValue:2e5,maxDiscount:1e5}]),n=y({fullName:"",phone:"",email:"",address:"",notes:"",paymentMethod:"cod"}),b=y([]),M=w(()=>b.value.reduce((a,s)=>a+(s.product?.price||0)*s.quantity,0)),x=w(()=>m.value?.discountType==="shipping"||M.value>=2e5?0:3e4),C=w(()=>{if(!m.value)return 0;const a=m.value,s=M.value;if(s<a.minOrderValue)return 0;let u=0;switch(a.discountType){case"percentage":u=s*a.discountValue/100;break;case"fixed":u=a.discountValue;break;case"shipping":u=x.value;break;default:u=0}return Math.min(u,a.maxDiscount)}),_=w(()=>M.value+x.value-C.value),E=w(()=>b.value.reduce((a,s)=>a+s.quantity,0)),j=w(()=>n.value.fullName&&n.value.phone&&n.value.address&&n.value.paymentMethod),F=()=>{const a=Date.now().toString().slice(-6),s=Math.random().toString(36).substr(2,4).toUpperCase();return`EM${a}${s}`},G=()=>(r.value={},n.value.fullName.trim()||(r.value.fullName="Vui lòng nhập họ và tên"),n.value.phone.trim()?/^[0-9]{10,11}$/.test(n.value.phone.replace(/\s/g,""))||(r.value.phone="Số điện thoại không hợp lệ"):r.value.phone="Vui lòng nhập số điện thoại",n.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)&&(r.value.email="Email không hợp lệ"),n.value.address.trim()||(r.value.address="Vui lòng nhập địa chỉ giao hàng"),Object.keys(r.value).length===0),Q=async()=>{if(k.value.trim()){P.value=!0;try{await new Promise(s=>setTimeout(s,1e3));const a=U.value.find(s=>s.code.toLowerCase()===k.value.trim().toLowerCase());if(!a){c("Mã khuyến mãi không hợp lệ!","error");return}if(M.value<a.minOrderValue){c(`Đơn hàng tối thiểu ${g(a.minOrderValue)} để áp dụng mã này!`,"warning");return}m.value=a,c(`Áp dụng mã ${a.code} thành công!`,"success")}catch{c("Có lỗi xảy ra khi áp dụng mã khuyến mãi!","error")}finally{P.value=!1}}},z=()=>{m.value=null,k.value="",c("Đã xóa mã khuyến mãi!","info")},Z=a=>{k.value=a,Q()},R=async()=>{if(!G()){c("Vui lòng kiểm tra lại thông tin đơn hàng","error");return}q.value=!0;try{await new Promise(u=>setTimeout(u,2e3));const a={orderCode:h.value,customer:{...n.value},items:b.value,summary:{subtotal:M.value,shippingFee:x.value,couponDiscount:C.value,total:_.value,itemsCount:E.value},coupon:m.value?{code:m.value.code,description:m.value.description,discountType:m.value.discountType,discountValue:C.value}:null,createdAt:new Date().toISOString()},s=JSON.parse(localStorage.getItem("easymart-orders")||"[]");s.push(a),localStorage.setItem("easymart-orders",JSON.stringify(s)),b.value.forEach(u=>{const t=S.value.findIndex(I=>I.productId===u.productId);t!==-1&&S.value.splice(t,1)}),localStorage.setItem("easymart-cart",JSON.stringify(S.value)),localStorage.removeItem("easymart-selected-items"),J(a)}catch{c("Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại!","error")}finally{q.value=!1}},J=a=>{const s=n.value.paymentMethod;switch(localStorage.setItem("easymart-last-order",JSON.stringify(a)),s){case"cod":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Bạn sẽ thanh toán khi nhận hàng.`,"success");break;case"banking":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng chuyển khoản theo thông tin đã cung cấp.`,"success");break;case"qr":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng quét mã QR để thanh toán.`,"success");break;case"momo":c("Đang chuyển đến MoMo để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán MoMo thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"vnpay":c("Đang chuyển đến VNPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán VNPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"zalopay":c("Đang chuyển đến ZaloPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán ZaloPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;default:c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}`,"success")}setTimeout(()=>{D.push({name:"PaymentSuccess",query:{orderCode:h.value,total:_.value,paymentMethod:s}})},3e3)};return Y(()=>{h.value=F();const a=localStorage.getItem("easymart-selected-items");if(a){const s=JSON.parse(a);b.value=S.value.filter(u=>s.includes(u.productId)).map(u=>{const t=H.value.find(I=>I.id===u.productId);return{...u,product:t}}).filter(u=>u.product)}b.value.length===0&&(c("Vui lòng chọn sản phẩm từ giỏ hàng để thanh toán","warning"),D.push("/cart"))}),(a,s)=>{const u=ee("router-link");return d(),i("div",te,[e("div",ne,[e("nav",le,[e("ol",ae,[e("li",oe,[O(u,{to:"/",class:"text-decoration-none"},{default:$(()=>s[12]||(s[12]=[e("i",{class:"fas fa-home"},null,-1),l(" Trang chủ ")])),_:1,__:[12]})]),e("li",ie,[O(u,{to:"/cart",class:"text-decoration-none"},{default:$(()=>s[13]||(s[13]=[e("i",{class:"fas fa-shopping-cart"},null,-1),l(" Giỏ hàng ")])),_:1,__:[13]})]),s[14]||(s[14]=e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("i",{class:"fas fa-credit-card"}),l(" Thanh toán ")],-1))])]),s[65]||(s[65]=e("h2",{class:"mb-4"},[e("i",{class:"fas fa-credit-card text-primary me-2"}),l(" Thanh toán đơn hàng ")],-1)),b.value.length>0?(d(),i("div",de,[e("div",ue,[e("div",re,[s[20]||(s[20]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-truck me-2"}),l(" Thông tin giao hàng ")])],-1)),e("div",ce,[e("form",{onSubmit:se(R,["prevent"])},[e("div",me,[e("div",he,[s[15]||(s[15]=e("label",{for:"fullName",class:"form-label"},"Họ và tên *",-1)),p(e("input",{type:"text",class:N(["form-control",{"is-invalid":r.value.fullName}]),id:"fullName","onUpdate:modelValue":s[0]||(s[0]=t=>n.value.fullName=t),required:""},null,2),[[V,n.value.fullName]]),r.value.fullName?(d(),i("div",ve,o(r.value.fullName),1)):v("",!0)]),e("div",pe,[s[16]||(s[16]=e("label",{for:"phone",class:"form-label"},"Số điện thoại *",-1)),p(e("input",{type:"tel",class:N(["form-control",{"is-invalid":r.value.phone}]),id:"phone","onUpdate:modelValue":s[1]||(s[1]=t=>n.value.phone=t),required:""},null,2),[[V,n.value.phone]]),r.value.phone?(d(),i("div",ge,o(r.value.phone),1)):v("",!0)])]),e("div",fe,[s[17]||(s[17]=e("label",{for:"email",class:"form-label"},"Email",-1)),p(e("input",{type:"email",class:N(["form-control",{"is-invalid":r.value.email}]),id:"email","onUpdate:modelValue":s[2]||(s[2]=t=>n.value.email=t)},null,2),[[V,n.value.email]]),r.value.email?(d(),i("div",ye,o(r.value.email),1)):v("",!0)]),e("div",be,[s[18]||(s[18]=e("label",{for:"address",class:"form-label"},"Địa chỉ giao hàng *",-1)),p(e("textarea",{class:N(["form-control",{"is-invalid":r.value.address}]),id:"address",rows:"3","onUpdate:modelValue":s[3]||(s[3]=t=>n.value.address=t),placeholder:"Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố",required:""},null,2),[[V,n.value.address]]),r.value.address?(d(),i("div",ke,o(r.value.address),1)):v("",!0)]),e("div",xe,[s[19]||(s[19]=e("label",{for:"notes",class:"form-label"},"Ghi chú đơn hàng",-1)),p(e("textarea",{class:"form-control",id:"notes",rows:"2","onUpdate:modelValue":s[4]||(s[4]=t=>n.value.notes=t),placeholder:"Ghi chú về đơn hàng, ví dụ: thời gian hay chỉ dẫn địa điểm giao hàng chi tiết hơn."},null,512),[[V,n.value.notes]])])],32)])]),e("div",_e,[s[48]||(s[48]=e("div",{class:"card-header bg-success text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-money-bill-wave me-2"}),l(" Phương thức thanh toán ")])],-1)),e("div",Me,[e("div",we,[e("div",Ve,[e("div",Te,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"cod",value:"cod","onUpdate:modelValue":s[5]||(s[5]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[21]||(s[21]=e("label",{class:"form-check-label w-100",for:"cod"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-hand-holding-usd text-success me-3 fs-4"}),e("div",null,[e("strong",null,"Thanh toán khi nhận hàng (COD)"),e("div",{class:"text-muted small"},"Thanh toán bằng tiền mặt khi nhận hàng")])])],-1))])]),e("div",Ce,[e("div",Ne,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"banking",value:"banking","onUpdate:modelValue":s[6]||(s[6]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[22]||(s[22]=e("label",{class:"form-check-label w-100",for:"banking"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-university text-primary me-3 fs-4"}),e("div",null,[e("strong",null,"Chuyển khoản ngân hàng"),e("div",{class:"text-muted small"},"Chuyển khoản trước khi giao hàng")])])],-1))])]),e("div",Se,[e("div",qe,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"qr",value:"qr","onUpdate:modelValue":s[7]||(s[7]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[23]||(s[23]=e("label",{class:"form-check-label w-100",for:"qr"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-qrcode text-dark me-3 fs-4"}),e("div",null,[e("strong",null,"Quét mã QR"),e("div",{class:"text-muted small"},"Quét QR để thanh toán nhanh")])])],-1))])]),e("div",Pe,[e("div",Ie,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"momo",value:"momo","onUpdate:modelValue":s[8]||(s[8]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[24]||(s[24]=e("label",{class:"form-check-label w-100",for:"momo"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fab fa-momo text-danger me-3 fs-4"}),e("div",null,[e("strong",null,"Ví MoMo"),e("div",{class:"text-muted small"},"Thanh toán qua ví điện tử MoMo")])])],-1))])]),e("div",Oe,[e("div",$e,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"vnpay",value:"vnpay","onUpdate:modelValue":s[9]||(s[9]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[25]||(s[25]=e("label",{class:"form-check-label w-100",for:"vnpay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-credit-card text-info me-3 fs-4"}),e("div",null,[e("strong",null,"VNPay"),e("div",{class:"text-muted small"},"Thanh toán qua cổng VNPay")])])],-1))])]),e("div",Ue,[e("div",De,[p(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"zalopay",value:"zalopay","onUpdate:modelValue":s[10]||(s[10]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),s[26]||(s[26]=e("label",{class:"form-check-label w-100",for:"zalopay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-mobile-alt text-warning me-3 fs-4"}),e("div",null,[e("strong",null,"ZaloPay"),e("div",{class:"text-muted small"},"Thanh toán qua ví ZaloPay")])])],-1))])])]),n.value.paymentMethod==="banking"?(d(),i("div",Ee,[s[30]||(s[30]=e("h6",{class:"text-primary mb-3"},[e("i",{class:"fas fa-info-circle me-2"}),l(" Thông tin chuyển khoản ")],-1)),e("div",Qe,[s[29]||(s[29]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"Ngân hàng:"),l(" Vietcombank")]),e("p",{class:"mb-2"},[e("strong",null,"Số tài khoản:"),l(" 1234567890")]),e("p",{class:"mb-2"},[e("strong",null,"Chủ tài khoản:"),l(" EASYMART COMPANY")])],-1)),e("div",Re,[e("p",Ae,[s[27]||(s[27]=e("strong",null,"Nội dung:",-1)),l(" THANHTOAN "+o(h.value),1)]),s[28]||(s[28]=e("p",{class:"mb-0 text-danger"},[e("small",null,[e("strong",null,"Lưu ý:"),l(" Vui lòng chuyển khoản đúng nội dung để đơn hàng được xử lý nhanh chóng.")])],-1))])])])):v("",!0),n.value.paymentMethod==="qr"?(d(),i("div",Be,[s[35]||(s[35]=e("h6",{class:"text-dark mb-3"},[e("i",{class:"fas fa-qrcode me-2"}),l(" Quét mã QR để thanh toán ")],-1)),e("div",He,[s[34]||(s[34]=e("div",{class:"col-md-6 text-center"},[e("div",{class:"qr-code-placeholder"},[e("i",{class:"fas fa-qrcode fa-5x text-muted mb-2"}),e("p",{class:"text-muted"},"Mã QR sẽ được tạo sau khi đặt hàng")])],-1)),e("div",je,[e("p",Fe,[s[31]||(s[31]=e("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),e("p",Ge,[s[32]||(s[32]=e("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)]),s[33]||(s[33]=e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"Hướng dẫn:"),l(" Mở app ngân hàng → Quét QR → Xác nhận thanh toán")])],-1))])])])):v("",!0),n.value.paymentMethod==="momo"?(d(),i("div",ze,[s[39]||(s[39]=e("h6",{class:"text-danger mb-3"},[e("i",{class:"fab fa-momo me-2"}),l(" Thanh toán qua ví MoMo ")],-1)),e("div",Ze,[e("div",Je,[e("p",Le,[s[36]||(s[36]=e("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),e("p",Ke,[s[37]||(s[37]=e("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),s[38]||(s[38]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app MoMo để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0),n.value.paymentMethod==="vnpay"?(d(),i("div",Xe,[s[43]||(s[43]=e("h6",{class:"text-info mb-3"},[e("i",{class:"fas fa-credit-card me-2"}),l(" Thanh toán qua VNPay ")],-1)),e("div",Ye,[e("div",We,[e("p",es,[s[40]||(s[40]=e("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),e("p",ss,[s[41]||(s[41]=e("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),s[42]||(s[42]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"Hỗ trợ:"),l(" Thẻ ATM, Internet Banking, Ví điện tử")]),e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến cổng thanh toán VNPay để hoàn tất giao dịch.")])])],-1))])])):v("",!0),n.value.paymentMethod==="zalopay"?(d(),i("div",ts,[s[47]||(s[47]=e("h6",{class:"text-warning mb-3"},[e("i",{class:"fas fa-mobile-alt me-2"}),l(" Thanh toán qua ZaloPay ")],-1)),e("div",ns,[e("div",ls,[e("p",as,[s[44]||(s[44]=e("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),e("p",os,[s[45]||(s[45]=e("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),s[46]||(s[46]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app ZaloPay để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0)])])]),e("div",is,[e("div",ds,[s[60]||(s[60]=e("div",{class:"card-header bg-warning text-dark"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-receipt me-2"}),l(" Đơn hàng của bạn ")])],-1)),e("div",us,[e("div",rs,[(d(!0),i(A,null,B(b.value,t=>(d(),i("div",{key:t.productId,class:"order-item d-flex align-items-center mb-3 pb-3 border-bottom"},[e("img",{src:t.product?.image,alt:t.product?.name,class:"order-item-image me-3"},null,8,cs),e("div",ms,[e("h6",hs,o(t.product?.name),1),e("div",vs,[e("span",ps,o(f(g)(t.product?.price||0))+" x "+o(t.quantity),1),e("span",gs,o(f(g)((t.product?.price||0)*t.quantity)),1)])])]))),128))]),e("div",fs,[e("div",ys,[e("span",null,"Tạm tính ("+o(E.value)+" sản phẩm):",1),e("span",null,o(f(g)(M.value)),1)]),e("div",bs,[s[49]||(s[49]=e("span",null,"Phí vận chuyển:",-1)),e("span",{class:N(x.value===0?"text-success":"")},o(x.value===0?"Miễn phí":f(g)(x.value)),3)]),x.value===0?(d(),i("div",ks,s[50]||(s[50]=[e("i",{class:"fas fa-check-circle me-1"},null,-1),l(" Bạn được miễn phí vận chuyển! ")]))):v("",!0),e("div",xs,[e("div",_s,[p(e("input",{type:"text",class:"form-control form-control-sm",placeholder:"Nhập mã khuyến mãi","onUpdate:modelValue":s[11]||(s[11]=t=>k.value=t),disabled:m.value},null,8,Ms),[[V,k.value]]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:Q,disabled:!k.value.trim()||m.value||P.value},[P.value?(d(),i("span",Vs,s[51]||(s[51]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(d(),i("span",Ts,o(m.value?"Đã áp dụng":"Áp dụng"),1))],8,ws)]),m.value?(d(),i("div",Cs,[e("div",Ns,[e("div",null,[e("small",Ss,[s[52]||(s[52]=e("i",{class:"fas fa-ticket-alt me-1"},null,-1)),l(" "+o(m.value.code),1)]),e("div",qs,o(m.value.description),1)]),e("button",{class:"btn btn-sm",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a5a)",color:"white",border:"none"},onClick:z,title:"Xóa mã khuyến mãi"},s[53]||(s[53]=[e("i",{class:"fas fa-times"},null,-1)]))])])):v("",!0),C.value>0?(d(),i("div",Ps,[e("span",null,"Giảm giá ("+o(m.value?.code)+"):",1),e("span",null,"-"+o(f(g)(C.value)),1)])):v("",!0),!m.value&&U.value.length>0?(d(),i("div",Is,[s[54]||(s[54]=e("small",{class:"text-muted d-block mb-2"},"Mã khuyến mãi có sẵn:",-1)),e("div",Os,[(d(!0),i(A,null,B(U.value,t=>(d(),i("button",{key:t.code,class:"btn btn-sm",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",border:"none"},onClick:I=>Z(t.code),title:t.description},o(t.code),9,$s))),128))])])):v("",!0)]),s[59]||(s[59]=e("hr",null,null,-1)),e("div",Us,[s[55]||(s[55]=e("strong",{class:"fs-5"},"Tổng cộng:",-1)),e("strong",Ds,o(f(g)(_.value)),1)]),e("button",{type:"button",class:"btn btn-primary w-100 mb-2 py-2",onClick:R,disabled:q.value||!j.value},[q.value?(d(),i("span",Qs,s[56]||(s[56]=[e("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),l(" Đang xử lý... ")]))):(d(),i("span",Rs,s[57]||(s[57]=[e("i",{class:"fas fa-check me-2"},null,-1),l(" Đặt hàng ")])))],8,Es),O(u,{to:"/cart",class:"btn btn-outline-secondary w-100"},{default:$(()=>s[58]||(s[58]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[58]})])])])])])):(d(),i("div",As,[e("div",Bs,[e("div",Hs,[s[62]||(s[62]=e("div",{class:"empty-checkout-icon mb-4"},[e("i",{class:"fas fa-exclamation-triangle fa-5x text-warning"})],-1)),s[63]||(s[63]=e("h3",{class:"text-muted mb-3"},"Không có sản phẩm để thanh toán",-1)),s[64]||(s[64]=e("p",{class:"text-muted mb-4"},"Vui lòng quay lại giỏ hàng và chọn sản phẩm để thanh toán",-1)),O(u,{to:"/cart",class:"btn btn-primary btn-lg"},{default:$(()=>s[61]||(s[61]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[61]})])])]))])])}}},Zs=L(js,[["__scopeId","data-v-eba574b3"]]);export{Zs as default};
