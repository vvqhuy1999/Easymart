import{_ as K,u as N,r as v,c as _,y as D,o as M,s as j,z as G,d as l,e as t,f as h,w as g,g as R,h as c,k as E,t as p,j as y,A as F,x,v as I,B as L,F as U,p as W,b as Z,q as r,m as T,P as z}from"./index-r8GnmL0A.js";const H={class:"search-page"},J={class:"container py-5 mt-5"},O={"aria-label":"breadcrumb",class:"mb-4"},X={class:"breadcrumb"},Y={class:"breadcrumb-item"},$={class:"search-header mb-4"},Q={class:"d-flex justify-content-between align-items-center"},tt={key:0,class:"text-muted mb-0"},st={class:"ms-2"},et={class:"search-sort"},at={class:"search-box mb-5"},ot={class:"row justify-content-center"},nt={class:"col-md-8"},lt={class:"input-group"},rt={key:0},it={class:"row g-4"},ct={key:1,class:"no-results text-center py-5"},ut={class:"no-results-content"},dt={class:"text-muted mb-4"},mt={key:2,class:"initial-state text-center py-5"},vt={__name:"Search",setup(ht){const f=Z(),b=j(),{products:q,searchQuery:u,formatPrice:S,addToCart:C,showNotification:w}=N(),n=v(""),a=v(""),d=v("relevance"),m=_(()=>!a.value||a.value.length<2?[]:D(q.value,a.value,["name","description"])),V=_(()=>{const e=[...m.value];switch(d.value){case"name-asc":return e.sort((s,o)=>s.name.localeCompare(o.name));case"name-desc":return e.sort((s,o)=>o.name.localeCompare(s.name));case"price-asc":return e.sort((s,o)=>s.price-o.price);case"price-desc":return e.sort((s,o)=>o.price-s.price);default:return e}}),k=()=>{n.value.trim()&&(a.value=n.value.trim(),u.value=n.value.trim(),f.push({name:"Search",query:{q:a.value}}))},P=e=>{f.push({name:"ProductDetail",params:{id:e}})},A=e=>{w("Đã thêm vào danh sách yêu thích!","success")},B=()=>{};return M(()=>{const e=b.query.q;e&&(a.value=e,n.value=e,u.value=e)}),G(()=>b.query.q,e=>{e&&(a.value=e,n.value=e,u.value=e)}),(e,s)=>{const o=R("router-link");return r(),l("div",H,[t("div",J,[t("nav",O,[t("ol",X,[t("li",Y,[h(o,{to:"/",class:"text-decoration-none"},{default:g(()=>s[2]||(s[2]=[t("i",{class:"fas fa-home"},null,-1),c(" Trang chủ ")])),_:1,__:[2]})]),s[3]||(s[3]=t("li",{class:"breadcrumb-item active","aria-current":"page"},[t("i",{class:"fas fa-search"}),c(" Kết quả tìm kiếm ")],-1))])]),t("div",$,[t("div",Q,[t("div",null,[s[5]||(s[5]=t("h2",{class:"mb-2"},[t("i",{class:"fas fa-search text-primary me-2"}),c(" Kết quả tìm kiếm ")],-1)),a.value?(r(),l("p",tt,[s[4]||(s[4]=c(" Tìm kiếm cho: ")),t("strong",null,'"'+p(a.value)+'"',1),t("span",st,"("+p(m.value.length)+" sản phẩm)",1)])):E("",!0)]),t("div",et,[y(t("select",{"onUpdate:modelValue":s[0]||(s[0]=i=>d.value=i),onChange:B,class:"form-select form-select-sm"},s[6]||(s[6]=[x('<option value="relevance" data-v-4bf1ca89>Liên quan nhất</option><option value="name-asc" data-v-4bf1ca89>Tên A-Z</option><option value="name-desc" data-v-4bf1ca89>Tên Z-A</option><option value="price-asc" data-v-4bf1ca89>Giá thấp - cao</option><option value="price-desc" data-v-4bf1ca89>Giá cao - thấp</option>',5)]),544),[[F,d.value]])])])]),t("div",at,[t("div",ot,[t("div",nt,[t("div",lt,[y(t("input",{type:"text",class:"form-control form-control-lg",placeholder:"Tìm kiếm sản phẩm... (có thể tìm không dấu: 'tim kiem' thay vì 'tìm kiếm')","onUpdate:modelValue":s[1]||(s[1]=i=>n.value=i),onKeyup:L(k,["enter"])},null,544),[[I,n.value]]),t("button",{class:"btn btn-primary btn-lg",type:"button",onClick:k},s[7]||(s[7]=[t("i",{class:"fas fa-search"},null,-1)]))])])])]),m.value.length>0?(r(),l("div",rt,[t("div",it,[(r(!0),l(U,null,W(V.value,i=>(r(),l("div",{key:i.id,class:"col-6 col-md-4 col-lg-3"},[h(z,{product:i,formatPrice:T(S),onAddToCart:T(C),onViewDetail:P,onAddToWishlist:A},null,8,["product","formatPrice","onAddToCart"])]))),128))])])):a.value?(r(),l("div",ct,[t("div",ut,[s[10]||(s[10]=t("i",{class:"fas fa-search fa-4x text-muted mb-4"},null,-1)),s[11]||(s[11]=t("h3",{class:"text-muted mb-3"},"Không tìm thấy kết quả",-1)),t("p",dt,[s[8]||(s[8]=c(" Không tìm thấy sản phẩm nào cho từ khóa ")),t("strong",null,'"'+p(a.value)+'"',1)]),s[12]||(s[12]=t("div",{class:"search-suggestions"},[t("p",{class:"mb-3"},[t("strong",null,"Gợi ý:")]),t("ul",{class:"list-unstyled text-muted"},[t("li",null,"• Kiểm tra chính tả từ khóa"),t("li",null,"• Thử sử dụng từ khóa khác"),t("li",null,"• Sử dụng từ khóa ngắn gọn hơn"),t("li",null,'• Thử tìm kiếm không dấu (ví dụ: "tim kiem" thay vì "tìm kiếm")')])],-1)),h(o,{to:"/",class:"btn btn-primary mt-3"},{default:g(()=>s[9]||(s[9]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),c(" Về trang chủ ")])),_:1,__:[9]})])])):(r(),l("div",mt,s[13]||(s[13]=[x('<div class="initial-content" data-v-4bf1ca89><i class="fas fa-search fa-4x text-muted mb-4" data-v-4bf1ca89></i><h3 class="text-muted mb-3" data-v-4bf1ca89>Tìm kiếm sản phẩm</h3><p class="text-muted mb-4" data-v-4bf1ca89>Nhập từ khóa để tìm kiếm sản phẩm bạn muốn</p><p class="text-muted small" data-v-4bf1ca89><i class="fas fa-info-circle me-1" data-v-4bf1ca89></i> Bạn có thể tìm kiếm có hoặc không dấu. Ví dụ: &quot;tìm kiếm&quot; hoặc &quot;tim kiem&quot; </p></div>',1)])))])])}}},ft=K(vt,[["__scopeId","data-v-4bf1ca89"]]);export{ft as default};
