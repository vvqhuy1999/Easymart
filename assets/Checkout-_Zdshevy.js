import{_ as le,u as ae,p as oe,r as _,q as T,h as ie,m as de,c as d,a as e,i as A,j as U,k as ue,g as a,w as re,d as v,s as f,v as N,f as q,t as i,l as b,x as ce,y as I,F as J,e as Z,A as me,z as he,o as u}from"./index-DxWIzZdx.js";const pe={class:"checkout-page"},ve={class:"container py-5 mt-5"},ge={"aria-label":"breadcrumb",class:"mb-4"},fe={class:"breadcrumb"},ye={class:"breadcrumb-item"},be={class:"breadcrumb-item"},ke={key:0,class:"row"},_e={class:"col-lg-8"},xe={class:"card mb-4"},Me={class:"card-body"},we={class:"row"},Ve={class:"col-md-6 mb-3"},Se={key:0,class:"invalid-feedback"},Ce={class:"col-md-6 mb-3"},Te={key:0,class:"invalid-feedback"},Ne={class:"mb-3"},Ie={key:0,class:"invalid-feedback"},Pe={class:"mb-3"},qe={key:0,class:"invalid-feedback"},De={class:"mb-3"},Oe={key:0,class:"mb-3"},Ae={class:"card mb-4"},Ue={class:"card-body"},He={class:"row"},Fe={class:"col-md-6 mb-3"},$e={class:"form-check payment-method"},Ee={class:"col-md-6 mb-3"},Re={class:"form-check payment-method"},Be={class:"col-md-6 mb-3"},Ge={class:"form-check payment-method"},Qe={class:"col-md-6 mb-3"},je={class:"form-check payment-method"},ze={class:"col-md-6 mb-3"},Le={class:"form-check payment-method"},Je={class:"col-md-6 mb-3"},Ze={class:"form-check payment-method"},Ke={key:0,class:"banking-info mt-3 p-3 bg-light rounded"},Xe={class:"row"},Ye={class:"col-md-6"},We={class:"mb-2"},et={key:1,class:"payment-info mt-3 p-3 bg-light rounded"},tt={class:"row align-items-center"},st={class:"col-md-6"},nt={class:"mb-2"},lt={class:"mb-2"},at={key:2,class:"payment-info mt-3 p-3 bg-light rounded"},ot={class:"row"},it={class:"col-md-6"},dt={class:"mb-2"},ut={class:"mb-2"},rt={key:3,class:"payment-info mt-3 p-3 bg-light rounded"},ct={class:"row"},mt={class:"col-md-6"},ht={class:"mb-2"},pt={class:"mb-2"},vt={key:4,class:"payment-info mt-3 p-3 bg-light rounded"},gt={class:"row"},ft={class:"col-md-6"},yt={class:"mb-2"},bt={class:"mb-2"},kt={class:"col-lg-4"},_t={class:"card sticky-top",style:{top:"100px"}},xt={class:"card-body"},Mt={class:"order-items mb-3"},wt=["src","alt"],Vt={class:"flex-grow-1"},St={class:"mb-1"},Ct={class:"d-flex justify-content-between"},Tt={class:"text-muted"},Nt={class:"fw-bold"},It={class:"order-summary"},Pt={class:"d-flex justify-content-between mb-2"},qt={class:"d-flex justify-content-between mb-2"},Dt={key:0,class:"small text-success mb-2"},Ot={class:"coupon-section mb-3"},At={class:"d-flex gap-2 mb-2"},Ut=["disabled"],Ht=["disabled"],Ft={key:0},$t={key:1},Et={key:0,class:"applied-coupon"},Rt={class:"d-flex justify-content-between align-items-center p-3 rounded-3",style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",border:"1px solid rgba(102, 126, 234, 0.3)"}},Bt={class:"fw-bold",style:{color:"#667eea"}},Gt={class:"small text-muted"},Qt={key:1,class:"d-flex justify-content-between mb-2",style:{color:"#11998e"}},jt={key:2,class:"available-coupons mt-2"},zt={class:"d-flex flex-wrap gap-1"},Lt=["onClick","title"],Jt={class:"d-flex justify-content-between mb-3"},Zt={class:"text-danger fs-5"},Kt=["disabled"],Xt={key:0},Yt={key:1},Wt={key:1,class:"row"},es={class:"col-12"},ts={class:"empty-checkout text-center py-5"},ss={__name:"Checkout",setup(ns){const B=de(),{formatPrice:y,showNotification:h,products:G}=ae(),{cart:Q,clearCart:K}=oe(),{user:g,isAuthenticated:w}=ce(),H=l=>{if(!l)return"/placeholder-image.jpg";const t=he.IMAGES.PRODUCT_IMAGES(l);return t[0]?`${me.BASE_URL}${t[0]}`:"/placeholder-image.jpg"},j=()=>{console.log("üîê Checking auth status..."),console.log("   - isAuthenticated:",w),console.log("   - user:",g),console.log("   - orderForm:",n),w&&typeof w.value<"u"?console.log("‚úÖ isAuthenticated is properly initialized"):console.log("‚ùå isAuthenticated is not properly initialized"),g&&typeof g.value<"u"?console.log("‚úÖ user is properly initialized"):console.log("‚ùå user is not properly initialized")},F=()=>{try{if(!w||!w.value){console.log("‚ö†Ô∏è User ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c isAuthenticated undefined"),$();return}if(!g||!g.value){console.log("‚ö†Ô∏è User object ch∆∞a s·∫µn s√†ng ho·∫∑c user undefined"),$();return}if(console.log("üë§ Pre-filling user info:",g.value),g.value.name&&(n.value.fullName=g.value.name),g.value.email&&(n.value.email=g.value.email),g.value.khachHang){const l=g.value.khachHang;l.hoTen&&(n.value.fullName=l.hoTen),l.sdt&&(n.value.phone=l.sdt),l.diaChi&&(n.value.address=l.diaChi),l.nguoiDung?.email&&(n.value.email=l.nguoiDung.email)}console.log("‚úÖ Form ƒë√£ ƒë∆∞·ª£c pre-fill:",n.value)}catch(l){console.error("‚ùå L·ªói khi pre-fill user info:",l),console.log("üîç Debug info:",{isAuthenticated:w,user:g,orderForm:n}),$()}},$=()=>{try{console.log("üîÑ Trying fallback: getting user info from localStorage...");const l=localStorage.getItem("easymart-user"),t=localStorage.getItem("easymart-auth");if(l){const o=JSON.parse(l);console.log("üì¶ Found user data in localStorage:",o),o.name&&(n.value.fullName=o.name),o.email&&(n.value.email=o.email),console.log("‚úÖ Fallback pre-fill successful")}else console.log("‚ö†Ô∏è No user data found in localStorage")}catch(l){console.error("‚ùå Fallback also failed:",l)}},D=_(!1),p=_(""),m=_({}),V=_(""),c=_(null),O=_(!1),E=_([{code:"WELCOME10",description:"Gi·∫£m 10% cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n",discountType:"percentage",discountValue:10,minOrderValue:1e5,maxDiscount:5e4},{code:"FREESHIP",description:"Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn",discountType:"shipping",discountValue:0,minOrderValue:0,maxDiscount:3e4},{code:"SAVE50K",description:"Gi·∫£m 50.000ƒë cho ƒë∆°n t·ª´ 500.000ƒë",discountType:"fixed",discountValue:5e4,minOrderValue:5e5,maxDiscount:5e4},{code:"VIP20",description:"Gi·∫£m 20% cho kh√°ch VIP (t·ªëi ƒëa 100k)",discountType:"percentage",discountValue:20,minOrderValue:2e5,maxDiscount:1e5}]),n=_({fullName:"",phone:"",email:"",address:"",notes:"",paymentMethod:"cod"}),k=_([]),S=T(()=>k.value.reduce((l,t)=>l+(t.product?.price||0)*t.quantity,0)),x=T(()=>c.value?.discountType==="shipping"||S.value>=2e5?0:3e4),C=T(()=>{if(!c.value)return 0;const l=c.value,t=S.value;if(t<l.minOrderValue)return 0;let o=0;switch(l.discountType){case"percentage":o=t*l.discountValue/100;break;case"fixed":o=l.discountValue;break;case"shipping":o=x.value;break;default:o=0}return Math.min(o,l.maxDiscount)}),M=T(()=>S.value+x.value-C.value),R=T(()=>k.value.reduce((l,t)=>l+t.quantity,0)),X=T(()=>n.value.fullName&&n.value.phone&&n.value.address&&n.value.paymentMethod),Y=()=>{const l=Date.now().toString().slice(-6),t=Math.random().toString(36).substr(2,4).toUpperCase();return`EM${l}${t}`},W=()=>(m.value={},n.value.fullName.trim()||(m.value.fullName="Vui l√≤ng nh·∫≠p h·ªç v√† t√™n"),n.value.phone.trim()?/^[0-9]{10,11}$/.test(n.value.phone.replace(/\s/g,""))||(m.value.phone="S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá"):m.value.phone="Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i",n.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)&&(m.value.email="Email kh√¥ng h·ª£p l·ªá"),n.value.address.trim()||(m.value.address="Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng"),Object.keys(m.value).length===0),z=async()=>{if(V.value.trim()){O.value=!0;try{await new Promise(t=>setTimeout(t,1e3));const l=E.value.find(t=>t.code.toLowerCase()===V.value.trim().toLowerCase());if(!l){h("M√£ khuy·∫øn m√£i kh√¥ng h·ª£p l·ªá!","error");return}if(S.value<l.minOrderValue){h(`ƒê∆°n h√†ng t·ªëi thi·ªÉu ${y(l.minOrderValue)} ƒë·ªÉ √°p d·ª•ng m√£ n√†y!`,"warning");return}c.value=l,h(`√Åp d·ª•ng m√£ ${l.code} th√†nh c√¥ng!`,"success")}catch{h("C√≥ l·ªói x·∫£y ra khi √°p d·ª•ng m√£ khuy·∫øn m√£i!","error")}finally{O.value=!1}}},ee=()=>{c.value=null,V.value="",h("ƒê√£ x√≥a m√£ khuy·∫øn m√£i!","info")},te=l=>{V.value=l,z()},L=async()=>{if(!W()){h("Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin ƒë∆°n h√†ng","error");return}D.value=!0;try{const l=localStorage.getItem("easymart-invoice");let t;if(l){const s=JSON.parse(l);console.log("üìã C·∫≠p nh·∫≠t th√¥ng tin giao h√†ng cho h√≥a ƒë∆°n:",s.maHD),await new Promise(r=>setTimeout(r,1e3)),t={orderCode:`HD${s.maHD}`,invoiceId:s.maHD,customer:{...n.value},items:k.value,summary:{subtotal:S.value,shippingFee:x.value,couponDiscount:C.value,total:M.value,itemsCount:R.value},coupon:c.value?{code:c.value.code,description:c.value.description,discountType:c.value.discountType,discountValue:C.value}:null,createdAt:s.ngayLap||new Date().toISOString()}}else console.log("‚ö†Ô∏è Kh√¥ng c√≥ h√≥a ƒë∆°n, t·∫°o ƒë∆°n h√†ng m·ªõi"),await new Promise(s=>setTimeout(s,2e3)),t={orderCode:p.value,customer:{...n.value},items:k.value,summary:{subtotal:S.value,shippingFee:x.value,couponDiscount:C.value,total:M.value,itemsCount:R.value},coupon:c.value?{code:c.value.code,description:c.value.description,discountType:c.value.discountType,discountValue:C.value}:null,createdAt:new Date().toISOString()};const o=JSON.parse(localStorage.getItem("easymart-orders")||"[]");o.push(t),localStorage.setItem("easymart-orders",JSON.stringify(o)),console.log("üßπ Clearing cart after successful checkout...");try{await K(),console.log("‚úÖ Backend cart cleared successfully")}catch(s){console.warn("‚ö†Ô∏è Failed to clear backend cart:",s)}localStorage.removeItem("easymart-selected-items"),console.log("üßπ localStorage cleared"),se(t)}catch{h("C√≥ l·ªói x·∫£y ra khi ƒë·∫∑t h√†ng. Vui l√≤ng th·ª≠ l·∫°i!","error")}finally{D.value=!1}},se=l=>{const t=n.value.paymentMethod;switch(localStorage.setItem("easymart-last-order",JSON.stringify(l)),t){case"cod":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}. B·∫°n s·∫Ω thanh to√°n khi nh·∫≠n h√†ng.`,"success");break;case"banking":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}. Vui l√≤ng chuy·ªÉn kho·∫£n theo th√¥ng tin ƒë√£ cung c·∫•p.`,"success");break;case"qr":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}. Vui l√≤ng qu√©t m√£ QR ƒë·ªÉ thanh to√°n.`,"success");break;case"momo":h("ƒêang chuy·ªÉn ƒë·∫øn MoMo ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n MoMo th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}`,"success")},1500);break;case"vnpay":h("ƒêang chuy·ªÉn ƒë·∫øn VNPay ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n VNPay th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}`,"success")},1500);break;case"zalopay":h("ƒêang chuy·ªÉn ƒë·∫øn ZaloPay ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n ZaloPay th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}`,"success")},1500);break;default:h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${p.value}`,"success")}setTimeout(()=>{B.push({name:"PaymentSuccess",query:{orderCode:p.value,total:M.value,paymentMethod:t}})},3e3)};return ie(()=>{const l=localStorage.getItem("easymart-invoice"),t=localStorage.getItem("easymart-selected-items");if(l&&t){const o=JSON.parse(l),s=JSON.parse(t);console.log("üìã Nh·∫≠n h√≥a ƒë∆°n t·ª´ Cart.vue:",o),console.log("üõí Selected items:",s),p.value=`HD${o.maHD}`,o.items&&o.items.length>0?k.value=o.items.map(r=>({productId:r.maSP,quantity:r.soLuong,product:{id:r.maSP,name:r.tenSP,price:r.donGiaBan||r.donGia,image:H(r.maSP)}})):k.value=Q.value.filter(r=>s.includes(r.productId)).map(r=>{const P=G.value.find(ne=>ne.id===r.productId);return P&&(P.image=H(r.productId)),{...r,product:P}}).filter(r=>r.product),o.maKH&&console.log("üë§ S·ª≠ d·ª•ng th√¥ng tin kh√°ch h√†ng t·ª´ h√≥a ƒë∆°n:",o.maKH),j(),F()}else{if(p.value=Y(),t){const o=JSON.parse(t);k.value=Q.value.filter(s=>o.includes(s.productId)).map(s=>{const r=G.value.find(P=>P.id===s.productId);return r&&(r.image=H(s.productId)),{...s,product:r}}).filter(s=>s.product)}j(),F()}k.value.length===0&&(h("Vui l√≤ng ch·ªçn s·∫£n ph·∫©m t·ª´ gi·ªè h√†ng ƒë·ªÉ thanh to√°n","warning"),B.push("/cart"))}),(l,t)=>{const o=ue("router-link");return u(),d("div",pe,[e("div",ve,[e("nav",ge,[e("ol",fe,[e("li",ye,[A(o,{to:"/",class:"text-decoration-none"},{default:U(()=>t[12]||(t[12]=[e("i",{class:"fas fa-home"},null,-1),a(" Trang ch·ªß ")])),_:1,__:[12]})]),e("li",be,[A(o,{to:"/cart",class:"text-decoration-none"},{default:U(()=>t[13]||(t[13]=[e("i",{class:"fas fa-shopping-cart"},null,-1),a(" Gi·ªè h√†ng ")])),_:1,__:[13]})]),t[14]||(t[14]=e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("i",{class:"fas fa-credit-card"}),a(" Thanh to√°n ")],-1))])]),t[66]||(t[66]=e("h2",{class:"mb-4"},[e("i",{class:"fas fa-credit-card text-primary me-2"}),a(" Thanh to√°n ƒë∆°n h√†ng ")],-1)),k.value.length>0?(u(),d("div",ke,[e("div",_e,[e("div",xe,[t[21]||(t[21]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-truck me-2"}),a(" Th√¥ng tin giao h√†ng ")])],-1)),e("div",Me,[e("form",{onSubmit:re(L,["prevent"])},[e("div",we,[e("div",Ve,[t[15]||(t[15]=e("label",{for:"fullName",class:"form-label"},"H·ªç v√† t√™n *",-1)),f(e("input",{type:"text",class:q(["form-control",{"is-invalid":m.value.fullName}]),id:"fullName","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.fullName=s),required:""},null,2),[[N,n.value.fullName]]),m.value.fullName?(u(),d("div",Se,i(m.value.fullName),1)):v("",!0)]),e("div",Ce,[t[16]||(t[16]=e("label",{for:"phone",class:"form-label"},"S·ªë ƒëi·ªán tho·∫°i *",-1)),f(e("input",{type:"tel",class:q(["form-control",{"is-invalid":m.value.phone}]),id:"phone","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.phone=s),required:""},null,2),[[N,n.value.phone]]),m.value.phone?(u(),d("div",Te,i(m.value.phone),1)):v("",!0)])]),e("div",Ne,[t[17]||(t[17]=e("label",{for:"email",class:"form-label"},"Email",-1)),f(e("input",{type:"email",class:q(["form-control",{"is-invalid":m.value.email}]),id:"email","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.email=s)},null,2),[[N,n.value.email]]),m.value.email?(u(),d("div",Ie,i(m.value.email),1)):v("",!0)]),e("div",Pe,[t[18]||(t[18]=e("label",{for:"address",class:"form-label"},"ƒê·ªãa ch·ªâ giao h√†ng *",-1)),f(e("textarea",{class:q(["form-control",{"is-invalid":m.value.address}]),id:"address",rows:"3","onUpdate:modelValue":t[3]||(t[3]=s=>n.value.address=s),placeholder:"S·ªë nh√†, t√™n ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, t·ªânh/th√†nh ph·ªë",required:""},null,2),[[N,n.value.address]]),m.value.address?(u(),d("div",qe,i(m.value.address),1)):v("",!0)]),e("div",De,[t[19]||(t[19]=e("label",{for:"notes",class:"form-label"},"Ghi ch√∫ ƒë∆°n h√†ng",-1)),f(e("textarea",{class:"form-control",id:"notes",rows:"2","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.notes=s),placeholder:"Ghi ch√∫ v·ªÅ ƒë∆°n h√†ng, v√≠ d·ª•: th·ªùi gian hay ch·ªâ d·∫´n ƒë·ªãa ƒëi·ªÉm giao h√†ng chi ti·∫øt h∆°n."},null,512),[[N,n.value.notes]])]),b(w)?(u(),d("div",Oe,[e("button",{type:"button",class:"btn btn-outline-info btn-sm",onClick:F,title:"C·∫≠p nh·∫≠t th√¥ng tin t·ª´ profile"},t[20]||(t[20]=[e("i",{class:"fas fa-sync-alt me-2"},null,-1),a(" C·∫≠p nh·∫≠t th√¥ng tin t·ª´ profile ")]))])):v("",!0)],32)])]),e("div",Ae,[t[49]||(t[49]=e("div",{class:"card-header bg-success text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-money-bill-wave me-2"}),a(" Ph∆∞∆°ng th·ª©c thanh to√°n ")])],-1)),e("div",Ue,[e("div",He,[e("div",Fe,[e("div",$e,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"cod",value:"cod","onUpdate:modelValue":t[5]||(t[5]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[22]||(t[22]=e("label",{class:"form-check-label w-100",for:"cod"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-hand-holding-usd text-success me-3 fs-4"}),e("div",null,[e("strong",null,"Thanh to√°n khi nh·∫≠n h√†ng (COD)"),e("div",{class:"text-muted small"},"Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi nh·∫≠n h√†ng")])])],-1))])]),e("div",Ee,[e("div",Re,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"banking",value:"banking","onUpdate:modelValue":t[6]||(t[6]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[23]||(t[23]=e("label",{class:"form-check-label w-100",for:"banking"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-university text-primary me-3 fs-4"}),e("div",null,[e("strong",null,"Chuy·ªÉn kho·∫£n ng√¢n h√†ng"),e("div",{class:"text-muted small"},"Chuy·ªÉn kho·∫£n tr∆∞·ªõc khi giao h√†ng")])])],-1))])]),e("div",Be,[e("div",Ge,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"qr",value:"qr","onUpdate:modelValue":t[7]||(t[7]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[24]||(t[24]=e("label",{class:"form-check-label w-100",for:"qr"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-qrcode text-dark me-3 fs-4"}),e("div",null,[e("strong",null,"Qu√©t m√£ QR"),e("div",{class:"text-muted small"},"Qu√©t QR ƒë·ªÉ thanh to√°n nhanh")])])],-1))])]),e("div",Qe,[e("div",je,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"momo",value:"momo","onUpdate:modelValue":t[8]||(t[8]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[25]||(t[25]=e("label",{class:"form-check-label w-100",for:"momo"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fab fa-momo text-danger me-3 fs-4"}),e("div",null,[e("strong",null,"V√≠ MoMo"),e("div",{class:"text-muted small"},"Thanh to√°n qua v√≠ ƒëi·ªán t·ª≠ MoMo")])])],-1))])]),e("div",ze,[e("div",Le,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"vnpay",value:"vnpay","onUpdate:modelValue":t[9]||(t[9]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[26]||(t[26]=e("label",{class:"form-check-label w-100",for:"vnpay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-credit-card text-info me-3 fs-4"}),e("div",null,[e("strong",null,"VNPay"),e("div",{class:"text-muted small"},"Thanh to√°n qua c·ªïng VNPay")])])],-1))])]),e("div",Je,[e("div",Ze,[f(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"zalopay",value:"zalopay","onUpdate:modelValue":t[10]||(t[10]=s=>n.value.paymentMethod=s)},null,512),[[I,n.value.paymentMethod]]),t[27]||(t[27]=e("label",{class:"form-check-label w-100",for:"zalopay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-mobile-alt text-warning me-3 fs-4"}),e("div",null,[e("strong",null,"ZaloPay"),e("div",{class:"text-muted small"},"Thanh to√°n qua v√≠ ZaloPay")])])],-1))])])]),n.value.paymentMethod==="banking"?(u(),d("div",Ke,[t[31]||(t[31]=e("h6",{class:"text-primary mb-3"},[e("i",{class:"fas fa-info-circle me-2"}),a(" Th√¥ng tin chuy·ªÉn kho·∫£n ")],-1)),e("div",Xe,[t[30]||(t[30]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"Ng√¢n h√†ng:"),a(" Vietcombank")]),e("p",{class:"mb-2"},[e("strong",null,"S·ªë t√†i kho·∫£n:"),a(" 1234567890")]),e("p",{class:"mb-2"},[e("strong",null,"Ch·ªß t√†i kho·∫£n:"),a(" EASYMART COMPANY")])],-1)),e("div",Ye,[e("p",We,[t[28]||(t[28]=e("strong",null,"N·ªôi dung:",-1)),a(" THANHTOAN "+i(p.value),1)]),t[29]||(t[29]=e("p",{class:"mb-0 text-danger"},[e("small",null,[e("strong",null,"L∆∞u √Ω:"),a(" Vui l√≤ng chuy·ªÉn kho·∫£n ƒë√∫ng n·ªôi dung ƒë·ªÉ ƒë∆°n h√†ng ƒë∆∞·ª£c x·ª≠ l√Ω nhanh ch√≥ng.")])],-1))])])])):v("",!0),n.value.paymentMethod==="qr"?(u(),d("div",et,[t[36]||(t[36]=e("h6",{class:"text-dark mb-3"},[e("i",{class:"fas fa-qrcode me-2"}),a(" Qu√©t m√£ QR ƒë·ªÉ thanh to√°n ")],-1)),e("div",tt,[t[35]||(t[35]=e("div",{class:"col-md-6 text-center"},[e("div",{class:"qr-code-placeholder"},[e("i",{class:"fas fa-qrcode fa-5x text-muted mb-2"}),e("p",{class:"text-muted"},"M√£ QR s·∫Ω ƒë∆∞·ª£c t·∫°o sau khi ƒë·∫∑t h√†ng")])],-1)),e("div",st,[e("p",nt,[t[32]||(t[32]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+i(b(y)(M.value)),1)]),e("p",lt,[t[33]||(t[33]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+i(p.value),1)]),t[34]||(t[34]=e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" M·ªü app ng√¢n h√†ng ‚Üí Qu√©t QR ‚Üí X√°c nh·∫≠n thanh to√°n")])],-1))])])])):v("",!0),n.value.paymentMethod==="momo"?(u(),d("div",at,[t[40]||(t[40]=e("h6",{class:"text-danger mb-3"},[e("i",{class:"fab fa-momo me-2"}),a(" Thanh to√°n qua v√≠ MoMo ")],-1)),e("div",ot,[e("div",it,[e("p",dt,[t[37]||(t[37]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+i(b(y)(M.value)),1)]),e("p",ut,[t[38]||(t[38]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+i(p.value),1)])]),t[39]||(t[39]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn app MoMo ƒë·ªÉ ho√†n t·∫•t thanh to√°n sau khi ƒë·∫∑t h√†ng.")])])],-1))])])):v("",!0),n.value.paymentMethod==="vnpay"?(u(),d("div",rt,[t[44]||(t[44]=e("h6",{class:"text-info mb-3"},[e("i",{class:"fas fa-credit-card me-2"}),a(" Thanh to√°n qua VNPay ")],-1)),e("div",ct,[e("div",mt,[e("p",ht,[t[41]||(t[41]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+i(b(y)(M.value)),1)]),e("p",pt,[t[42]||(t[42]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+i(p.value),1)])]),t[43]||(t[43]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"H·ªó tr·ª£:"),a(" Th·∫ª ATM, Internet Banking, V√≠ ƒëi·ªán t·ª≠")]),e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn c·ªïng thanh to√°n VNPay ƒë·ªÉ ho√†n t·∫•t giao d·ªãch.")])])],-1))])])):v("",!0),n.value.paymentMethod==="zalopay"?(u(),d("div",vt,[t[48]||(t[48]=e("h6",{class:"text-warning mb-3"},[e("i",{class:"fas fa-mobile-alt me-2"}),a(" Thanh to√°n qua ZaloPay ")],-1)),e("div",gt,[e("div",ft,[e("p",yt,[t[45]||(t[45]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+i(b(y)(M.value)),1)]),e("p",bt,[t[46]||(t[46]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+i(p.value),1)])]),t[47]||(t[47]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn app ZaloPay ƒë·ªÉ ho√†n t·∫•t thanh to√°n sau khi ƒë·∫∑t h√†ng.")])])],-1))])])):v("",!0)])])]),e("div",kt,[e("div",_t,[t[61]||(t[61]=e("div",{class:"card-header bg-warning text-dark"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-receipt me-2"}),a(" ƒê∆°n h√†ng c·ªßa b·∫°n ")])],-1)),e("div",xt,[e("div",Mt,[(u(!0),d(J,null,Z(k.value,s=>(u(),d("div",{key:s.productId,class:"order-item d-flex align-items-center mb-3 pb-3 border-bottom"},[e("img",{src:s.product?.image,alt:s.product?.name,class:"order-item-image me-3"},null,8,wt),e("div",Vt,[e("h6",St,i(s.product?.name),1),e("div",Ct,[e("span",Tt,i(b(y)(s.product?.price||0))+" x "+i(s.quantity),1),e("span",Nt,i(b(y)((s.product?.price||0)*s.quantity)),1)])])]))),128))]),e("div",It,[e("div",Pt,[e("span",null,"T·∫°m t√≠nh ("+i(R.value)+" s·∫£n ph·∫©m):",1),e("span",null,i(b(y)(S.value)),1)]),e("div",qt,[t[50]||(t[50]=e("span",null,"Ph√≠ v·∫≠n chuy·ªÉn:",-1)),e("span",{class:q(x.value===0?"text-success":"")},i(x.value===0?"Mi·ªÖn ph√≠":b(y)(x.value)),3)]),x.value===0?(u(),d("div",Dt,t[51]||(t[51]=[e("i",{class:"fas fa-check-circle me-1"},null,-1),a(" B·∫°n ƒë∆∞·ª£c mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn! ")]))):v("",!0),e("div",Ot,[e("div",At,[f(e("input",{type:"text",class:"form-control form-control-sm",placeholder:"Nh·∫≠p m√£ khuy·∫øn m√£i","onUpdate:modelValue":t[11]||(t[11]=s=>V.value=s),disabled:c.value},null,8,Ut),[[N,V.value]]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:z,disabled:!V.value.trim()||c.value||O.value},[O.value?(u(),d("span",Ft,t[52]||(t[52]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(u(),d("span",$t,i(c.value?"ƒê√£ √°p d·ª•ng":"√Åp d·ª•ng"),1))],8,Ht)]),c.value?(u(),d("div",Et,[e("div",Rt,[e("div",null,[e("small",Bt,[t[53]||(t[53]=e("i",{class:"fas fa-ticket-alt me-1"},null,-1)),a(" "+i(c.value.code),1)]),e("div",Gt,i(c.value.description),1)]),e("button",{class:"btn btn-sm",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a5a)",color:"white",border:"none"},onClick:ee,title:"X√≥a m√£ khuy·∫øn m√£i"},t[54]||(t[54]=[e("i",{class:"fas fa-times"},null,-1)]))])])):v("",!0),C.value>0?(u(),d("div",Qt,[e("span",null,"Gi·∫£m gi√° ("+i(c.value?.code)+"):",1),e("span",null,"-"+i(b(y)(C.value)),1)])):v("",!0),!c.value&&E.value.length>0?(u(),d("div",jt,[t[55]||(t[55]=e("small",{class:"text-muted d-block mb-2"},"M√£ khuy·∫øn m√£i c√≥ s·∫µn:",-1)),e("div",zt,[(u(!0),d(J,null,Z(E.value,s=>(u(),d("button",{key:s.code,class:"btn btn-sm",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",border:"none"},onClick:r=>te(s.code),title:s.description},i(s.code),9,Lt))),128))])])):v("",!0)]),t[60]||(t[60]=e("hr",null,null,-1)),e("div",Jt,[t[56]||(t[56]=e("strong",{class:"fs-5"},"T·ªïng c·ªông:",-1)),e("strong",Zt,i(b(y)(M.value)),1)]),e("button",{type:"button",class:"btn btn-primary w-100 mb-2 py-2",onClick:L,disabled:D.value||!X.value},[D.value?(u(),d("span",Xt,t[57]||(t[57]=[e("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),a(" ƒêang x·ª≠ l√Ω... ")]))):(u(),d("span",Yt,t[58]||(t[58]=[e("i",{class:"fas fa-check me-2"},null,-1),a(" ƒê·∫∑t h√†ng ")])))],8,Kt),A(o,{to:"/cart",class:"btn btn-outline-secondary w-100"},{default:U(()=>t[59]||(t[59]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),a(" Quay l·∫°i gi·ªè h√†ng ")])),_:1,__:[59]})])])])])])):(u(),d("div",Wt,[e("div",es,[e("div",ts,[t[63]||(t[63]=e("div",{class:"empty-checkout-icon mb-4"},[e("i",{class:"fas fa-exclamation-triangle fa-5x text-warning"})],-1)),t[64]||(t[64]=e("h3",{class:"text-muted mb-3"},"Kh√¥ng c√≥ s·∫£n ph·∫©m ƒë·ªÉ thanh to√°n",-1)),t[65]||(t[65]=e("p",{class:"text-muted mb-4"},"Vui l√≤ng quay l·∫°i gi·ªè h√†ng v√† ch·ªçn s·∫£n ph·∫©m ƒë·ªÉ thanh to√°n",-1)),A(o,{to:"/cart",class:"btn btn-primary btn-lg"},{default:U(()=>t[62]||(t[62]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),a(" Quay l·∫°i gi·ªè h√†ng ")])),_:1,__:[62]})])])]))])])}}},as=le(ss,[["__scopeId","data-v-41168cf5"]]);export{as as default};
