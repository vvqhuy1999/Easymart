import{_ as ae,u as ie,p as de,r as x,q as C,h as ue,m as re,c as u,a as e,d as v,i as E,j as F,k as ce,g as a,t as d,w as me,s as y,v as P,f as N,l as k,x as he,y as D,F as K,e as W,A as ge,z as ve,o as r}from"./index-DEhEH2nC.js";const pe={class:"checkout-page"},fe={class:"container py-5 mt-5"},ye={"aria-label":"breadcrumb",class:"mb-4"},be={class:"breadcrumb"},ke={class:"breadcrumb-item"},_e={key:0,class:"breadcrumb-item"},xe={key:1,class:"breadcrumb-item"},Me={class:"d-flex justify-content-between align-items-center mb-4"},we={class:"mb-0"},Se={key:0,class:"row"},Ie={class:"col-lg-8"},Ve={class:"card mb-4"},Te={class:"card-body"},Ce={class:"row"},Ne={class:"col-md-6 mb-3"},Pe={key:0,class:"invalid-feedback"},De={class:"col-md-6 mb-3"},qe={key:0,class:"invalid-feedback"},Oe={class:"mb-3"},He={key:0,class:"invalid-feedback"},Ue={class:"mb-3"},Ee={key:0,class:"invalid-feedback"},Fe={class:"mb-3"},Le={key:0,class:"mb-3"},Ae={class:"card mb-4"},$e={class:"card-body"},je={class:"row"},Ge={class:"col-md-6 mb-3"},Be={class:"form-check payment-method"},Re={class:"col-md-6 mb-3"},Qe={class:"form-check payment-method"},ze={class:"col-md-6 mb-3"},Je={class:"form-check payment-method"},Ze={class:"col-md-6 mb-3"},Ke={class:"form-check payment-method"},We={class:"col-md-6 mb-3"},Xe={class:"form-check payment-method"},Ye={class:"col-md-6 mb-3"},et={class:"form-check payment-method"},tt={key:0,class:"banking-info mt-3 p-3 bg-light rounded"},st={class:"row"},nt={class:"col-md-6"},lt={class:"mb-2"},ot={key:1,class:"payment-info mt-3 p-3 bg-light rounded"},at={class:"row align-items-center"},it={class:"col-md-6"},dt={class:"mb-2"},ut={class:"mb-2"},rt={key:2,class:"payment-info mt-3 p-3 bg-light rounded"},ct={class:"row"},mt={class:"col-md-6"},ht={class:"mb-2"},gt={class:"mb-2"},vt={key:3,class:"payment-info mt-3 p-3 bg-light rounded"},pt={class:"row"},ft={class:"col-md-6"},yt={class:"mb-2"},bt={class:"mb-2"},kt={key:4,class:"payment-info mt-3 p-3 bg-light rounded"},_t={class:"row"},xt={class:"col-md-6"},Mt={class:"mb-2"},wt={class:"mb-2"},St={class:"col-lg-4"},It={class:"card sticky-top",style:{top:"100px"}},Vt={class:"card-body"},Tt={class:"order-items mb-3"},Ct=["src","alt"],Nt={class:"flex-grow-1"},Pt={class:"mb-1"},Dt={class:"d-flex justify-content-between"},qt={class:"text-muted"},Ot={class:"fw-bold"},Ht={class:"order-summary"},Ut={class:"d-flex justify-content-between mb-2"},Et={class:"d-flex justify-content-between mb-2"},Ft={key:0,class:"small text-success mb-2"},Lt={class:"coupon-section mb-3"},At={class:"d-flex gap-2 mb-2"},$t=["disabled"],jt=["disabled"],Gt={key:0},Bt={key:1},Rt={key:0,class:"applied-coupon"},Qt={class:"d-flex justify-content-between align-items-center p-3 rounded-3",style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",border:"1px solid rgba(102, 126, 234, 0.3)"}},zt={class:"fw-bold",style:{color:"#667eea"}},Jt={class:"small text-muted"},Zt={key:1,class:"d-flex justify-content-between mb-2",style:{color:"#11998e"}},Kt={key:2,class:"available-coupons mt-2"},Wt={class:"d-flex flex-wrap gap-1"},Xt=["onClick","title"],Yt={class:"d-flex justify-content-between mb-3"},es={class:"text-danger fs-5"},ts=["disabled"],ss={key:0},ns={key:1},ls={key:1,class:"row"},os={class:"col-12"},as={class:"empty-checkout text-center py-5"},is={class:"text-muted mb-4"},ds={__name:"Checkout",setup(us){const G=re(),{formatPrice:b,showNotification:h,products:B}=ie(),{cart:R,clearCart:X}=de(),{user:f,isLoggedIn:S}=he(),Q=()=>{console.log("üîç Debug LocalStorage Data:"),console.log("   - easymart-invoice:",localStorage.getItem("easymart-invoice")),console.log("   - easymart-selected-items:",localStorage.getItem("easymart-selected-items")),console.log("   - easymart-cart:",localStorage.getItem("easymart-cart"));try{const s=JSON.parse(localStorage.getItem("easymart-invoice")||"null");s&&(console.log("   - Invoice parsed:",s),console.log("   - Invoice keys:",Object.keys(s)),console.log("   - chiTietHoaDon:",s.chiTietHoaDon),console.log("   - items:",s.items))}catch(s){console.error("   - Error parsing invoice:",s)}},O=s=>{if(!s)return"/placeholder-image.jpg";const t=ve.IMAGES.PRODUCT_IMAGES(s);return t[0]?`${ge.BASE_URL}${t[0]}`:"/placeholder-image.jpg"},z=()=>{console.log("üîê Checking auth status..."),console.log("   - isLoggedIn:",S),console.log("   - user:",f),console.log("   - orderForm:",n),S&&typeof S.value<"u"?console.log("‚úÖ isLoggedIn is properly initialized"):console.log("‚ùå isLoggedIn is not properly initialized"),f&&typeof f.value<"u"?console.log("‚úÖ user is properly initialized"):console.log("‚ùå user is not properly initialized")},L=()=>{try{if(!S||!S.value){console.log("‚ö†Ô∏è User ch∆∞a ƒëƒÉng nh·∫≠p ho·∫∑c isLoggedIn undefined"),A();return}if(!f||!f.value){console.log("‚ö†Ô∏è User object ch∆∞a s·∫µn s√†ng ho·∫∑c user undefined"),A();return}if(console.log("üë§ Pre-filling user info:",f.value),f.value.name&&(n.value.fullName=f.value.name),f.value.email&&(n.value.email=f.value.email),f.value.khachHang){const s=f.value.khachHang;s.hoTen&&(n.value.fullName=s.hoTen),s.sdt&&(n.value.phone=s.sdt),s.diaChi&&(n.value.address=s.diaChi),s.nguoiDung?.email&&(n.value.email=s.nguoiDung.email)}console.log("‚úÖ Form ƒë√£ ƒë∆∞·ª£c pre-fill:",n.value)}catch(s){console.error("‚ùå L·ªói khi pre-fill user info:",s),console.log("üîç Debug info:",{isLoggedIn:S,user:f,orderForm:n}),A()}},A=()=>{try{console.log("üîÑ Trying fallback: getting user info from localStorage...");const s=localStorage.getItem("easymart-user");if(s){const t=JSON.parse(s);console.log("üì¶ Found user data in localStorage:",t),t.name&&(n.value.fullName=t.name),t.email&&(n.value.email=t.email),console.log("‚úÖ Fallback pre-fill successful")}else console.log("‚ö†Ô∏è No user data found in localStorage")}catch(s){console.error("‚ùå Fallback also failed:",s)}},H=x(!1),g=x(""),m=x({}),I=x(""),c=x(null),U=x(!1),$=x([{code:"WELCOME10",description:"Gi·∫£m 10% cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n",discountType:"percentage",discountValue:10,minOrderValue:1e5,maxDiscount:5e4},{code:"FREESHIP",description:"Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn",discountType:"shipping",discountValue:0,minOrderValue:0,maxDiscount:3e4},{code:"SAVE50K",description:"Gi·∫£m 50.000ƒë cho ƒë∆°n t·ª´ 500.000ƒë",discountType:"fixed",discountValue:5e4,minOrderValue:5e5,maxDiscount:5e4},{code:"VIP20",description:"Gi·∫£m 20% cho kh√°ch VIP (t·ªëi ƒëa 100k)",discountType:"percentage",discountValue:20,minOrderValue:2e5,maxDiscount:1e5}]),n=x({fullName:"",phone:"",email:"",address:"",notes:"",paymentMethod:"cod"}),p=x([]),V=C(()=>p.value.reduce((s,t)=>s+(t.product?.price||0)*t.quantity,0)),M=C(()=>c.value?.discountType==="shipping"||V.value>=2e5?0:3e4),T=C(()=>{if(!c.value)return 0;const s=c.value,t=V.value;if(t<s.minOrderValue)return 0;let i=0;switch(s.discountType){case"percentage":i=t*s.discountValue/100;break;case"fixed":i=s.discountValue;break;case"shipping":i=M.value;break;default:i=0}return Math.min(i,s.maxDiscount)}),w=C(()=>V.value+M.value-T.value),j=C(()=>p.value.reduce((s,t)=>s+t.quantity,0)),Y=C(()=>n.value.fullName&&n.value.phone&&n.value.address&&n.value.paymentMethod),_=C(()=>p.value.length===1&&!1),ee=()=>{const s=Date.now().toString().slice(-6),t=Math.random().toString(36).substr(2,4).toUpperCase();return`EM${s}${t}`},te=()=>(m.value={},n.value.fullName.trim()||(m.value.fullName="Vui l√≤ng nh·∫≠p h·ªç v√† t√™n"),n.value.phone.trim()?/^[0-9]{10,11}$/.test(n.value.phone.replace(/\s/g,""))||(m.value.phone="S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá"):m.value.phone="Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i",n.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)&&(m.value.email="Email kh√¥ng h·ª£p l·ªá"),n.value.address.trim()||(m.value.address="Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng"),Object.keys(m.value).length===0),J=async()=>{if(I.value.trim()){U.value=!0;try{await new Promise(t=>setTimeout(t,1e3));const s=$.value.find(t=>t.code.toLowerCase()===I.value.trim().toLowerCase());if(!s){h("M√£ khuy·∫øn m√£i kh√¥ng h·ª£p l·ªá!","error");return}if(V.value<s.minOrderValue){h(`ƒê∆°n h√†ng t·ªëi thi·ªÉu ${b(s.minOrderValue)} ƒë·ªÉ √°p d·ª•ng m√£ n√†y!`,"warning");return}c.value=s,h(`√Åp d·ª•ng m√£ ${s.code} th√†nh c√¥ng!`,"success")}catch{h("C√≥ l·ªói x·∫£y ra khi √°p d·ª•ng m√£ khuy·∫øn m√£i!","error")}finally{U.value=!1}}},se=()=>{c.value=null,I.value="",h("ƒê√£ x√≥a m√£ khuy·∫øn m√£i!","info")},ne=s=>{I.value=s,J()},Z=async()=>{if(!te()){h("Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin ƒë∆°n h√†ng","error");return}H.value=!0;try{const s=localStorage.getItem("easymart-invoice");let t;if(s){const i=JSON.parse(s);console.log("üìã C·∫≠p nh·∫≠t th√¥ng tin giao h√†ng cho h√≥a ƒë∆°n:",i.maHD),await new Promise(l=>setTimeout(l,1e3)),t={orderCode:`HD${i.maHD}`,invoiceId:i.maHD,customer:{...n.value},items:p.value,summary:{subtotal:V.value,shippingFee:M.value,couponDiscount:T.value,total:w.value,itemsCount:j.value},coupon:c.value?{code:c.value.code,description:c.value.description,discountType:c.value.discountType,discountValue:T.value}:null,createdAt:i.ngayLap||new Date().toISOString()}}else console.log("‚ö†Ô∏è Kh√¥ng c√≥ h√≥a ƒë∆°n, t·∫°o ƒë∆°n h√†ng m·ªõi"),await new Promise(i=>setTimeout(i,2e3)),t={orderCode:g.value,customer:{...n.value},items:p.value,summary:{subtotal:V.value,shippingFee:M.value,couponDiscount:T.value,total:w.value,itemsCount:j.value},coupon:c.value?{code:c.value.code,description:c.value.description,discountType:c.value.discountType,discountValue:T.value}:null,createdAt:new Date().toISOString()};console.log("üßπ Clearing cart after successful checkout...");try{await X(),console.log("‚úÖ Backend cart cleared successfully")}catch(i){console.warn("‚ö†Ô∏è Failed to clear backend cart:",i)}localStorage.removeItem("easymart-selected-items"),console.log("üßπ localStorage cleared"),le(t)}catch{h("C√≥ l·ªói x·∫£y ra khi ƒë·∫∑t h√†ng. Vui l√≤ng th·ª≠ l·∫°i!","error")}finally{H.value=!1}},le=s=>{const t=n.value.paymentMethod;switch(localStorage.setItem("easymart-last-order",JSON.stringify(s)),t){case"cod":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}. B·∫°n s·∫Ω thanh to√°n khi nh·∫≠n h√†ng.`,"success");break;case"banking":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}. Vui l√≤ng chuy·ªÉn kho·∫£n theo th√¥ng tin ƒë√£ cung c·∫•p.`,"success");break;case"qr":h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}. Vui l√≤ng qu√©t m√£ QR ƒë·ªÉ thanh to√°n.`,"success");break;case"momo":h("ƒêang chuy·ªÉn ƒë·∫øn MoMo ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n MoMo th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}`,"success")},1500);break;case"vnpay":h("ƒêang chuy·ªÉn ƒë·∫øn VNPay ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n VNPay th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}`,"success")},1500);break;case"zalopay":h("ƒêang chuy·ªÉn ƒë·∫øn ZaloPay ƒë·ªÉ thanh to√°n...","info"),setTimeout(()=>{h(`Thanh to√°n ZaloPay th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}`,"success")},1500);break;default:h(`ƒê·∫∑t h√†ng th√†nh c√¥ng! M√£ ƒë∆°n h√†ng: ${g.value}`,"success")}setTimeout(()=>{G.push({name:"PaymentSuccess",query:{orderCode:g.value,total:w.value,paymentMethod:t}})},3e3)};return ue(()=>{console.log("üöÄ Checkout page mounted"),Q();const s=localStorage.getItem("easymart-invoice"),t=localStorage.getItem("easymart-selected-items");if(s&&t){const i=JSON.parse(s),l=JSON.parse(t);console.log("üìã Nh·∫≠n h√≥a ƒë∆°n:",i),console.log("üõí Selected items:",l),console.log("üîç Invoice structure:",Object.keys(i)),g.value=`HD${i.maHD||i.orderId||"NEW"}`,i.chiTietHoaDon&&i.chiTietHoaDon.length>0?(console.log("‚úÖ S·ª≠ d·ª•ng chiTietHoaDon t·ª´ Orders.vue"),p.value=i.chiTietHoaDon.map(o=>({productId:o.maSP||o.productId,quantity:o.soLuong||o.quantity,product:{id:o.maSP||o.productId,name:o.tenSP||o.productName,price:o.donGiaBan||o.donGia||o.productPrice,image:O(o.maSP||o.productId)}}))):i.items&&i.items.length>0?(console.log("‚úÖ S·ª≠ d·ª•ng items t·ª´ Cart.vue/ProductDetail"),p.value=i.items.map(o=>({productId:o.maSP||o.productId,quantity:o.soLuong||o.quantity,product:{id:o.maSP||o.productId,name:o.tenSP||o.productName,price:o.donGiaBan||o.donGia||o.productPrice,image:O(o.maSP||o.productId)}}))):(console.log("‚ö†Ô∏è Kh√¥ng c√≥ items trong h√≥a ƒë∆°n, th·ª≠ fallback..."),p.value=R.value.filter(o=>l.includes(o.productId)).map(o=>{const q=B.value.find(oe=>oe.id===o.productId);return q&&(q.image=O(o.productId)),{...o,product:q}}).filter(o=>o.product)),z(),L()}else{if(g.value=ee(),t){const i=JSON.parse(t);p.value=R.value.filter(l=>i.includes(l.productId)).map(l=>{const o=B.value.find(q=>q.id===l.productId);return o&&(o.image=O(l.productId)),{...l,product:o}}).filter(l=>l.product)}z(),L()}console.log("üìä Final selectedItems state:"),console.log("   - Length:",p.value.length),console.log("   - Items:",p.value),console.log("   - Invoice data:",s?JSON.parse(s):"None"),console.log("   - Stored selected items:",t),p.value.length===0?(console.warn("‚ö†Ô∏è No selected items found, redirecting to cart..."),h("Vui l√≤ng ch·ªçn s·∫£n ph·∫©m t·ª´ gi·ªè h√†ng ƒë·ªÉ thanh to√°n","warning"),setTimeout(()=>{G.push("/cart")},2e3)):console.log("‚úÖ Selected items loaded successfully, staying on checkout page")}),(s,t)=>{const i=ce("router-link");return r(),u("div",pe,[e("div",fe,[e("nav",ye,[e("ol",be,[e("li",ke,[E(i,{to:"/",class:"text-decoration-none"},{default:F(()=>t[12]||(t[12]=[e("i",{class:"fas fa-home"},null,-1),a(" Trang ch·ªß ")])),_:1,__:[12]})]),_.value?v("",!0):(r(),u("li",_e,[E(i,{to:"/cart",class:"text-decoration-none"},{default:F(()=>t[13]||(t[13]=[e("i",{class:"fas fa-shopping-cart"},null,-1),a(" Gi·ªè h√†ng ")])),_:1,__:[13]})])),_.value?(r(),u("li",xe,t[14]||(t[14]=[e("span",{class:"text-muted"},[e("i",{class:"fas fa-bolt"}),a(" Mua ngay ")],-1)]))):v("",!0),t[15]||(t[15]=e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("i",{class:"fas fa-credit-card"}),a(" Thanh to√°n ")],-1))])]),e("div",Me,[e("h2",we,[t[16]||(t[16]=e("i",{class:"fas fa-credit-card text-primary me-2"},null,-1)),a(" "+d(_.value?"Thanh to√°n mua ngay":"Thanh to√°n ƒë∆°n h√†ng"),1)]),e("div",{class:"d-flex gap-2"},[e("button",{onClick:Q,class:"btn btn-outline-warning btn-sm",title:"Debug localStorage data"},t[17]||(t[17]=[e("i",{class:"fas fa-bug me-1"},null,-1),a("Debug Data ")]))])]),p.value.length>0?(r(),u("div",Se,[e("div",Ie,[e("div",Ve,[t[24]||(t[24]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-truck me-2"}),a(" Th√¥ng tin giao h√†ng ")])],-1)),e("div",Te,[e("form",{onSubmit:me(Z,["prevent"])},[e("div",Ce,[e("div",Ne,[t[18]||(t[18]=e("label",{for:"fullName",class:"form-label"},"H·ªç v√† t√™n *",-1)),y(e("input",{type:"text",class:N(["form-control",{"is-invalid":m.value.fullName}]),id:"fullName","onUpdate:modelValue":t[0]||(t[0]=l=>n.value.fullName=l),required:""},null,2),[[P,n.value.fullName]]),m.value.fullName?(r(),u("div",Pe,d(m.value.fullName),1)):v("",!0)]),e("div",De,[t[19]||(t[19]=e("label",{for:"phone",class:"form-label"},"S·ªë ƒëi·ªán tho·∫°i *",-1)),y(e("input",{type:"tel",class:N(["form-control",{"is-invalid":m.value.phone}]),id:"phone","onUpdate:modelValue":t[1]||(t[1]=l=>n.value.phone=l),required:""},null,2),[[P,n.value.phone]]),m.value.phone?(r(),u("div",qe,d(m.value.phone),1)):v("",!0)])]),e("div",Oe,[t[20]||(t[20]=e("label",{for:"email",class:"form-label"},"Email",-1)),y(e("input",{type:"email",class:N(["form-control",{"is-invalid":m.value.email}]),id:"email","onUpdate:modelValue":t[2]||(t[2]=l=>n.value.email=l)},null,2),[[P,n.value.email]]),m.value.email?(r(),u("div",He,d(m.value.email),1)):v("",!0)]),e("div",Ue,[t[21]||(t[21]=e("label",{for:"address",class:"form-label"},"ƒê·ªãa ch·ªâ giao h√†ng *",-1)),y(e("textarea",{class:N(["form-control",{"is-invalid":m.value.address}]),id:"address",rows:"3","onUpdate:modelValue":t[3]||(t[3]=l=>n.value.address=l),placeholder:"S·ªë nh√†, t√™n ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, t·ªânh/th√†nh ph·ªë",required:""},null,2),[[P,n.value.address]]),m.value.address?(r(),u("div",Ee,d(m.value.address),1)):v("",!0)]),e("div",Fe,[t[22]||(t[22]=e("label",{for:"notes",class:"form-label"},"Ghi ch√∫ ƒë∆°n h√†ng",-1)),y(e("textarea",{class:"form-control",id:"notes",rows:"2","onUpdate:modelValue":t[4]||(t[4]=l=>n.value.notes=l),placeholder:"Ghi ch√∫ v·ªÅ ƒë∆°n h√†ng, v√≠ d·ª•: th·ªùi gian hay ch·ªâ d·∫´n ƒë·ªãa ƒëi·ªÉm giao h√†ng chi ti·∫øt h∆°n."},null,512),[[P,n.value.notes]])]),k(S)?(r(),u("div",Le,[e("button",{type:"button",class:"btn btn-outline-info btn-sm",onClick:L,title:"C·∫≠p nh·∫≠t th√¥ng tin t·ª´ profile"},t[23]||(t[23]=[e("i",{class:"fas fa-sync-alt me-2"},null,-1),a(" C·∫≠p nh·∫≠t th√¥ng tin t·ª´ profile ")]))])):v("",!0)],32)])]),e("div",Ae,[t[52]||(t[52]=e("div",{class:"card-header bg-success text-white"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-money-bill-wave me-2"}),a(" Ph∆∞∆°ng th·ª©c thanh to√°n ")])],-1)),e("div",$e,[e("div",je,[e("div",Ge,[e("div",Be,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"cod",value:"cod","onUpdate:modelValue":t[5]||(t[5]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[25]||(t[25]=e("label",{class:"form-check-label w-100",for:"cod"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-hand-holding-usd text-success me-3 fs-4"}),e("div",null,[e("strong",null,"Thanh to√°n khi nh·∫≠n h√†ng (COD)"),e("div",{class:"text-muted small"},"Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi nh·∫≠n h√†ng")])])],-1))])]),e("div",Re,[e("div",Qe,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"banking",value:"banking","onUpdate:modelValue":t[6]||(t[6]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[26]||(t[26]=e("label",{class:"form-check-label w-100",for:"banking"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-university text-primary me-3 fs-4"}),e("div",null,[e("strong",null,"Chuy·ªÉn kho·∫£n ng√¢n h√†ng"),e("div",{class:"text-muted small"},"Chuy·ªÉn kho·∫£n tr∆∞·ªõc khi giao h√†ng")])])],-1))])]),e("div",ze,[e("div",Je,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"qr",value:"qr","onUpdate:modelValue":t[7]||(t[7]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[27]||(t[27]=e("label",{class:"form-check-label w-100",for:"qr"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-qrcode text-dark me-3 fs-4"}),e("div",null,[e("strong",null,"Qu√©t m√£ QR"),e("div",{class:"text-muted small"},"Qu√©t QR ƒë·ªÉ thanh to√°n nhanh")])])],-1))])]),e("div",Ze,[e("div",Ke,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"momo",value:"momo","onUpdate:modelValue":t[8]||(t[8]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[28]||(t[28]=e("label",{class:"form-check-label w-100",for:"momo"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fab fa-momo text-danger me-3 fs-4"}),e("div",null,[e("strong",null,"V√≠ MoMo"),e("div",{class:"text-muted small"},"Thanh to√°n qua v√≠ ƒëi·ªán t·ª≠ MoMo")])])],-1))])]),e("div",We,[e("div",Xe,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"vnpay",value:"vnpay","onUpdate:modelValue":t[9]||(t[9]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[29]||(t[29]=e("label",{class:"form-check-label w-100",for:"vnpay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-credit-card text-info me-3 fs-4"}),e("div",null,[e("strong",null,"VNPay"),e("div",{class:"text-muted small"},"Thanh to√°n qua c·ªïng VNPay")])])],-1))])]),e("div",Ye,[e("div",et,[y(e("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"zalopay",value:"zalopay","onUpdate:modelValue":t[10]||(t[10]=l=>n.value.paymentMethod=l)},null,512),[[D,n.value.paymentMethod]]),t[30]||(t[30]=e("label",{class:"form-check-label w-100",for:"zalopay"},[e("div",{class:"d-flex align-items-center"},[e("i",{class:"fas fa-mobile-alt text-warning me-3 fs-4"}),e("div",null,[e("strong",null,"ZaloPay"),e("div",{class:"text-muted small"},"Thanh to√°n qua v√≠ ZaloPay")])])],-1))])])]),n.value.paymentMethod==="banking"?(r(),u("div",tt,[t[34]||(t[34]=e("h6",{class:"text-primary mb-3"},[e("i",{class:"fas fa-info-circle me-2"}),a(" Th√¥ng tin chuy·ªÉn kho·∫£n ")],-1)),e("div",st,[t[33]||(t[33]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"Ng√¢n h√†ng:"),a(" Vietcombank")]),e("p",{class:"mb-2"},[e("strong",null,"S·ªë t√†i kho·∫£n:"),a(" 1234567890")]),e("p",{class:"mb-2"},[e("strong",null,"Ch·ªß t√†i kho·∫£n:"),a(" EASYMART COMPANY")])],-1)),e("div",nt,[e("p",lt,[t[31]||(t[31]=e("strong",null,"N·ªôi dung:",-1)),a(" THANHTOAN "+d(g.value),1)]),t[32]||(t[32]=e("p",{class:"mb-0 text-danger"},[e("small",null,[e("strong",null,"L∆∞u √Ω:"),a(" Vui l√≤ng chuy·ªÉn kho·∫£n ƒë√∫ng n·ªôi dung ƒë·ªÉ ƒë∆°n h√†ng ƒë∆∞·ª£c x·ª≠ l√Ω nhanh ch√≥ng.")])],-1))])])])):v("",!0),n.value.paymentMethod==="qr"?(r(),u("div",ot,[t[39]||(t[39]=e("h6",{class:"text-dark mb-3"},[e("i",{class:"fas fa-qrcode me-2"}),a(" Qu√©t m√£ QR ƒë·ªÉ thanh to√°n ")],-1)),e("div",at,[t[38]||(t[38]=e("div",{class:"col-md-6 text-center"},[e("div",{class:"qr-code-placeholder"},[e("i",{class:"fas fa-qrcode fa-5x text-muted mb-2"}),e("p",{class:"text-muted"},"M√£ QR s·∫Ω ƒë∆∞·ª£c t·∫°o sau khi ƒë·∫∑t h√†ng")])],-1)),e("div",it,[e("p",dt,[t[35]||(t[35]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+d(k(b)(w.value)),1)]),e("p",ut,[t[36]||(t[36]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+d(g.value),1)]),t[37]||(t[37]=e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" M·ªü app ng√¢n h√†ng ‚Üí Qu√©t QR ‚Üí X√°c nh·∫≠n thanh to√°n")])],-1))])])])):v("",!0),n.value.paymentMethod==="momo"?(r(),u("div",rt,[t[43]||(t[43]=e("h6",{class:"text-danger mb-3"},[e("i",{class:"fab fa-momo me-2"}),a(" Thanh to√°n qua v√≠ MoMo ")],-1)),e("div",ct,[e("div",mt,[e("p",ht,[t[40]||(t[40]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+d(k(b)(w.value)),1)]),e("p",gt,[t[41]||(t[41]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+d(g.value),1)])]),t[42]||(t[42]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn app MoMo ƒë·ªÉ ho√†n t·∫•t thanh to√°n sau khi ƒë·∫∑t h√†ng.")])])],-1))])])):v("",!0),n.value.paymentMethod==="vnpay"?(r(),u("div",vt,[t[47]||(t[47]=e("h6",{class:"text-info mb-3"},[e("i",{class:"fas fa-credit-card me-2"}),a(" Thanh to√°n qua VNPay ")],-1)),e("div",pt,[e("div",ft,[e("p",yt,[t[44]||(t[44]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+d(k(b)(w.value)),1)]),e("p",bt,[t[45]||(t[45]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+d(g.value),1)])]),t[46]||(t[46]=e("div",{class:"col-md-6"},[e("p",{class:"mb-2"},[e("strong",null,"H·ªó tr·ª£:"),a(" Th·∫ª ATM, Internet Banking, V√≠ ƒëi·ªán t·ª≠")]),e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn c·ªïng thanh to√°n VNPay ƒë·ªÉ ho√†n t·∫•t giao d·ªãch.")])])],-1))])])):v("",!0),n.value.paymentMethod==="zalopay"?(r(),u("div",kt,[t[51]||(t[51]=e("h6",{class:"text-warning mb-3"},[e("i",{class:"fas fa-mobile-alt me-2"}),a(" Thanh to√°n qua ZaloPay ")],-1)),e("div",_t,[e("div",xt,[e("p",Mt,[t[48]||(t[48]=e("strong",null,"S·ªë ti·ªÅn:",-1)),a(" "+d(k(b)(w.value)),1)]),e("p",wt,[t[49]||(t[49]=e("strong",null,"M√£ ƒë∆°n h√†ng:",-1)),a(" "+d(g.value),1)])]),t[50]||(t[50]=e("div",{class:"col-md-6"},[e("p",{class:"mb-0 text-info"},[e("small",null,[e("strong",null,"H∆∞·ªõng d·∫´n:"),a(" B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn app ZaloPay ƒë·ªÉ ho√†n t·∫•t thanh to√°n sau khi ƒë·∫∑t h√†ng.")])])],-1))])])):v("",!0)])])]),e("div",St,[e("div",It,[t[63]||(t[63]=e("div",{class:"card-header bg-warning text-dark"},[e("h5",{class:"mb-0"},[e("i",{class:"fas fa-receipt me-2"}),a(" ƒê∆°n h√†ng c·ªßa b·∫°n ")])],-1)),e("div",Vt,[e("div",Tt,[(r(!0),u(K,null,W(p.value,l=>(r(),u("div",{key:l.productId,class:"order-item d-flex align-items-center mb-3 pb-3 border-bottom"},[e("img",{src:l.product?.image,alt:l.product?.name,class:"order-item-image me-3"},null,8,Ct),e("div",Nt,[e("h6",Pt,d(l.product?.name),1),e("div",Dt,[e("span",qt,d(k(b)(l.product?.price||0))+" x "+d(l.quantity),1),e("span",Ot,d(k(b)((l.product?.price||0)*l.quantity)),1)])])]))),128))]),e("div",Ht,[e("div",Ut,[e("span",null,"T·∫°m t√≠nh ("+d(j.value)+" s·∫£n ph·∫©m):",1),e("span",null,d(k(b)(V.value)),1)]),e("div",Et,[t[53]||(t[53]=e("span",null,"Ph√≠ v·∫≠n chuy·ªÉn:",-1)),e("span",{class:N(M.value===0?"text-success":"")},d(M.value===0?"Mi·ªÖn ph√≠":k(b)(M.value)),3)]),M.value===0?(r(),u("div",Ft,t[54]||(t[54]=[e("i",{class:"fas fa-check-circle me-1"},null,-1),a(" B·∫°n ƒë∆∞·ª£c mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn! ")]))):v("",!0),e("div",Lt,[e("div",At,[y(e("input",{type:"text",class:"form-control form-control-sm",placeholder:"Nh·∫≠p m√£ khuy·∫øn m√£i","onUpdate:modelValue":t[11]||(t[11]=l=>I.value=l),disabled:c.value},null,8,$t),[[P,I.value]]),e("button",{class:"btn btn-outline-primary btn-sm",onClick:J,disabled:!I.value.trim()||c.value||U.value},[U.value?(r(),u("span",Gt,t[55]||(t[55]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(r(),u("span",Bt,d(c.value?"ƒê√£ √°p d·ª•ng":"√Åp d·ª•ng"),1))],8,jt)]),c.value?(r(),u("div",Rt,[e("div",Qt,[e("div",null,[e("small",zt,[t[56]||(t[56]=e("i",{class:"fas fa-ticket-alt me-1"},null,-1)),a(" "+d(c.value.code),1)]),e("div",Jt,d(c.value.description),1)]),e("button",{class:"btn btn-sm",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a5a)",color:"white",border:"none"},onClick:se,title:"X√≥a m√£ khuy·∫øn m√£i"},t[57]||(t[57]=[e("i",{class:"fas fa-times"},null,-1)]))])])):v("",!0),T.value>0?(r(),u("div",Zt,[e("span",null,"Gi·∫£m gi√° ("+d(c.value?.code)+"):",1),e("span",null,"-"+d(k(b)(T.value)),1)])):v("",!0),!c.value&&$.value.length>0?(r(),u("div",Kt,[t[58]||(t[58]=e("small",{class:"text-muted d-block mb-2"},"M√£ khuy·∫øn m√£i c√≥ s·∫µn:",-1)),e("div",Wt,[(r(!0),u(K,null,W($.value,l=>(r(),u("button",{key:l.code,class:"btn btn-sm",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",border:"none"},onClick:o=>ne(l.code),title:l.description},d(l.code),9,Xt))),128))])])):v("",!0)]),t[62]||(t[62]=e("hr",null,null,-1)),e("div",Yt,[t[59]||(t[59]=e("strong",{class:"fs-5"},"T·ªïng c·ªông:",-1)),e("strong",es,d(k(b)(w.value)),1)]),e("button",{type:"button",class:"btn btn-primary w-100 mb-2 py-2",onClick:Z,disabled:H.value||!Y.value},[H.value?(r(),u("span",ss,t[60]||(t[60]=[e("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),a(" ƒêang x·ª≠ l√Ω... ")]))):(r(),u("span",ns,t[61]||(t[61]=[e("i",{class:"fas fa-check me-2"},null,-1),a(" ƒê·∫∑t h√†ng ")])))],8,ts),E(i,{to:_.value?"/":"/cart",class:"btn btn-outline-secondary w-100"},{default:F(()=>[e("i",{class:N([_.value?"fas fa-home":"fas fa-arrow-left","me-2"])},null,2),a(" "+d(_.value?"V·ªÅ trang ch·ªß":"Quay l·∫°i gi·ªè h√†ng"),1)]),_:1},8,["to"])])])])])])):(r(),u("div",ls,[e("div",os,[e("div",as,[t[64]||(t[64]=e("div",{class:"empty-checkout-icon mb-4"},[e("i",{class:"fas fa-exclamation-triangle fa-5x text-warning"})],-1)),t[65]||(t[65]=e("h3",{class:"text-muted mb-3"},"Kh√¥ng c√≥ s·∫£n ph·∫©m ƒë·ªÉ thanh to√°n",-1)),e("p",is,d(_.value?"Vui l√≤ng quay l·∫°i trang s·∫£n ph·∫©m ƒë·ªÉ mua h√†ng":"Vui l√≤ng quay l·∫°i gi·ªè h√†ng v√† ch·ªçn s·∫£n ph·∫©m ƒë·ªÉ thanh to√°n"),1),E(i,{to:_.value?"/":"/cart",class:"btn btn-primary btn-lg"},{default:F(()=>[e("i",{class:N([_.value?"fas fa-home":"fas fa-arrow-left","me-2"])},null,2),a(" "+d(_.value?"V·ªÅ trang ch·ªß":"Quay l·∫°i gi·ªè h√†ng"),1)]),_:1},8,["to"])])])]))])])}}},cs=ae(ds,[["__scopeId","data-v-ab9197b7"]]);export{cs as default};
