import{_ as gn,s as hn,r as x,S as mn,q as fn,h as C,i as pn,p as vn,A as R,T as Q,c as o,a as e,g as c,y as H,f,t as a,d as p,F as j,e as L,k as yn,l as bn,m as kn,B as V,o as i,C as Tn}from"./index-pi3KkAaC.js";const xn={class:"orders-page"},Hn={class:"container mt-5 pt-5"},_n={class:"row"},Kn={class:"col-12"},Cn={class:"d-flex justify-content-between align-items-center mb-4"},wn={class:"d-flex gap-2"},Pn=["disabled"],In={class:"order-tabs mb-4"},Sn={class:"nav nav-pills nav-fill"},Dn={class:"nav-item"},An={class:"nav-item"},Gn={class:"nav-item"},On={class:"nav-item"},Nn={key:0,class:"container"},Mn={key:1,class:"container"},En={class:"row justify-content-center"},$n={class:"col-md-8"},Bn={class:"alert alert-danger",role:"alert"},Un={key:2,class:"container"},Rn={class:"row"},jn={class:"col-12"},Ln={class:"tab-info mb-3"},Vn={class:"alert alert-info d-flex align-items-center"},Fn={key:0,class:"ms-2"},zn={key:0,class:"text-center py-5"},qn={class:"text-muted"},Jn={class:"text-muted"},Xn={key:0},Yn={key:1},Qn={key:2},Wn={key:3},Zn={key:1,class:"orders-list"},nt={class:"order-header p-3 bg-light rounded-top"},tt={class:"row align-items-center"},et={class:"col-md-6"},st={class:"mb-1"},at={class:"text-muted"},lt={class:"text-muted"},ot={class:"col-md-6 text-md-end"},it={class:"mt-2"},rt={class:"text-success"},ct={class:"order-items p-3"},ut={class:"row"},dt={class:"col-md-8"},gt={class:"mb-3"},ht={key:0,class:"alert alert-info"},mt={key:1,class:"items-list"},ft={class:"item-image me-3"},pt=["src","alt"],vt={class:"item-details flex-grow-1"},yt={class:"fw-bold"},bt={class:"text-muted"},kt={class:"text-muted"},Tt={class:"item-total text-end"},xt={class:"col-md-4"},Ht={class:"order-summary"},_t={class:"summary-item d-flex justify-content-between mb-2"},Kt={key:0,class:"summary-item d-flex justify-content-between mb-2 text-info"},Ct={key:1,class:"summary-item d-flex justify-content-between mb-2 text-success"},wt={key:2,class:"summary-item d-flex justify-content-between mb-2 text-info"},Pt={key:3,class:"summary-item d-flex justify-content-between mb-2 text-warning"},It={class:"summary-item d-flex justify-content-between mb-2 fw-bold"},St={class:"text-success"},Dt={key:4,class:"summary-item d-flex justify-content-between mb-2 text-muted"},At={class:"order-footer p-3 bg-light rounded-bottom"},Gt={class:"row align-items-center"},Ot={class:"col-md-6"},Nt={class:"text-muted"},Mt={class:"text-muted"},Et={class:"col-md-6 text-md-end"},$t=["onClick","disabled"],Bt=["onClick","disabled"],Ut={key:2,class:"text-muted"},Rt={key:2,class:"pagination-section mt-4"},jt={"aria-label":"Orders pagination"},Lt={class:"pagination justify-content-center"},Vt=["disabled"],Ft=["onClick"],zt=["disabled"],qt={class:"text-center mt-2"},Jt={class:"text-muted"},Xt={key:3,class:"container"},Yt={class:"row justify-content-center"},Qt={class:"col-md-8 text-center"},Wt={class:"empty-state"},F=4,Zt={__name:"Orders",setup(ne){const z=t=>{try{if(!t)return null;const n=JSON.parse(atob(t.split(".")[1]));return{email:n.sub,issuer:n.iss,role:n.role,exp:n.exp,iat:n.iat,raw:n}}catch(n){return console.error("Error decoding token:",n),null}},P=vn();let q,J;try{const t=hn();q=t.user,J=t.isAuthenticated}catch(t){console.error("âŒ useAuth failed:",t),q=x(null),J=x(!1)}let u,y,b,O,N;try{const t=mn();u=t.orders,y=t.loading,b=t.error,O=t.loadCustomerOrders,N=t.cancelOrder,console.log("ðŸ” useOrders initialized successfully:"),console.log("   - orders:",u),console.log("   - orders.value:",u?.value),console.log("   - loading:",y),console.log("   - error:",b)}catch(t){console.error("âŒ useOrders failed:",t),u=x([]),y=x(!1),b=x(null),O=async()=>({success:!1,error:"useOrders not available"}),N=async()=>({success:!1,error:"cancelOrder not available"})}let K;try{K=fn()}catch(t){console.error("âŒ useCart failed:",t),K={maKH:null,isResolved:!1}}const g=x(null),k=x("pending");C(()=>u.value.length>0);const I=C(()=>{if(!u.value||u.value.length===0)return[];switch(k.value){case"pending":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0);case"paid":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===1);case"completed":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===2);case"cancelled":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===3);default:return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0)}}),S=C(()=>{if(!u.value||u.value.length===0)return{pending:0,paid:0,completed:0,cancelled:0};const t={pending:0,paid:0,completed:0,cancelled:0};return u.value.forEach(n=>{switch(typeof n.trangThai=="string"?parseInt(n.trangThai):n.trangThai){case 0:t.pending++;break;case 1:t.paid++;break;case 2:t.completed++;break;case 3:t.cancelled++;break}}),t}),h=x(1),v=C(()=>Math.ceil(I.value.length/F)),M=C(()=>{const t=(h.value-1)*F,n=t+F;return I.value.slice(t,n)}),W=C(()=>{const t=[];if(v.value<=5)for(let l=1;l<=v.value;l++)t.push(l);else{const l=Math.max(1,h.value-Math.floor(2.5)),s=Math.min(v.value,l+5-1);for(let d=l;d<=s;d++)t.push(d)}return t}),E=t=>{t>=1&&t<=v.value&&(h.value=t,window.scrollTo({top:0,behavior:"smooth"}))},Z=()=>{h.value=1},nn=(t,n)=>t?.maKH?t.maKH:t?.customer?.maKH?t.customer.maKH:t?.result?.maKH?t.result.maKH:t?.data?.maKH?t.data.maKH:null,$=async()=>{try{console.log("ðŸ” === GETTING MAKH FROM API ===");const t=R();if(!t)return console.log("âŒ No token available"),null;const n=z(t);if(!n?.email)return console.log("âŒ No email found in token"),null;const l=n.email;console.log("ðŸ“§ User email from token:",l),console.log("ðŸ‘¤ Step 1: Getting maNguoiDung from email API...");const s=await fetch(`${V.BASE_URL}/api/nguoidung/email/${encodeURIComponent(l)}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!s.ok)return console.log("âš ï¸ User email API failed with status:",s.status),null;const r=(await s.json()).maNguoiDung;console.log("âœ… Got real maNguoiDung:",r),console.log("ðŸ‘¤ Step 2: Getting customer info with maNguoiDung...");const m=await fetch(`${V.BASE_URL}/api/khachhang/by-nguoidung/${r}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!m.ok)return console.log("âš ï¸ Customer API failed with status:",m.status),null;const Y=await m.json();console.log("âœ… Customer data from API:",Y);const U=nn(Y,"Customer API");return U?(console.log("âœ… Found maKH from API:",U),U):(console.log("âŒ No maKH found in customer data"),null)}catch(t){return console.error("âŒ Error getting maKH from API:",t),null}},T=async()=>{try{console.log("ðŸ”„ === LOADING ORDERS ==="),console.log("ðŸ”„ Current orders state:",u?.value),console.log("ðŸ”„ Current loading state:",y?.value);let t=K?.maKH||g.value?.maKH||g.value?.khachHang?.maKH;if(console.log("ðŸ”‘ Found maKH from sources:",{cart:K?.maKH,currentUser:g.value?.maKH,currentUserKhachHang:g.value?.khachHang?.maKH,final:t}),K?.maKH)t=K.maKH,console.log("âœ… Using maKH from cart (most reliable):",t),g.value&&(g.value.maKH=t,g.value.khachHang={maKH:t});else if(!t){console.log("ðŸ” No maKH found from cart, trying API...");const l=await $();if(l)t=l,console.log("âœ… Got maKH from API:",t),g.value&&(g.value.maKH=l,g.value.khachHang={maKH:l});else{console.log("âŒ No maKH found from any source"),b.value="KhÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh thÃ´ng tin khÃ¡ch hÃ ng. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i hoáº·c cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n trong trang Profile.";return}}console.log("ðŸš€ Calling loadCustomerOrders with maKH:",t);const n=await O(t);console.log("âœ… loadCustomerOrders completed:",n),console.log("ðŸ“Š Orders after loading:",u?.value),console.log("ðŸ“Š Orders length:",u?.value?.length)}catch(t){console.error("âŒ Error loading orders:",t),b.value=t.message||"CÃ³ lá»—i xáº£y ra khi táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng"}},tn=()=>{P.push("/profile")},en=async()=>{try{const t=await $();return t?(g.value&&(g.value.maKH=t,g.value.khachHang={maKH:t}),await T(),!0):!1}catch(t){return console.error("âŒ Error refreshing customer info:",t),!1}},sn=t=>{if(!t)return"/placeholder-image.jpg";const n=Tn.IMAGES.PRODUCT_IMAGES(t);return n[0]?`${V.BASE_URL}${n[0]}`:"/placeholder-image.jpg"},an=t=>{t.target.src="/placeholder-image.jpg"},ln=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},_=t=>t==null?"0 â‚«":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),on=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"badge bg-warning text-dark",1:"badge bg-success",2:"badge bg-info",3:"badge bg-danger",4:"badge bg-secondary"}[n]||"badge bg-secondary"},B=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"Chá» thanh toÃ¡n",1:"ÄÃ£ thanh toÃ¡n",2:"Äang xá»­ lÃ½",3:"ÄÃ£ há»§y",4:"HoÃ n tráº£"}[n]||`KhÃ´ng xÃ¡c Ä‘á»‹nh (${t})`},D=t=>(typeof t=="string"?parseInt(t):t)===0,rn=async()=>{try{u.value=[],await T()}catch(t){console.error("âŒ Error refreshing orders:",t),alert("CÃ³ lá»—i xáº£y ra khi lÃ m má»›i danh sÃ¡ch Ä‘Æ¡n hÃ ng!")}},w=t=>{k.value=t,Z()},A=t=>k.value===t?"nav-link active":"nav-link",G=t=>{const n="badge rounded-pill ms-2";switch(t){case"pending":return`${n} bg-warning text-dark`;case"paid":return`${n} bg-success`;case"completed":return`${n} bg-info`;case"cancelled":return`${n} bg-danger`;default:return`${n} bg-warning text-dark`}},X=t=>{switch(t){case"pending":return"chá» thanh toÃ¡n";case"paid":return"Ä‘Ã£ thanh toÃ¡n";case"completed":return"hoÃ n thÃ nh";case"cancelled":return"Ä‘Ã£ há»§y";default:return"chá» thanh toÃ¡n"}},cn=async t=>{try{if(!t){alert("KhÃ´ng cÃ³ mÃ£ Ä‘Æ¡n hÃ ng Ä‘á»ƒ checkout!");return}const n=u.value.find(l=>l.maHD===t);if(n){if(n.trangThai!==0){alert("Chá»‰ cÃ³ thá»ƒ checkout Ä‘Æ¡n hÃ ng Ä‘ang chá» thanh toÃ¡n!");return}const l={maHD:n.maHD,tongTien:n.tongTien,chiTietHoaDon:n.chiTietHoaDon||n.chiTietList||[],timestamp:new Date().toISOString(),source:"orders-page",coupon:n.coupon||null,tienGiamGia:n.tienGiamGia||0,tongTienSauGiamGia:n.tongTienSauGiamGia||n.tongTien},s=(n.chiTietHoaDon||n.chiTietList||[]).map(d=>d.sanPham?.maSP||d.maSP).filter(Boolean);localStorage.setItem("easymart-invoice",JSON.stringify(l)),localStorage.setItem("easymart-selected-items",JSON.stringify(s)),console.log("âœ… Saved to localStorage:",{invoice:l,selectedItems:s}),P.push("/checkout")}else alert("KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘Æ¡n hÃ ng!")}catch(n){console.error("âŒ Error during checkout:",n),alert("KhÃ´ng thá»ƒ chuyá»ƒn Ä‘áº¿n trang checkout. Vui lÃ²ng thá»­ láº¡i!")}},un=async t=>{const n=u.value.find(l=>l.maHD===t);if(!n){alert("KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng!");return}if(!D(n.trangThai)){const l=B(n.trangThai);alert(`KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng nÃ y. Tráº¡ng thÃ¡i hiá»‡n táº¡i: ${l}`);return}if(confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n há»§y Ä‘Æ¡n hÃ ng nÃ y?"))try{console.log("âŒ Cancelling order:",t),await N(t,"KhÃ¡ch hÃ ng yÃªu cáº§u há»§y Ä‘Æ¡n hÃ ng"),console.log("ðŸ”„ Refreshing orders after successful cancellation..."),await T(),alert("ÄÃ£ há»§y Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng!"),console.log("âœ… Order cancelled and UI updated successfully")}catch(l){console.error("âŒ Error cancelling order:",l);let s=l.message||"Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh",d=!1;s.includes("Ä‘Ã£ Ä‘Æ°á»£c há»§y trÆ°á»›c Ä‘Ã³")||s.includes("already cancelled")||s.includes("Ä‘Ã£ há»§y")||s.includes("cancelled")?(s="ÄÆ¡n hÃ ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c há»§y trÆ°á»›c Ä‘Ã³.",d=!0):s.includes("khÃ´ng thá»ƒ há»§y")||s.includes("cannot cancel")||s.includes("khÃ´ng Ä‘Æ°á»£c phÃ©p")||s.includes("not allowed")?(s="KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng nÃ y do tráº¡ng thÃ¡i hiá»‡n táº¡i khÃ´ng cho phÃ©p.",d=!0):s.includes("Bad Request")||s.includes("400")?(s="YÃªu cáº§u há»§y Ä‘Æ¡n hÃ ng khÃ´ng há»£p lá»‡. CÃ³ thá»ƒ Ä‘Æ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c khÃ´ng tá»“n táº¡i.",d=!0):s.includes("Unauthorized")||s.includes("401")?s="PhiÃªn Ä‘Äƒng nháº­p Ä‘Ã£ háº¿t háº¡n. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i.":s.includes("Forbidden")||s.includes("403")?s="Báº¡n khÃ´ng cÃ³ quyá»n há»§y Ä‘Æ¡n hÃ ng nÃ y.":(s.includes("Not Found")||s.includes("404"))&&(s="KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng nÃ y.",d=!0),alert(`KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng: ${s}`),d&&(console.log("ðŸ”„ Auto-refreshing orders due to error..."),setTimeout(()=>{T()},2e3))}},dn=()=>{const t=localStorage.getItem("easymart-user"),n=R();return t&&n};return pn(async()=>{try{console.log("ðŸš€ === ORDERS PAGE MOUNTED ===");const t=dn();if(console.log("ðŸ” User login status:",t),!t){console.log("âŒ User not logged in, redirecting to login"),P.push("/login");return}const n=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!n){console.log("âŒ No user data in localStorage, redirecting to login"),P.push("/login");return}console.log("ðŸ“¦ User data loaded:",n);const l=R();if(l){const m=z(l);m?.email&&(n.email=m.email,console.log("ðŸ“§ Added email from token:",m.email))}g.value=n;const s=n.maKH||n.customerInfo?.maKH;if(console.log("ðŸ”‘ Existing maKH from user data:",s),s)console.log("âœ… maKH already available, loading orders directly"),await T();else{console.log("ðŸ” No maKH found, trying to get from API...");const m=await $();m?(console.log("âœ… Got maKH from API, updating user data and loading orders"),g.value.maKH=m,g.value.khachHang={maKH:m},await T()):(console.log("âŒ Could not get maKH from API, showing error"),b.value="KhÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh thÃ´ng tin khÃ¡ch hÃ ng. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i hoáº·c cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n trong trang Profile.")}const d=setInterval(async()=>{try{console.log("ðŸ”„ Auto-refreshing orders..."),await T()}catch(m){console.warn("âš ï¸ Auto-refresh failed:",m.message)}},3e4);Q(()=>{d&&clearInterval(d)})}catch(t){console.error("âŒ Error in onMounted:",t),b.value="CÃ³ lá»—i xáº£y ra khi khá»Ÿi táº¡o trang. Vui lÃ²ng thá»­ láº¡i."}}),Q(()=>{console.log("ðŸ§¹ Orders page unmounted, cleaning up...")}),(t,n)=>{const l=kn("router-link");return i(),o("div",xn,[e("div",Hn,[e("div",_n,[e("div",Kn,[e("div",Cn,[n[8]||(n[8]=e("h1",{class:"text-primary mb-0"},[e("i",{class:"fas fa-box me-3"}),c("ÄÆ¡n hÃ ng cá»§a tÃ´i ")],-1)),e("div",wn,[e("button",{onClick:rn,class:"btn btn-outline-primary",disabled:H(y)},[e("i",{class:f(["fas fa-sync-alt me-2",{"fa-spin":H(y)}])},null,2),n[7]||(n[7]=c(" LÃ m má»›i "))],8,Pn)])]),e("div",In,[e("ul",Sn,[e("li",Dn,[e("button",{class:f(A("pending")),onClick:n[0]||(n[0]=s=>w("pending"))},[n[9]||(n[9]=e("i",{class:"fas fa-clock me-2"},null,-1)),n[10]||(n[10]=c("Chá» thanh toÃ¡n ")),e("span",{class:f(G("pending"))},a(S.value.pending),3)],2)]),e("li",An,[e("button",{class:f(A("paid")),onClick:n[1]||(n[1]=s=>w("paid"))},[n[11]||(n[11]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),n[12]||(n[12]=c("ÄÃ£ thanh toÃ¡n ")),e("span",{class:f(G("paid"))},a(S.value.paid),3)],2)]),e("li",Gn,[e("button",{class:f(A("completed")),onClick:n[2]||(n[2]=s=>w("completed"))},[n[13]||(n[13]=e("i",{class:"fas fa-shipping-fast me-2"},null,-1)),n[14]||(n[14]=c("HoÃ n thÃ nh ")),e("span",{class:f(G("completed"))},a(S.value.completed),3)],2)]),e("li",On,[e("button",{class:f(A("cancelled")),onClick:n[3]||(n[3]=s=>w("cancelled"))},[n[15]||(n[15]=e("i",{class:"fas fa-times-circle me-2"},null,-1)),n[16]||(n[16]=c("ÄÃ£ há»§y ")),e("span",{class:f(G("cancelled"))},a(S.value.cancelled),3)],2)])])])])])]),H(y)?(i(),o("div",Nn,n[17]||(n[17]=[e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-8 text-center"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Äang táº£i...")]),e("p",{class:"mt-3 text-muted"},"Äang táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng...")])],-1)]))):H(b)?(i(),o("div",Mn,[e("div",En,[e("div",$n,[e("div",Bn,[n[21]||(n[21]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n[22]||(n[22]=e("strong",null,"Lá»—i:",-1)),c(" "+a(H(b))+" ",1),e("div",{class:"mt-3"},[e("button",{onClick:T,class:"btn btn-outline-danger btn-sm me-2"},n[18]||(n[18]=[e("i",{class:"fas fa-redo me-1"},null,-1),c("Thá»­ láº¡i ")])),e("button",{onClick:en,class:"btn btn-outline-info btn-sm me-2"},n[19]||(n[19]=[e("i",{class:"fas fa-sync-alt me-1"},null,-1),c("LÃ m má»›i thÃ´ng tin khÃ¡ch hÃ ng ")])),e("button",{onClick:tn,class:"btn btn-primary btn-sm"},n[20]||(n[20]=[e("i",{class:"fas fa-user-edit me-1"},null,-1),c("Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n ")]))])])])])])):H(u).length>0?(i(),o("div",Un,[e("div",Rn,[e("div",jn,[e("div",Ln,[e("div",Vn,[n[23]||(n[23]=e("i",{class:"fas fa-info-circle me-2"},null,-1)),e("span",null,[c(" Hiá»ƒn thá»‹ "+a(M.value.length)+" / "+a(I.value.length)+" Ä‘Æ¡n hÃ ng ",1),e("strong",null,a(X(k.value)),1),v.value>1?(i(),o("span",Fn," (Trang "+a(h.value)+" / "+a(v.value)+") ",1)):p("",!0)])])]),I.value.length===0?(i(),o("div",zn,[n[25]||(n[25]=e("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),e("h4",qn,"KhÃ´ng cÃ³ Ä‘Æ¡n hÃ ng "+a(X(k.value).toLowerCase()),1),e("p",Jn,[k.value==="pending"?(i(),o("span",Xn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o Ä‘ang chá» thanh toÃ¡n.")):k.value==="paid"?(i(),o("span",Yn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o Ä‘Ã£ thanh toÃ¡n.")):k.value==="completed"?(i(),o("span",Qn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o hoÃ n thÃ nh.")):k.value==="cancelled"?(i(),o("span",Wn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o bá»‹ há»§y.")):p("",!0)]),e("button",{onClick:n[4]||(n[4]=s=>w("pending")),class:"btn btn-outline-primary"},n[24]||(n[24]=[e("i",{class:"fas fa-clock me-2"},null,-1),c("Xem Ä‘Æ¡n hÃ ng chá» thanh toÃ¡n ")]))])):(i(),o("div",Zn,[(i(!0),o(j,null,L(M.value,(s,d)=>(i(),o("div",{key:s.maHD,class:"order-card mb-4"},[e("div",nt,[e("div",tt,[e("div",et,[e("h5",st,[n[26]||(n[26]=e("i",{class:"fas fa-receipt me-2 text-primary"},null,-1)),c(" HÃ³a Ä‘Æ¡n #"+a(d+1),1)]),e("small",at,[n[27]||(n[27]=e("i",{class:"fas fa-calendar me-1"},null,-1)),c(" "+a(ln(s.ngayLap)),1)]),n[29]||(n[29]=e("br",null,null,-1)),e("small",lt,[n[28]||(n[28]=e("i",{class:"fas fa-hashtag me-1"},null,-1)),c(" MÃ£: "+a(s.maHD),1)])]),e("div",ot,[e("span",{class:f(on(s.trangThai))},a(B(s.trangThai)),3),e("div",it,[e("strong",rt,a(_(s.tongTien)),1)])])])]),e("div",ct,[e("div",ut,[e("div",dt,[e("h6",gt,[n[30]||(n[30]=e("i",{class:"fas fa-shopping-bag me-2 text-info"},null,-1)),c(" Sáº£n pháº©m Ä‘Ã£ Ä‘áº·t ("+a(s.chiTietHoaDon?.length||0)+") ",1)]),!s.chiTietHoaDon||s.chiTietHoaDon.length===0?(i(),o("div",ht,n[31]||(n[31]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),e("strong",null,"KhÃ´ng cÃ³ sáº£n pháº©m trong Ä‘Æ¡n hÃ ng nÃ y",-1),e("br",null,null,-1),e("small",{class:"text-muted"},"ÄÆ¡n hÃ ng cÃ³ thá»ƒ Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c chÆ°a cÃ³ chi tiáº¿t sáº£n pháº©m.",-1)]))):p("",!0),s.chiTietHoaDon&&s.chiTietHoaDon.length>0?(i(),o("div",mt,[(i(!0),o(j,null,L(s.chiTietHoaDon,r=>(i(),o("div",{key:r.maCTHD||r.id,class:"item-row d-flex align-items-center py-2 border-bottom"},[e("div",ft,[e("img",{src:sn(r.sanPham?.maSP||r.maSP),alt:r.sanPham?.tenSP||r.tenSP||"Sáº£n pháº©m",class:"rounded",style:{width:"50px",height:"50px","object-fit":"cover"},onError:an},null,40,pt)]),e("div",vt,[e("div",yt,a(r.sanPham?.tenSP||r.tenSP||"TÃªn sáº£n pháº©m"),1),e("small",bt," MÃ£ SP: "+a(r.sanPham?.maSP||r.maSP||"N/A"),1),n[32]||(n[32]=e("br",null,null,-1)),e("small",kt," Sá»‘ lÆ°á»£ng: "+a(r.soLuong)+" x "+a(_(r.donGiaBan||r.donGia)),1)]),e("div",Tt,[e("strong",null,a(_(r.thanhTienSauGiam||r.thanhTien||(r.donGiaBan||r.donGia)*r.soLuong)),1)])]))),128))])):p("",!0)]),e("div",xt,[e("div",Ht,[n[40]||(n[40]=e("h6",{class:"mb-3"},[e("i",{class:"fas fa-calculator me-2 text-warning"}),c(" Tá»•ng quan ")],-1)),e("div",_t,[n[33]||(n[33]=e("span",null,"Tá»•ng tiá»n hÃ ng:",-1)),e("span",null,a(_(s.tongTienHang||s.tongTien)),1)]),s.coupon||s.maKM?(i(),o("div",Kt,[n[34]||(n[34]=e("span",null,"MÃ£ khuyáº¿n mÃ£i:",-1)),e("span",null,a(s.coupon?.code||s.maKM||"N/A"),1)])):p("",!0),s.tienGiamGia>0?(i(),o("div",Ct,[n[35]||(n[35]=e("span",null,"Giáº£m giÃ¡:",-1)),e("span",null,"-"+a(_(s.tienGiamGia)),1)])):p("",!0),s.khuyenMai?(i(),o("div",wt,[n[36]||(n[36]=e("span",null,"ChÆ°Æ¡ng trÃ¬nh:",-1)),e("span",null,a(s.khuyenMai.tenChuongTrinh||s.khuyenMai.moTa||"Khuyáº¿n mÃ£i"),1)])):p("",!0),n[41]||(n[41]=e("hr",null,null,-1)),s.tongTienSauGiamGia&&s.tongTienSauGiamGia!==s.tongTien?(i(),o("div",Pt,[n[37]||(n[37]=e("span",null,"Tá»•ng sau giáº£m giÃ¡:",-1)),e("span",null,a(_(s.tongTienSauGiamGia)),1)])):p("",!0),e("div",It,[n[38]||(n[38]=e("span",null,"Tá»•ng thanh toÃ¡n:",-1)),e("span",St,a(_(s.tongTien)),1)]),s.diemTichLuy?(i(),o("div",Dt,[n[39]||(n[39]=e("small",null,"Äiá»ƒm tÃ­ch lÅ©y:",-1)),e("small",null,"+"+a(s.diemTichLuy)+" Ä‘iá»ƒm",1)])):p("",!0)])])])]),e("div",At,[e("div",Gt,[e("div",Ot,[e("small",Nt,[n[42]||(n[42]=e("i",{class:"fas fa-user me-1"},null,-1)),c(" "+a(s.khachHang?.hoTen||"KhÃ¡ch hÃ ng"),1)]),n[44]||(n[44]=e("br",null,null,-1)),e("small",Mt,[n[43]||(n[43]=e("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),c(" "+a(s.khachHang?.diaChi||"Äá»‹a chá»‰ giao hÃ ng"),1)])]),e("div",Et,[D(s.trangThai)?(i(),o("button",{key:0,onClick:r=>cn(s.maHD),class:"btn btn-success btn-sm me-2",disabled:H(y)},n[45]||(n[45]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),c("Checkout ")]),8,$t)):p("",!0),D(s.trangThai)?(i(),o("button",{key:1,onClick:r=>un(s.maHD),class:"btn btn-outline-danger btn-sm",disabled:H(y)},n[46]||(n[46]=[e("i",{class:"fas fa-times me-1"},null,-1),c("Há»§y Ä‘Æ¡n ")]),8,Bt)):p("",!0),D(s.trangThai)?p("",!0):(i(),o("small",Ut,[n[47]||(n[47]=e("i",{class:"fas fa-info-circle me-1"},null,-1)),c(" "+a(B(s.trangThai)),1)]))])])])]))),128))])),v.value>1?(i(),o("div",Rt,[e("nav",jt,[e("ul",Lt,[e("li",{class:f(["page-item",{disabled:h.value===1}])},[e("button",{class:"page-link",onClick:n[5]||(n[5]=s=>E(h.value-1)),disabled:h.value===1},n[48]||(n[48]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Vt)],2),(i(!0),o(j,null,L(W.value,s=>(i(),o("li",{key:s,class:f(["page-item",{active:s===h.value}])},[e("button",{class:"page-link",onClick:d=>E(s)},a(s),9,Ft)],2))),128)),e("li",{class:f(["page-item",{disabled:h.value===v.value}])},[e("button",{class:"page-link",onClick:n[6]||(n[6]=s=>E(h.value+1)),disabled:h.value===v.value},n[49]||(n[49]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,zt)],2)])]),e("div",qt,[e("small",Jt," Trang "+a(h.value)+" / "+a(v.value)+" ("+a(M.value.length)+" Ä‘Æ¡n hÃ ng) ",1)])])):p("",!0)])])])):(i(),o("div",Xt,[e("div",Yt,[e("div",Qt,[e("div",Wt,[n[51]||(n[51]=e("i",{class:"fas fa-box-open fa-4x text-muted mb-4"},null,-1)),n[52]||(n[52]=e("h3",{class:"text-muted"},"ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o",-1)),n[53]||(n[53]=e("p",{class:"text-muted mb-4"}," Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o. HÃ£y mua sáº¯m vÃ  táº¡o Ä‘Æ¡n hÃ ng Ä‘áº§u tiÃªn! ",-1)),yn(l,{to:"/",class:"btn btn-primary"},{default:bn(()=>n[50]||(n[50]=[e("i",{class:"fas fa-shopping-cart me-2"},null,-1),c("Mua sáº¯m ngay ")])),_:1,__:[50]})])])])]))])}}},ee=gn(Zt,[["__scopeId","data-v-d5a48e60"]]);export{ee as default};
