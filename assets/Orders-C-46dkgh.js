import{_ as gn,s as hn,r as x,S as mn,q as fn,h as C,i as pn,p as vn,A as R,T as Q,c as o,a as e,g as c,y as H,f,t as a,d as p,F as j,e as L,k as yn,l as bn,m as kn,B as V,o as i,C as Tn}from"./index-pi3KkAaC.js";const xn={class:"orders-page"},Hn={class:"container mt-5 pt-5"},_n={class:"row"},Kn={class:"col-12"},Cn={class:"d-flex justify-content-between align-items-center mb-4"},wn={class:"d-flex gap-2"},Pn=["disabled"],In={class:"order-tabs mb-4"},Sn={class:"nav nav-pills nav-fill"},Dn={class:"nav-item"},An={class:"nav-item"},Gn={class:"nav-item"},On={class:"nav-item"},Nn={key:0,class:"container"},Mn={key:1,class:"container"},En={class:"row justify-content-center"},$n={class:"col-md-8"},Bn={class:"alert alert-danger",role:"alert"},Un={key:2,class:"container"},Rn={class:"row"},jn={class:"col-12"},Ln={class:"tab-info mb-3"},Vn={class:"alert alert-info d-flex align-items-center"},Fn={key:0,class:"ms-2"},zn={key:0,class:"text-center py-5"},qn={class:"text-muted"},Jn={class:"text-muted"},Xn={key:0},Yn={key:1},Qn={key:2},Wn={key:3},Zn={key:1,class:"orders-list"},nt={class:"order-header p-3 bg-light rounded-top"},tt={class:"row align-items-center"},et={class:"col-md-6"},st={class:"mb-1"},at={class:"text-muted"},lt={class:"text-muted"},ot={class:"col-md-6 text-md-end"},it={class:"mt-2"},rt={class:"text-success"},ct={class:"order-items p-3"},ut={class:"row"},dt={class:"col-md-8"},gt={class:"mb-3"},ht={key:0,class:"alert alert-info"},mt={key:1,class:"items-list"},ft={class:"item-image me-3"},pt=["src","alt"],vt={class:"item-details flex-grow-1"},yt={class:"fw-bold"},bt={class:"text-muted"},kt={class:"text-muted"},Tt={class:"item-total text-end"},xt={class:"col-md-4"},Ht={class:"order-summary"},_t={class:"summary-item d-flex justify-content-between mb-2"},Kt={key:0,class:"summary-item d-flex justify-content-between mb-2 text-info"},Ct={key:1,class:"summary-item d-flex justify-content-between mb-2 text-success"},wt={key:2,class:"summary-item d-flex justify-content-between mb-2 text-info"},Pt={key:3,class:"summary-item d-flex justify-content-between mb-2 text-warning"},It={class:"summary-item d-flex justify-content-between mb-2 fw-bold"},St={class:"text-success"},Dt={key:4,class:"summary-item d-flex justify-content-between mb-2 text-muted"},At={class:"order-footer p-3 bg-light rounded-bottom"},Gt={class:"row align-items-center"},Ot={class:"col-md-6"},Nt={class:"text-muted"},Mt={class:"text-muted"},Et={class:"col-md-6 text-md-end"},$t=["onClick","disabled"],Bt=["onClick","disabled"],Ut={key:2,class:"text-muted"},Rt={key:2,class:"pagination-section mt-4"},jt={"aria-label":"Orders pagination"},Lt={class:"pagination justify-content-center"},Vt=["disabled"],Ft=["onClick"],zt=["disabled"],qt={class:"text-center mt-2"},Jt={class:"text-muted"},Xt={key:3,class:"container"},Yt={class:"row justify-content-center"},Qt={class:"col-md-8 text-center"},Wt={class:"empty-state"},F=4,Zt={__name:"Orders",setup(ne){const z=t=>{try{if(!t)return null;const n=JSON.parse(atob(t.split(".")[1]));return{email:n.sub,issuer:n.iss,role:n.role,exp:n.exp,iat:n.iat,raw:n}}catch(n){return console.error("Error decoding token:",n),null}},P=vn();let q,J;try{const t=hn();q=t.user,J=t.isAuthenticated}catch(t){console.error("❌ useAuth failed:",t),q=x(null),J=x(!1)}let u,y,b,O,N;try{const t=mn();u=t.orders,y=t.loading,b=t.error,O=t.loadCustomerOrders,N=t.cancelOrder,console.log("🔍 useOrders initialized successfully:"),console.log("   - orders:",u),console.log("   - orders.value:",u?.value),console.log("   - loading:",y),console.log("   - error:",b)}catch(t){console.error("❌ useOrders failed:",t),u=x([]),y=x(!1),b=x(null),O=async()=>({success:!1,error:"useOrders not available"}),N=async()=>({success:!1,error:"cancelOrder not available"})}let K;try{K=fn()}catch(t){console.error("❌ useCart failed:",t),K={maKH:null,isResolved:!1}}const g=x(null),k=x("pending");C(()=>u.value.length>0);const I=C(()=>{if(!u.value||u.value.length===0)return[];switch(k.value){case"pending":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0);case"paid":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===1);case"completed":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===2);case"cancelled":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===3);default:return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0)}}),S=C(()=>{if(!u.value||u.value.length===0)return{pending:0,paid:0,completed:0,cancelled:0};const t={pending:0,paid:0,completed:0,cancelled:0};return u.value.forEach(n=>{switch(typeof n.trangThai=="string"?parseInt(n.trangThai):n.trangThai){case 0:t.pending++;break;case 1:t.paid++;break;case 2:t.completed++;break;case 3:t.cancelled++;break}}),t}),h=x(1),v=C(()=>Math.ceil(I.value.length/F)),M=C(()=>{const t=(h.value-1)*F,n=t+F;return I.value.slice(t,n)}),W=C(()=>{const t=[];if(v.value<=5)for(let l=1;l<=v.value;l++)t.push(l);else{const l=Math.max(1,h.value-Math.floor(2.5)),s=Math.min(v.value,l+5-1);for(let d=l;d<=s;d++)t.push(d)}return t}),E=t=>{t>=1&&t<=v.value&&(h.value=t,window.scrollTo({top:0,behavior:"smooth"}))},Z=()=>{h.value=1},nn=(t,n)=>t?.maKH?t.maKH:t?.customer?.maKH?t.customer.maKH:t?.result?.maKH?t.result.maKH:t?.data?.maKH?t.data.maKH:null,$=async()=>{try{console.log("🔍 === GETTING MAKH FROM API ===");const t=R();if(!t)return console.log("❌ No token available"),null;const n=z(t);if(!n?.email)return console.log("❌ No email found in token"),null;const l=n.email;console.log("📧 User email from token:",l),console.log("👤 Step 1: Getting maNguoiDung from email API...");const s=await fetch(`${V.BASE_URL}/api/nguoidung/email/${encodeURIComponent(l)}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!s.ok)return console.log("⚠️ User email API failed with status:",s.status),null;const r=(await s.json()).maNguoiDung;console.log("✅ Got real maNguoiDung:",r),console.log("👤 Step 2: Getting customer info with maNguoiDung...");const m=await fetch(`${V.BASE_URL}/api/khachhang/by-nguoidung/${r}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!m.ok)return console.log("⚠️ Customer API failed with status:",m.status),null;const Y=await m.json();console.log("✅ Customer data from API:",Y);const U=nn(Y,"Customer API");return U?(console.log("✅ Found maKH from API:",U),U):(console.log("❌ No maKH found in customer data"),null)}catch(t){return console.error("❌ Error getting maKH from API:",t),null}},T=async()=>{try{console.log("🔄 === LOADING ORDERS ==="),console.log("🔄 Current orders state:",u?.value),console.log("🔄 Current loading state:",y?.value);let t=K?.maKH||g.value?.maKH||g.value?.khachHang?.maKH;if(console.log("🔑 Found maKH from sources:",{cart:K?.maKH,currentUser:g.value?.maKH,currentUserKhachHang:g.value?.khachHang?.maKH,final:t}),K?.maKH)t=K.maKH,console.log("✅ Using maKH from cart (most reliable):",t),g.value&&(g.value.maKH=t,g.value.khachHang={maKH:t});else if(!t){console.log("🔍 No maKH found from cart, trying API...");const l=await $();if(l)t=l,console.log("✅ Got maKH from API:",t),g.value&&(g.value.maKH=l,g.value.khachHang={maKH:l});else{console.log("❌ No maKH found from any source"),b.value="Không thể xác định thông tin khách hàng. Vui lòng đăng nhập lại hoặc cập nhật thông tin cá nhân trong trang Profile.";return}}console.log("🚀 Calling loadCustomerOrders with maKH:",t);const n=await O(t);console.log("✅ loadCustomerOrders completed:",n),console.log("📊 Orders after loading:",u?.value),console.log("📊 Orders length:",u?.value?.length)}catch(t){console.error("❌ Error loading orders:",t),b.value=t.message||"Có lỗi xảy ra khi tải danh sách đơn hàng"}},tn=()=>{P.push("/profile")},en=async()=>{try{const t=await $();return t?(g.value&&(g.value.maKH=t,g.value.khachHang={maKH:t}),await T(),!0):!1}catch(t){return console.error("❌ Error refreshing customer info:",t),!1}},sn=t=>{if(!t)return"/placeholder-image.jpg";const n=Tn.IMAGES.PRODUCT_IMAGES(t);return n[0]?`${V.BASE_URL}${n[0]}`:"/placeholder-image.jpg"},an=t=>{t.target.src="/placeholder-image.jpg"},ln=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},_=t=>t==null?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),on=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"badge bg-warning text-dark",1:"badge bg-success",2:"badge bg-info",3:"badge bg-danger",4:"badge bg-secondary"}[n]||"badge bg-secondary"},B=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"Chờ thanh toán",1:"Đã thanh toán",2:"Đang xử lý",3:"Đã hủy",4:"Hoàn trả"}[n]||`Không xác định (${t})`},D=t=>(typeof t=="string"?parseInt(t):t)===0,rn=async()=>{try{u.value=[],await T()}catch(t){console.error("❌ Error refreshing orders:",t),alert("Có lỗi xảy ra khi làm mới danh sách đơn hàng!")}},w=t=>{k.value=t,Z()},A=t=>k.value===t?"nav-link active":"nav-link",G=t=>{const n="badge rounded-pill ms-2";switch(t){case"pending":return`${n} bg-warning text-dark`;case"paid":return`${n} bg-success`;case"completed":return`${n} bg-info`;case"cancelled":return`${n} bg-danger`;default:return`${n} bg-warning text-dark`}},X=t=>{switch(t){case"pending":return"chờ thanh toán";case"paid":return"đã thanh toán";case"completed":return"hoàn thành";case"cancelled":return"đã hủy";default:return"chờ thanh toán"}},cn=async t=>{try{if(!t){alert("Không có mã đơn hàng để checkout!");return}const n=u.value.find(l=>l.maHD===t);if(n){if(n.trangThai!==0){alert("Chỉ có thể checkout đơn hàng đang chờ thanh toán!");return}const l={maHD:n.maHD,tongTien:n.tongTien,chiTietHoaDon:n.chiTietHoaDon||n.chiTietList||[],timestamp:new Date().toISOString(),source:"orders-page",coupon:n.coupon||null,tienGiamGia:n.tienGiamGia||0,tongTienSauGiamGia:n.tongTienSauGiamGia||n.tongTien},s=(n.chiTietHoaDon||n.chiTietList||[]).map(d=>d.sanPham?.maSP||d.maSP).filter(Boolean);localStorage.setItem("easymart-invoice",JSON.stringify(l)),localStorage.setItem("easymart-selected-items",JSON.stringify(s)),console.log("✅ Saved to localStorage:",{invoice:l,selectedItems:s}),P.push("/checkout")}else alert("Không tìm thấy thông tin đơn hàng!")}catch(n){console.error("❌ Error during checkout:",n),alert("Không thể chuyển đến trang checkout. Vui lòng thử lại!")}},un=async t=>{const n=u.value.find(l=>l.maHD===t);if(!n){alert("Không tìm thấy đơn hàng!");return}if(!D(n.trangThai)){const l=B(n.trangThai);alert(`Không thể hủy đơn hàng này. Trạng thái hiện tại: ${l}`);return}if(confirm("Bạn có chắc chắn muốn hủy đơn hàng này?"))try{console.log("❌ Cancelling order:",t),await N(t,"Khách hàng yêu cầu hủy đơn hàng"),console.log("🔄 Refreshing orders after successful cancellation..."),await T(),alert("Đã hủy đơn hàng thành công!"),console.log("✅ Order cancelled and UI updated successfully")}catch(l){console.error("❌ Error cancelling order:",l);let s=l.message||"Lỗi không xác định",d=!1;s.includes("đã được hủy trước đó")||s.includes("already cancelled")||s.includes("đã hủy")||s.includes("cancelled")?(s="Đơn hàng này đã được hủy trước đó.",d=!0):s.includes("không thể hủy")||s.includes("cannot cancel")||s.includes("không được phép")||s.includes("not allowed")?(s="Không thể hủy đơn hàng này do trạng thái hiện tại không cho phép.",d=!0):s.includes("Bad Request")||s.includes("400")?(s="Yêu cầu hủy đơn hàng không hợp lệ. Có thể đơn hàng đã được xử lý hoặc không tồn tại.",d=!0):s.includes("Unauthorized")||s.includes("401")?s="Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.":s.includes("Forbidden")||s.includes("403")?s="Bạn không có quyền hủy đơn hàng này.":(s.includes("Not Found")||s.includes("404"))&&(s="Không tìm thấy đơn hàng này.",d=!0),alert(`Không thể hủy đơn hàng: ${s}`),d&&(console.log("🔄 Auto-refreshing orders due to error..."),setTimeout(()=>{T()},2e3))}},dn=()=>{const t=localStorage.getItem("easymart-user"),n=R();return t&&n};return pn(async()=>{try{console.log("🚀 === ORDERS PAGE MOUNTED ===");const t=dn();if(console.log("🔐 User login status:",t),!t){console.log("❌ User not logged in, redirecting to login"),P.push("/login");return}const n=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!n){console.log("❌ No user data in localStorage, redirecting to login"),P.push("/login");return}console.log("📦 User data loaded:",n);const l=R();if(l){const m=z(l);m?.email&&(n.email=m.email,console.log("📧 Added email from token:",m.email))}g.value=n;const s=n.maKH||n.customerInfo?.maKH;if(console.log("🔑 Existing maKH from user data:",s),s)console.log("✅ maKH already available, loading orders directly"),await T();else{console.log("🔍 No maKH found, trying to get from API...");const m=await $();m?(console.log("✅ Got maKH from API, updating user data and loading orders"),g.value.maKH=m,g.value.khachHang={maKH:m},await T()):(console.log("❌ Could not get maKH from API, showing error"),b.value="Không thể xác định thông tin khách hàng. Vui lòng đăng nhập lại hoặc cập nhật thông tin cá nhân trong trang Profile.")}const d=setInterval(async()=>{try{console.log("🔄 Auto-refreshing orders..."),await T()}catch(m){console.warn("⚠️ Auto-refresh failed:",m.message)}},3e4);Q(()=>{d&&clearInterval(d)})}catch(t){console.error("❌ Error in onMounted:",t),b.value="Có lỗi xảy ra khi khởi tạo trang. Vui lòng thử lại."}}),Q(()=>{console.log("🧹 Orders page unmounted, cleaning up...")}),(t,n)=>{const l=kn("router-link");return i(),o("div",xn,[e("div",Hn,[e("div",_n,[e("div",Kn,[e("div",Cn,[n[8]||(n[8]=e("h1",{class:"text-primary mb-0"},[e("i",{class:"fas fa-box me-3"}),c("Đơn hàng của tôi ")],-1)),e("div",wn,[e("button",{onClick:rn,class:"btn btn-outline-primary",disabled:H(y)},[e("i",{class:f(["fas fa-sync-alt me-2",{"fa-spin":H(y)}])},null,2),n[7]||(n[7]=c(" Làm mới "))],8,Pn)])]),e("div",In,[e("ul",Sn,[e("li",Dn,[e("button",{class:f(A("pending")),onClick:n[0]||(n[0]=s=>w("pending"))},[n[9]||(n[9]=e("i",{class:"fas fa-clock me-2"},null,-1)),n[10]||(n[10]=c("Chờ thanh toán ")),e("span",{class:f(G("pending"))},a(S.value.pending),3)],2)]),e("li",An,[e("button",{class:f(A("paid")),onClick:n[1]||(n[1]=s=>w("paid"))},[n[11]||(n[11]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),n[12]||(n[12]=c("Đã thanh toán ")),e("span",{class:f(G("paid"))},a(S.value.paid),3)],2)]),e("li",Gn,[e("button",{class:f(A("completed")),onClick:n[2]||(n[2]=s=>w("completed"))},[n[13]||(n[13]=e("i",{class:"fas fa-shipping-fast me-2"},null,-1)),n[14]||(n[14]=c("Hoàn thành ")),e("span",{class:f(G("completed"))},a(S.value.completed),3)],2)]),e("li",On,[e("button",{class:f(A("cancelled")),onClick:n[3]||(n[3]=s=>w("cancelled"))},[n[15]||(n[15]=e("i",{class:"fas fa-times-circle me-2"},null,-1)),n[16]||(n[16]=c("Đã hủy ")),e("span",{class:f(G("cancelled"))},a(S.value.cancelled),3)],2)])])])])])]),H(y)?(i(),o("div",Nn,n[17]||(n[17]=[e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-8 text-center"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Đang tải...")]),e("p",{class:"mt-3 text-muted"},"Đang tải danh sách đơn hàng...")])],-1)]))):H(b)?(i(),o("div",Mn,[e("div",En,[e("div",$n,[e("div",Bn,[n[21]||(n[21]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n[22]||(n[22]=e("strong",null,"Lỗi:",-1)),c(" "+a(H(b))+" ",1),e("div",{class:"mt-3"},[e("button",{onClick:T,class:"btn btn-outline-danger btn-sm me-2"},n[18]||(n[18]=[e("i",{class:"fas fa-redo me-1"},null,-1),c("Thử lại ")])),e("button",{onClick:en,class:"btn btn-outline-info btn-sm me-2"},n[19]||(n[19]=[e("i",{class:"fas fa-sync-alt me-1"},null,-1),c("Làm mới thông tin khách hàng ")])),e("button",{onClick:tn,class:"btn btn-primary btn-sm"},n[20]||(n[20]=[e("i",{class:"fas fa-user-edit me-1"},null,-1),c("Cập nhật thông tin cá nhân ")]))])])])])])):H(u).length>0?(i(),o("div",Un,[e("div",Rn,[e("div",jn,[e("div",Ln,[e("div",Vn,[n[23]||(n[23]=e("i",{class:"fas fa-info-circle me-2"},null,-1)),e("span",null,[c(" Hiển thị "+a(M.value.length)+" / "+a(I.value.length)+" đơn hàng ",1),e("strong",null,a(X(k.value)),1),v.value>1?(i(),o("span",Fn," (Trang "+a(h.value)+" / "+a(v.value)+") ",1)):p("",!0)])])]),I.value.length===0?(i(),o("div",zn,[n[25]||(n[25]=e("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),e("h4",qn,"Không có đơn hàng "+a(X(k.value).toLowerCase()),1),e("p",Jn,[k.value==="pending"?(i(),o("span",Xn,"Bạn chưa có đơn hàng nào đang chờ thanh toán.")):k.value==="paid"?(i(),o("span",Yn,"Bạn chưa có đơn hàng nào đã thanh toán.")):k.value==="completed"?(i(),o("span",Qn,"Bạn chưa có đơn hàng nào hoàn thành.")):k.value==="cancelled"?(i(),o("span",Wn,"Bạn chưa có đơn hàng nào bị hủy.")):p("",!0)]),e("button",{onClick:n[4]||(n[4]=s=>w("pending")),class:"btn btn-outline-primary"},n[24]||(n[24]=[e("i",{class:"fas fa-clock me-2"},null,-1),c("Xem đơn hàng chờ thanh toán ")]))])):(i(),o("div",Zn,[(i(!0),o(j,null,L(M.value,(s,d)=>(i(),o("div",{key:s.maHD,class:"order-card mb-4"},[e("div",nt,[e("div",tt,[e("div",et,[e("h5",st,[n[26]||(n[26]=e("i",{class:"fas fa-receipt me-2 text-primary"},null,-1)),c(" Hóa đơn #"+a(d+1),1)]),e("small",at,[n[27]||(n[27]=e("i",{class:"fas fa-calendar me-1"},null,-1)),c(" "+a(ln(s.ngayLap)),1)]),n[29]||(n[29]=e("br",null,null,-1)),e("small",lt,[n[28]||(n[28]=e("i",{class:"fas fa-hashtag me-1"},null,-1)),c(" Mã: "+a(s.maHD),1)])]),e("div",ot,[e("span",{class:f(on(s.trangThai))},a(B(s.trangThai)),3),e("div",it,[e("strong",rt,a(_(s.tongTien)),1)])])])]),e("div",ct,[e("div",ut,[e("div",dt,[e("h6",gt,[n[30]||(n[30]=e("i",{class:"fas fa-shopping-bag me-2 text-info"},null,-1)),c(" Sản phẩm đã đặt ("+a(s.chiTietHoaDon?.length||0)+") ",1)]),!s.chiTietHoaDon||s.chiTietHoaDon.length===0?(i(),o("div",ht,n[31]||(n[31]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),e("strong",null,"Không có sản phẩm trong đơn hàng này",-1),e("br",null,null,-1),e("small",{class:"text-muted"},"Đơn hàng có thể đã được xử lý hoặc chưa có chi tiết sản phẩm.",-1)]))):p("",!0),s.chiTietHoaDon&&s.chiTietHoaDon.length>0?(i(),o("div",mt,[(i(!0),o(j,null,L(s.chiTietHoaDon,r=>(i(),o("div",{key:r.maCTHD||r.id,class:"item-row d-flex align-items-center py-2 border-bottom"},[e("div",ft,[e("img",{src:sn(r.sanPham?.maSP||r.maSP),alt:r.sanPham?.tenSP||r.tenSP||"Sản phẩm",class:"rounded",style:{width:"50px",height:"50px","object-fit":"cover"},onError:an},null,40,pt)]),e("div",vt,[e("div",yt,a(r.sanPham?.tenSP||r.tenSP||"Tên sản phẩm"),1),e("small",bt," Mã SP: "+a(r.sanPham?.maSP||r.maSP||"N/A"),1),n[32]||(n[32]=e("br",null,null,-1)),e("small",kt," Số lượng: "+a(r.soLuong)+" x "+a(_(r.donGiaBan||r.donGia)),1)]),e("div",Tt,[e("strong",null,a(_(r.thanhTienSauGiam||r.thanhTien||(r.donGiaBan||r.donGia)*r.soLuong)),1)])]))),128))])):p("",!0)]),e("div",xt,[e("div",Ht,[n[40]||(n[40]=e("h6",{class:"mb-3"},[e("i",{class:"fas fa-calculator me-2 text-warning"}),c(" Tổng quan ")],-1)),e("div",_t,[n[33]||(n[33]=e("span",null,"Tổng tiền hàng:",-1)),e("span",null,a(_(s.tongTienHang||s.tongTien)),1)]),s.coupon||s.maKM?(i(),o("div",Kt,[n[34]||(n[34]=e("span",null,"Mã khuyến mãi:",-1)),e("span",null,a(s.coupon?.code||s.maKM||"N/A"),1)])):p("",!0),s.tienGiamGia>0?(i(),o("div",Ct,[n[35]||(n[35]=e("span",null,"Giảm giá:",-1)),e("span",null,"-"+a(_(s.tienGiamGia)),1)])):p("",!0),s.khuyenMai?(i(),o("div",wt,[n[36]||(n[36]=e("span",null,"Chương trình:",-1)),e("span",null,a(s.khuyenMai.tenChuongTrinh||s.khuyenMai.moTa||"Khuyến mãi"),1)])):p("",!0),n[41]||(n[41]=e("hr",null,null,-1)),s.tongTienSauGiamGia&&s.tongTienSauGiamGia!==s.tongTien?(i(),o("div",Pt,[n[37]||(n[37]=e("span",null,"Tổng sau giảm giá:",-1)),e("span",null,a(_(s.tongTienSauGiamGia)),1)])):p("",!0),e("div",It,[n[38]||(n[38]=e("span",null,"Tổng thanh toán:",-1)),e("span",St,a(_(s.tongTien)),1)]),s.diemTichLuy?(i(),o("div",Dt,[n[39]||(n[39]=e("small",null,"Điểm tích lũy:",-1)),e("small",null,"+"+a(s.diemTichLuy)+" điểm",1)])):p("",!0)])])])]),e("div",At,[e("div",Gt,[e("div",Ot,[e("small",Nt,[n[42]||(n[42]=e("i",{class:"fas fa-user me-1"},null,-1)),c(" "+a(s.khachHang?.hoTen||"Khách hàng"),1)]),n[44]||(n[44]=e("br",null,null,-1)),e("small",Mt,[n[43]||(n[43]=e("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),c(" "+a(s.khachHang?.diaChi||"Địa chỉ giao hàng"),1)])]),e("div",Et,[D(s.trangThai)?(i(),o("button",{key:0,onClick:r=>cn(s.maHD),class:"btn btn-success btn-sm me-2",disabled:H(y)},n[45]||(n[45]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),c("Checkout ")]),8,$t)):p("",!0),D(s.trangThai)?(i(),o("button",{key:1,onClick:r=>un(s.maHD),class:"btn btn-outline-danger btn-sm",disabled:H(y)},n[46]||(n[46]=[e("i",{class:"fas fa-times me-1"},null,-1),c("Hủy đơn ")]),8,Bt)):p("",!0),D(s.trangThai)?p("",!0):(i(),o("small",Ut,[n[47]||(n[47]=e("i",{class:"fas fa-info-circle me-1"},null,-1)),c(" "+a(B(s.trangThai)),1)]))])])])]))),128))])),v.value>1?(i(),o("div",Rt,[e("nav",jt,[e("ul",Lt,[e("li",{class:f(["page-item",{disabled:h.value===1}])},[e("button",{class:"page-link",onClick:n[5]||(n[5]=s=>E(h.value-1)),disabled:h.value===1},n[48]||(n[48]=[e("i",{class:"fas fa-chevron-left"},null,-1)]),8,Vt)],2),(i(!0),o(j,null,L(W.value,s=>(i(),o("li",{key:s,class:f(["page-item",{active:s===h.value}])},[e("button",{class:"page-link",onClick:d=>E(s)},a(s),9,Ft)],2))),128)),e("li",{class:f(["page-item",{disabled:h.value===v.value}])},[e("button",{class:"page-link",onClick:n[6]||(n[6]=s=>E(h.value+1)),disabled:h.value===v.value},n[49]||(n[49]=[e("i",{class:"fas fa-chevron-right"},null,-1)]),8,zt)],2)])]),e("div",qt,[e("small",Jt," Trang "+a(h.value)+" / "+a(v.value)+" ("+a(M.value.length)+" đơn hàng) ",1)])])):p("",!0)])])])):(i(),o("div",Xt,[e("div",Yt,[e("div",Qt,[e("div",Wt,[n[51]||(n[51]=e("i",{class:"fas fa-box-open fa-4x text-muted mb-4"},null,-1)),n[52]||(n[52]=e("h3",{class:"text-muted"},"Chưa có đơn hàng nào",-1)),n[53]||(n[53]=e("p",{class:"text-muted mb-4"}," Bạn chưa có đơn hàng nào. Hãy mua sắm và tạo đơn hàng đầu tiên! ",-1)),yn(l,{to:"/",class:"btn btn-primary"},{default:bn(()=>n[50]||(n[50]=[e("i",{class:"fas fa-shopping-cart me-2"},null,-1),c("Mua sắm ngay ")])),_:1,__:[50]})])])])]))])}}},ee=gn(Zt,[["__scopeId","data-v-d5a48e60"]]);export{ee as default};
