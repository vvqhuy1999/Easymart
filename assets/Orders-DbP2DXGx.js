import{_ as an,x as on,r as H,R as ln,p as rn,q as G,h as cn,m as un,S as $,T as V,c as r,a as e,g as i,l as k,f as m,t as o,d as v,F,e as z,i as dn,j as gn,k as hn,A as R,o as c,z as mn}from"./index-wvKgaFqi.js";const fn={class:"orders-page"},pn={class:"container mt-5 pt-5"},yn={class:"row"},vn={class:"col-12"},bn={class:"d-flex justify-content-between align-items-center mb-4"},kn={class:"d-flex gap-2"},Hn=["disabled"],Tn={class:"order-tabs mb-4"},_n={class:"nav nav-pills nav-fill"},xn={class:"nav-item"},Kn={class:"nav-item"},Cn={class:"nav-item"},wn={class:"nav-item"},In={key:0,class:"container"},Sn={key:1,class:"container"},Dn={class:"row justify-content-center"},Pn={class:"col-md-8"},An={class:"alert alert-danger",role:"alert"},On={key:2,class:"container"},Nn={class:"row"},En={class:"col-12"},Gn={class:"tab-info mb-3"},$n={class:"alert alert-info d-flex align-items-center"},Rn={key:0,class:"text-center py-5"},Un={class:"text-muted"},Bn={class:"text-muted"},Mn={key:0},Ln={key:1},jn={key:2},Vn={key:3},Fn={key:1,class:"orders-list"},zn={class:"order-header p-3 bg-light rounded-top"},qn={class:"row align-items-center"},Jn={class:"col-md-6"},Xn={class:"mb-1"},Yn={class:"text-muted"},Qn={class:"text-muted"},Wn={class:"col-md-6 text-md-end"},Zn={class:"mt-2"},nt={class:"text-success"},tt={class:"order-items p-3"},et={class:"row"},st={class:"col-md-8"},at={class:"mb-3"},ot={key:0,class:"alert alert-info"},lt={key:1,class:"items-list"},rt={class:"item-image me-3"},it=["src","alt"],ct={class:"item-details flex-grow-1"},ut={class:"fw-bold"},dt={class:"text-muted"},gt={class:"text-muted"},ht={class:"item-total text-end"},mt={class:"col-md-4"},ft={class:"order-summary"},pt={class:"summary-item d-flex justify-content-between mb-2"},yt={key:0,class:"summary-item d-flex justify-content-between mb-2 text-success"},vt={key:1,class:"summary-item d-flex justify-content-between mb-2 text-info"},bt={class:"summary-item d-flex justify-content-between mb-2 fw-bold"},kt={class:"text-success"},Ht={key:2,class:"summary-item d-flex justify-content-between mb-2 text-muted"},Tt={class:"order-footer p-3 bg-light rounded-bottom"},_t={class:"row align-items-center"},xt={class:"col-md-6"},Kt={class:"text-muted"},Ct={class:"text-muted"},wt={class:"col-md-6 text-md-end"},It=["onClick","disabled"],St=["onClick","disabled"],Dt={key:2,class:"text-muted"},Pt={key:3,class:"container"},At={class:"row justify-content-center"},Ot={class:"col-md-8 text-center"},Nt={class:"empty-state"},Et={__name:"Orders",setup(Gt){const U=t=>{try{if(!t)return null;const n=JSON.parse(atob(t.split(".")[1]));return{email:n.sub,issuer:n.iss,role:n.role,exp:n.exp,iat:n.iat,raw:n}}catch(n){return console.error("Error decoding token:",n),null}},K=un();let B,M;try{const t=on();B=t.user,M=t.isAuthenticated}catch(t){console.error("âŒ useAuth failed:",t),B=H(null),M=H(!1)}let u,f,p,D,P;try{const t=ln();u=t.orders,f=t.loading,p=t.error,D=t.loadCustomerOrders,P=t.cancelOrder,console.log("ðŸ” useOrders initialized successfully:"),console.log("   - orders:",u),console.log("   - orders.value:",u?.value),console.log("   - loading:",f),console.log("   - error:",p)}catch(t){console.error("âŒ useOrders failed:",t),u=H([]),f=H(!1),p=H(null),D=async()=>({success:!1,error:"useOrders not available"}),P=async()=>({success:!1,error:"cancelOrder not available"})}let T;try{T=rn()}catch(t){console.error("âŒ useCart failed:",t),T={maKH:null,isResolved:!1}}const d=H(null),y=H("pending");G(()=>u.value.length>0);const A=G(()=>{if(!u.value||u.value.length===0)return[];switch(y.value){case"pending":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0);case"paid":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===1);case"completed":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===2);case"cancelled":return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===3);default:return u.value.filter(t=>(typeof t.trangThai=="string"?parseInt(t.trangThai):t.trangThai)===0)}}),C=G(()=>{if(!u.value||u.value.length===0)return{pending:0,paid:0,completed:0,cancelled:0};const t={pending:0,paid:0,completed:0,cancelled:0};return u.value.forEach(n=>{switch(typeof n.trangThai=="string"?parseInt(n.trangThai):n.trangThai){case 0:t.pending++;break;case 1:t.paid++;break;case 2:t.completed++;break;case 3:t.cancelled++;break}}),t}),q=(t,n)=>t?.maKH?t.maKH:t?.customer?.maKH?t.customer.maKH:t?.result?.maKH?t.result.maKH:t?.data?.maKH?t.data.maKH:null,O=async()=>{try{console.log("ðŸ” === GETTING MAKH FROM API ===");const t=$();if(!t)return console.log("âŒ No token available"),null;const n=U(t);if(!n?.email)return console.log("âŒ No email found in token"),null;const a=n.email;console.log("ðŸ“§ User email from token:",a),console.log("ðŸ‘¤ Step 1: Getting maNguoiDung from email API...");const s=await fetch(`${R.BASE_URL}/api/nguoidung/email/${encodeURIComponent(a)}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!s.ok)return console.log("âš ï¸ User email API failed with status:",s.status),null;const l=(await s.json()).maNguoiDung;console.log("âœ… Got real maNguoiDung:",l),console.log("ðŸ‘¤ Step 2: Getting customer info with maNguoiDung...");const h=await fetch(`${R.BASE_URL}/api/khachhang/by-nguoidung/${l}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!h.ok)return console.log("âš ï¸ Customer API failed with status:",h.status),null;const j=await h.json();console.log("âœ… Customer data from API:",j);const E=q(j,"Customer API");return E?(console.log("âœ… Found maKH from API:",E),E):(console.log("âŒ No maKH found in customer data"),null)}catch(t){return console.error("âŒ Error getting maKH from API:",t),null}},b=async()=>{try{console.log("ðŸ”„ === LOADING ORDERS ==="),console.log("ðŸ”„ Current orders state:",u?.value),console.log("ðŸ”„ Current loading state:",f?.value);let t=T?.maKH||d.value?.maKH||d.value?.khachHang?.maKH;if(console.log("ðŸ”‘ Found maKH from sources:",{cart:T?.maKH,currentUser:d.value?.maKH,currentUserKhachHang:d.value?.khachHang?.maKH,final:t}),T?.maKH)t=T.maKH,console.log("âœ… Using maKH from cart (most reliable):",t),d.value&&(d.value.maKH=t,d.value.khachHang={maKH:t});else if(!t){console.log("ðŸ” No maKH found from cart, trying API...");const a=await O();if(a)t=a,console.log("âœ… Got maKH from API:",t),d.value&&(d.value.maKH=a,d.value.khachHang={maKH:a});else{console.log("âŒ No maKH found from any source"),p.value="KhÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh thÃ´ng tin khÃ¡ch hÃ ng. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i hoáº·c cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n trong trang Profile.";return}}console.log("ðŸš€ Calling loadCustomerOrders with maKH:",t);const n=await D(t);console.log("âœ… loadCustomerOrders completed:",n),console.log("ðŸ“Š Orders after loading:",u?.value),console.log("ðŸ“Š Orders length:",u?.value?.length)}catch(t){console.error("âŒ Error loading orders:",t),p.value=t.message||"CÃ³ lá»—i xáº£y ra khi táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng"}},J=()=>{K.push("/profile")},X=async()=>{try{const t=await O();return t?(d.value&&(d.value.maKH=t,d.value.khachHang={maKH:t}),await b(),!0):!1}catch(t){return console.error("âŒ Error refreshing customer info:",t),!1}},Y=t=>{if(!t)return"/placeholder-image.jpg";const n=mn.IMAGES.PRODUCT_IMAGES(t);return n[0]?`${R.BASE_URL}${n[0]}`:"/placeholder-image.jpg"},Q=t=>{t.target.src="/placeholder-image.jpg"},W=t=>{if(!t)return"N/A";try{return new Date(t).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}},_=t=>t==null?"0 â‚«":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t),Z=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"badge bg-warning text-dark",1:"badge bg-success",2:"badge bg-info",3:"badge bg-danger",4:"badge bg-secondary"}[n]||"badge bg-secondary"},N=t=>{const n=typeof t=="string"?parseInt(t):t;return{0:"Chá» thanh toÃ¡n",1:"ÄÃ£ thanh toÃ¡n",2:"Äang xá»­ lÃ½",3:"ÄÃ£ há»§y",4:"HoÃ n tráº£"}[n]||`KhÃ´ng xÃ¡c Ä‘á»‹nh (${t})`},w=t=>(typeof t=="string"?parseInt(t):t)===0,nn=async()=>{try{u.value=[],await b()}catch(t){console.error("âŒ Error refreshing orders:",t),alert("CÃ³ lá»—i xáº£y ra khi lÃ m má»›i danh sÃ¡ch Ä‘Æ¡n hÃ ng!")}},x=t=>{y.value=t},I=t=>y.value===t?"nav-link active":"nav-link",S=t=>{const n="badge rounded-pill ms-2";switch(t){case"pending":return`${n} bg-warning text-dark`;case"paid":return`${n} bg-success`;case"completed":return`${n} bg-info`;case"cancelled":return`${n} bg-danger`;default:return`${n} bg-warning text-dark`}},L=t=>{switch(t){case"pending":return"chá» thanh toÃ¡n";case"paid":return"Ä‘Ã£ thanh toÃ¡n";case"completed":return"hoÃ n thÃ nh";case"cancelled":return"Ä‘Ã£ há»§y";default:return"chá» thanh toÃ¡n"}},tn=async t=>{try{if(!t){alert("KhÃ´ng cÃ³ mÃ£ Ä‘Æ¡n hÃ ng Ä‘á»ƒ checkout!");return}const n=u.value.find(a=>a.maHD===t);if(n){if(n.trangThai!==0){alert("Chá»‰ cÃ³ thá»ƒ checkout Ä‘Æ¡n hÃ ng Ä‘ang chá» thanh toÃ¡n!");return}const a={maHD:n.maHD,tongTien:n.tongTien,chiTietHoaDon:n.chiTietHoaDon||n.chiTietList||[],timestamp:new Date().toISOString(),source:"orders-page"},s=(n.chiTietHoaDon||n.chiTietList||[]).map(g=>g.sanPham?.maSP||g.maSP).filter(Boolean);localStorage.setItem("easymart-invoice",JSON.stringify(a)),localStorage.setItem("easymart-selected-items",JSON.stringify(s)),console.log("âœ… Saved to localStorage:",{invoice:a,selectedItems:s}),K.push("/checkout")}else alert("KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘Æ¡n hÃ ng!")}catch(n){console.error("âŒ Error during checkout:",n),alert("KhÃ´ng thá»ƒ chuyá»ƒn Ä‘áº¿n trang checkout. Vui lÃ²ng thá»­ láº¡i!")}},en=async t=>{const n=u.value.find(a=>a.maHD===t);if(!n){alert("KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng!");return}if(!w(n.trangThai)){const a=N(n.trangThai);alert(`KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng nÃ y. Tráº¡ng thÃ¡i hiá»‡n táº¡i: ${a}`);return}if(confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n há»§y Ä‘Æ¡n hÃ ng nÃ y?"))try{console.log("âŒ Cancelling order:",t),await P(t,"KhÃ¡ch hÃ ng yÃªu cáº§u há»§y Ä‘Æ¡n hÃ ng"),console.log("ðŸ”„ Refreshing orders after successful cancellation..."),await b(),alert("ÄÃ£ há»§y Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng!"),console.log("âœ… Order cancelled and UI updated successfully")}catch(a){console.error("âŒ Error cancelling order:",a);let s=a.message||"Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh",g=!1;s.includes("Ä‘Ã£ Ä‘Æ°á»£c há»§y trÆ°á»›c Ä‘Ã³")||s.includes("already cancelled")||s.includes("Ä‘Ã£ há»§y")||s.includes("cancelled")?(s="ÄÆ¡n hÃ ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c há»§y trÆ°á»›c Ä‘Ã³.",g=!0):s.includes("khÃ´ng thá»ƒ há»§y")||s.includes("cannot cancel")||s.includes("khÃ´ng Ä‘Æ°á»£c phÃ©p")||s.includes("not allowed")?(s="KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng nÃ y do tráº¡ng thÃ¡i hiá»‡n táº¡i khÃ´ng cho phÃ©p.",g=!0):s.includes("Bad Request")||s.includes("400")?(s="YÃªu cáº§u há»§y Ä‘Æ¡n hÃ ng khÃ´ng há»£p lá»‡. CÃ³ thá»ƒ Ä‘Æ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c khÃ´ng tá»“n táº¡i.",g=!0):s.includes("Unauthorized")||s.includes("401")?s="PhiÃªn Ä‘Äƒng nháº­p Ä‘Ã£ háº¿t háº¡n. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i.":s.includes("Forbidden")||s.includes("403")?s="Báº¡n khÃ´ng cÃ³ quyá»n há»§y Ä‘Æ¡n hÃ ng nÃ y.":(s.includes("Not Found")||s.includes("404"))&&(s="KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng nÃ y.",g=!0),alert(`KhÃ´ng thá»ƒ há»§y Ä‘Æ¡n hÃ ng: ${s}`),g&&(console.log("ðŸ”„ Auto-refreshing orders due to error..."),setTimeout(()=>{b()},2e3))}},sn=()=>{const t=localStorage.getItem("easymart-user"),n=$();return t&&n};return cn(async()=>{try{console.log("ðŸš€ === ORDERS PAGE MOUNTED ===");const t=sn();if(console.log("ðŸ” User login status:",t),!t){console.log("âŒ User not logged in, redirecting to login"),K.push("/login");return}const n=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!n){console.log("âŒ No user data in localStorage, redirecting to login"),K.push("/login");return}console.log("ðŸ“¦ User data loaded:",n);const a=$();if(a){const h=U(a);h?.email&&(n.email=h.email,console.log("ðŸ“§ Added email from token:",h.email))}d.value=n;const s=n.maKH||n.customerInfo?.maKH;if(console.log("ðŸ”‘ Existing maKH from user data:",s),s)console.log("âœ… maKH already available, loading orders directly"),await b();else{console.log("ðŸ” No maKH found, trying to get from API...");const h=await O();h?(console.log("âœ… Got maKH from API, updating user data and loading orders"),d.value.maKH=h,d.value.khachHang={maKH:h},await b()):(console.log("âŒ Could not get maKH from API, showing error"),p.value="KhÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh thÃ´ng tin khÃ¡ch hÃ ng. Vui lÃ²ng Ä‘Äƒng nháº­p láº¡i hoáº·c cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n trong trang Profile.")}const g=setInterval(async()=>{try{console.log("ðŸ”„ Auto-refreshing orders..."),await b()}catch(h){console.warn("âš ï¸ Auto-refresh failed:",h.message)}},3e4);V(()=>{g&&clearInterval(g)})}catch(t){console.error("âŒ Error in onMounted:",t),p.value="CÃ³ lá»—i xáº£y ra khi khá»Ÿi táº¡o trang. Vui lÃ²ng thá»­ láº¡i."}}),V(()=>{console.log("ðŸ§¹ Orders page unmounted, cleaning up...")}),(t,n)=>{const a=hn("router-link");return c(),r("div",fn,[e("div",pn,[e("div",yn,[e("div",vn,[e("div",bn,[n[6]||(n[6]=e("h1",{class:"text-primary mb-0"},[e("i",{class:"fas fa-box me-3"}),i("ÄÆ¡n hÃ ng cá»§a tÃ´i ")],-1)),e("div",kn,[e("button",{onClick:nn,class:"btn btn-outline-primary",disabled:k(f)},[e("i",{class:m(["fas fa-sync-alt me-2",{"fa-spin":k(f)}])},null,2),n[5]||(n[5]=i(" LÃ m má»›i "))],8,Hn)])]),e("div",Tn,[e("ul",_n,[e("li",xn,[e("button",{class:m(I("pending")),onClick:n[0]||(n[0]=s=>x("pending"))},[n[7]||(n[7]=e("i",{class:"fas fa-clock me-2"},null,-1)),n[8]||(n[8]=i("Chá» thanh toÃ¡n ")),e("span",{class:m(S("pending"))},o(C.value.pending),3)],2)]),e("li",Kn,[e("button",{class:m(I("paid")),onClick:n[1]||(n[1]=s=>x("paid"))},[n[9]||(n[9]=e("i",{class:"fas fa-check-circle me-2"},null,-1)),n[10]||(n[10]=i("ÄÃ£ thanh toÃ¡n ")),e("span",{class:m(S("paid"))},o(C.value.paid),3)],2)]),e("li",Cn,[e("button",{class:m(I("completed")),onClick:n[2]||(n[2]=s=>x("completed"))},[n[11]||(n[11]=e("i",{class:"fas fa-shipping-fast me-2"},null,-1)),n[12]||(n[12]=i("HoÃ n thÃ nh ")),e("span",{class:m(S("completed"))},o(C.value.completed),3)],2)]),e("li",wn,[e("button",{class:m(I("cancelled")),onClick:n[3]||(n[3]=s=>x("cancelled"))},[n[13]||(n[13]=e("i",{class:"fas fa-times-circle me-2"},null,-1)),n[14]||(n[14]=i("ÄÃ£ há»§y ")),e("span",{class:m(S("cancelled"))},o(C.value.cancelled),3)],2)])])])])])]),k(f)?(c(),r("div",In,n[15]||(n[15]=[e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-8 text-center"},[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Äang táº£i...")]),e("p",{class:"mt-3 text-muted"},"Äang táº£i danh sÃ¡ch Ä‘Æ¡n hÃ ng...")])],-1)]))):k(p)?(c(),r("div",Sn,[e("div",Dn,[e("div",Pn,[e("div",An,[n[19]||(n[19]=e("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),n[20]||(n[20]=e("strong",null,"Lá»—i:",-1)),i(" "+o(k(p))+" ",1),e("div",{class:"mt-3"},[e("button",{onClick:b,class:"btn btn-outline-danger btn-sm me-2"},n[16]||(n[16]=[e("i",{class:"fas fa-redo me-1"},null,-1),i("Thá»­ láº¡i ")])),e("button",{onClick:X,class:"btn btn-outline-info btn-sm me-2"},n[17]||(n[17]=[e("i",{class:"fas fa-sync-alt me-1"},null,-1),i("LÃ m má»›i thÃ´ng tin khÃ¡ch hÃ ng ")])),e("button",{onClick:J,class:"btn btn-primary btn-sm"},n[18]||(n[18]=[e("i",{class:"fas fa-user-edit me-1"},null,-1),i("Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n ")]))])])])])])):k(u).length>0?(c(),r("div",On,[e("div",Nn,[e("div",En,[e("div",Gn,[e("div",$n,[n[21]||(n[21]=e("i",{class:"fas fa-info-circle me-2"},null,-1)),e("span",null,[i(" Hiá»ƒn thá»‹ "+o(A.value.length)+" Ä‘Æ¡n hÃ ng ",1),e("strong",null,o(L(y.value)),1)])])]),A.value.length===0?(c(),r("div",Rn,[n[23]||(n[23]=e("i",{class:"fas fa-inbox fa-3x text-muted mb-3"},null,-1)),e("h4",Un,"KhÃ´ng cÃ³ Ä‘Æ¡n hÃ ng "+o(L(y.value).toLowerCase()),1),e("p",Bn,[y.value==="pending"?(c(),r("span",Mn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o Ä‘ang chá» thanh toÃ¡n.")):y.value==="paid"?(c(),r("span",Ln,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o Ä‘Ã£ thanh toÃ¡n.")):y.value==="completed"?(c(),r("span",jn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o hoÃ n thÃ nh.")):y.value==="cancelled"?(c(),r("span",Vn,"Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o bá»‹ há»§y.")):v("",!0)]),e("button",{onClick:n[4]||(n[4]=s=>x("pending")),class:"btn btn-outline-primary"},n[22]||(n[22]=[e("i",{class:"fas fa-clock me-2"},null,-1),i("Xem Ä‘Æ¡n hÃ ng chá» thanh toÃ¡n ")]))])):(c(),r("div",Fn,[(c(!0),r(F,null,z(A.value,(s,g)=>(c(),r("div",{key:s.maHD,class:"order-card mb-4"},[e("div",zn,[e("div",qn,[e("div",Jn,[e("h5",Xn,[n[24]||(n[24]=e("i",{class:"fas fa-receipt me-2 text-primary"},null,-1)),i(" HÃ³a Ä‘Æ¡n #"+o(g+1),1)]),e("small",Yn,[n[25]||(n[25]=e("i",{class:"fas fa-calendar me-1"},null,-1)),i(" "+o(W(s.ngayLap)),1)]),n[27]||(n[27]=e("br",null,null,-1)),e("small",Qn,[n[26]||(n[26]=e("i",{class:"fas fa-hashtag me-1"},null,-1)),i(" MÃ£: "+o(s.maHD),1)])]),e("div",Wn,[e("span",{class:m(Z(s.trangThai))},o(N(s.trangThai)),3),e("div",Zn,[e("strong",nt,o(_(s.tongTien)),1)])])])]),e("div",tt,[e("div",et,[e("div",st,[e("h6",at,[n[28]||(n[28]=e("i",{class:"fas fa-shopping-bag me-2 text-info"},null,-1)),i(" Sáº£n pháº©m Ä‘Ã£ Ä‘áº·t ("+o(s.chiTietHoaDon?.length||0)+") ",1)]),!s.chiTietHoaDon||s.chiTietHoaDon.length===0?(c(),r("div",ot,n[29]||(n[29]=[e("i",{class:"fas fa-info-circle me-2"},null,-1),e("strong",null,"KhÃ´ng cÃ³ sáº£n pháº©m trong Ä‘Æ¡n hÃ ng nÃ y",-1),e("br",null,null,-1),e("small",{class:"text-muted"},"ÄÆ¡n hÃ ng cÃ³ thá»ƒ Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ hoáº·c chÆ°a cÃ³ chi tiáº¿t sáº£n pháº©m.",-1)]))):v("",!0),s.chiTietHoaDon&&s.chiTietHoaDon.length>0?(c(),r("div",lt,[(c(!0),r(F,null,z(s.chiTietHoaDon,l=>(c(),r("div",{key:l.maCTHD||l.id,class:"item-row d-flex align-items-center py-2 border-bottom"},[e("div",rt,[e("img",{src:Y(l.sanPham?.maSP||l.maSP),alt:l.sanPham?.tenSP||l.tenSP||"Sáº£n pháº©m",class:"rounded",style:{width:"50px",height:"50px","object-fit":"cover"},onError:Q},null,40,it)]),e("div",ct,[e("div",ut,o(l.sanPham?.tenSP||l.tenSP||"TÃªn sáº£n pháº©m"),1),e("small",dt," MÃ£ SP: "+o(l.sanPham?.maSP||l.maSP||"N/A"),1),n[30]||(n[30]=e("br",null,null,-1)),e("small",gt," Sá»‘ lÆ°á»£ng: "+o(l.soLuong)+" x "+o(_(l.donGiaBan||l.donGia)),1)]),e("div",ht,[e("strong",null,o(_(l.thanhTienSauGiam||l.thanhTien||(l.donGiaBan||l.donGia)*l.soLuong)),1)])]))),128))])):v("",!0)]),e("div",mt,[e("div",ft,[n[36]||(n[36]=e("h6",{class:"mb-3"},[e("i",{class:"fas fa-calculator me-2 text-warning"}),i(" Tá»•ng quan ")],-1)),e("div",pt,[n[31]||(n[31]=e("span",null,"Tá»•ng tiá»n hÃ ng:",-1)),e("span",null,o(_(s.tongTienHang)),1)]),s.tienGiamGia>0?(c(),r("div",yt,[n[32]||(n[32]=e("span",null,"Giáº£m giÃ¡:",-1)),e("span",null,"-"+o(_(s.tienGiamGia)),1)])):v("",!0),s.khuyenMai?(c(),r("div",vt,[n[33]||(n[33]=e("span",null,"Khuyáº¿n mÃ£i:",-1)),e("span",null,o(s.khuyenMai.tenChuongTrinh),1)])):v("",!0),n[37]||(n[37]=e("hr",null,null,-1)),e("div",bt,[n[34]||(n[34]=e("span",null,"Tá»•ng thanh toÃ¡n:",-1)),e("span",kt,o(_(s.tongTien)),1)]),s.diemTichLuy?(c(),r("div",Ht,[n[35]||(n[35]=e("small",null,"Äiá»ƒm tÃ­ch lÅ©y:",-1)),e("small",null,"+"+o(s.diemTichLuy)+" Ä‘iá»ƒm",1)])):v("",!0)])])])]),e("div",Tt,[e("div",_t,[e("div",xt,[e("small",Kt,[n[38]||(n[38]=e("i",{class:"fas fa-user me-1"},null,-1)),i(" "+o(s.khachHang?.hoTen||"KhÃ¡ch hÃ ng"),1)]),n[40]||(n[40]=e("br",null,null,-1)),e("small",Ct,[n[39]||(n[39]=e("i",{class:"fas fa-map-marker-alt me-1"},null,-1)),i(" "+o(s.khachHang?.diaChi||"Äá»‹a chá»‰ giao hÃ ng"),1)])]),e("div",wt,[w(s.trangThai)?(c(),r("button",{key:0,onClick:l=>tn(s.maHD),class:"btn btn-success btn-sm me-2",disabled:k(f)},n[41]||(n[41]=[e("i",{class:"fas fa-credit-card me-1"},null,-1),i("Checkout ")]),8,It)):v("",!0),w(s.trangThai)?(c(),r("button",{key:1,onClick:l=>en(s.maHD),class:"btn btn-outline-danger btn-sm",disabled:k(f)},n[42]||(n[42]=[e("i",{class:"fas fa-times me-1"},null,-1),i("Há»§y Ä‘Æ¡n ")]),8,St)):v("",!0),w(s.trangThai)?v("",!0):(c(),r("small",Dt,[n[43]||(n[43]=e("i",{class:"fas fa-info-circle me-1"},null,-1)),i(" "+o(N(s.trangThai)),1)]))])])])]))),128))]))])])])):(c(),r("div",Pt,[e("div",At,[e("div",Ot,[e("div",Nt,[n[45]||(n[45]=e("i",{class:"fas fa-box-open fa-4x text-muted mb-4"},null,-1)),n[46]||(n[46]=e("h3",{class:"text-muted"},"ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o",-1)),n[47]||(n[47]=e("p",{class:"text-muted mb-4"}," Báº¡n chÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o. HÃ£y mua sáº¯m vÃ  táº¡o Ä‘Æ¡n hÃ ng Ä‘áº§u tiÃªn! ",-1)),dn(a,{to:"/",class:"btn btn-primary"},{default:gn(()=>n[44]||(n[44]=[e("i",{class:"fas fa-shopping-cart me-2"},null,-1),i("Mua sáº¯m ngay ")])),_:1,__:[44]})])])])]))])}}},Rt=an(Et,[["__scopeId","data-v-4f6fea38"]]);export{Rt as default};
