import{_ as J,u as K,p as X,r as y,q as w,h as Y,m as W,c as i,a as s,i as I,j as O,k as ss,g as l,w as es,s as p,d as v,v as V,f as N,t as o,x as T,l as f,F as A,e as B,o as d}from"./index-jpswdiZ0.js";const ts={class:"checkout-page"},ns={class:"container py-5 mt-5"},ls={"aria-label":"breadcrumb",class:"mb-4"},as={class:"breadcrumb"},os={class:"breadcrumb-item"},is={class:"breadcrumb-item"},ds={key:0,class:"row"},us={class:"col-lg-8"},rs={class:"card mb-4"},cs={class:"card-body"},ms={class:"row"},hs={class:"col-md-6 mb-3"},vs={key:0,class:"invalid-feedback"},ps={class:"col-md-6 mb-3"},gs={key:0,class:"invalid-feedback"},fs={class:"mb-3"},ys={key:0,class:"invalid-feedback"},bs={class:"mb-3"},ks={key:0,class:"invalid-feedback"},xs={class:"mb-3"},_s={class:"card mb-4"},Ms={class:"card-body"},ws={class:"row"},Vs={class:"col-md-6 mb-3"},Ts={class:"form-check payment-method"},Cs={class:"col-md-6 mb-3"},Ns={class:"form-check payment-method"},Ss={class:"col-md-6 mb-3"},qs={class:"form-check payment-method"},Ps={class:"col-md-6 mb-3"},Is={class:"form-check payment-method"},Os={class:"col-md-6 mb-3"},$s={class:"form-check payment-method"},Us={class:"col-md-6 mb-3"},Ds={class:"form-check payment-method"},Es={key:0,class:"banking-info mt-3 p-3 bg-light rounded"},Qs={class:"row"},Rs={class:"col-md-6"},As={class:"mb-2"},Bs={key:1,class:"payment-info mt-3 p-3 bg-light rounded"},Hs={class:"row align-items-center"},js={class:"col-md-6"},Fs={class:"mb-2"},Gs={class:"mb-2"},zs={key:2,class:"payment-info mt-3 p-3 bg-light rounded"},Zs={class:"row"},Ls={class:"col-md-6"},Js={class:"mb-2"},Ks={class:"mb-2"},Xs={key:3,class:"payment-info mt-3 p-3 bg-light rounded"},Ys={class:"row"},Ws={class:"col-md-6"},se={class:"mb-2"},ee={class:"mb-2"},te={key:4,class:"payment-info mt-3 p-3 bg-light rounded"},ne={class:"row"},le={class:"col-md-6"},ae={class:"mb-2"},oe={class:"mb-2"},ie={class:"col-lg-4"},de={class:"card sticky-top",style:{top:"100px"}},ue={class:"card-body"},re={class:"order-items mb-3"},ce=["src","alt"],me={class:"flex-grow-1"},he={class:"mb-1"},ve={class:"d-flex justify-content-between"},pe={class:"text-muted"},ge={class:"fw-bold"},fe={class:"order-summary"},ye={class:"d-flex justify-content-between mb-2"},be={class:"d-flex justify-content-between mb-2"},ke={key:0,class:"small text-success mb-2"},xe={class:"coupon-section mb-3"},_e={class:"d-flex gap-2 mb-2"},Me=["disabled"],we=["disabled"],Ve={key:0},Te={key:1},Ce={key:0,class:"applied-coupon"},Ne={class:"d-flex justify-content-between align-items-center p-3 rounded-3",style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",border:"1px solid rgba(102, 126, 234, 0.3)"}},Se={class:"fw-bold",style:{color:"#667eea"}},qe={class:"small text-muted"},Pe={key:1,class:"d-flex justify-content-between mb-2",style:{color:"#11998e"}},Ie={key:2,class:"available-coupons mt-2"},Oe={class:"d-flex flex-wrap gap-1"},$e=["onClick","title"],Ue={class:"d-flex justify-content-between mb-3"},De={class:"text-danger fs-5"},Ee=["disabled"],Qe={key:0},Re={key:1},Ae={key:1,class:"row"},Be={class:"col-12"},He={class:"empty-checkout text-center py-5"},je={__name:"Checkout",setup(Fe){const D=W(),{formatPrice:g,showNotification:c,products:H}=K(),{cart:$,clearCart:Ge}=X(),S=y(!1),h=y(""),r=y({}),k=y(""),m=y(null),q=y(!1),U=y([{code:"WELCOME10",description:"Giảm 10% cho đơn hàng đầu tiên",discountType:"percentage",discountValue:10,minOrderValue:1e5,maxDiscount:5e4},{code:"FREESHIP",description:"Miễn phí vận chuyển",discountType:"shipping",discountValue:0,minOrderValue:0,maxDiscount:3e4},{code:"SAVE50K",description:"Giảm 50.000đ cho đơn từ 500.000đ",discountType:"fixed",discountValue:5e4,minOrderValue:5e5,maxDiscount:5e4},{code:"VIP20",description:"Giảm 20% cho khách VIP (tối đa 100k)",discountType:"percentage",discountValue:20,minOrderValue:2e5,maxDiscount:1e5}]),n=y({fullName:"",phone:"",email:"",address:"",notes:"",paymentMethod:"cod"}),b=y([]),M=w(()=>b.value.reduce((a,e)=>a+(e.product?.price||0)*e.quantity,0)),x=w(()=>m.value?.discountType==="shipping"||M.value>=2e5?0:3e4),C=w(()=>{if(!m.value)return 0;const a=m.value,e=M.value;if(e<a.minOrderValue)return 0;let u=0;switch(a.discountType){case"percentage":u=e*a.discountValue/100;break;case"fixed":u=a.discountValue;break;case"shipping":u=x.value;break;default:u=0}return Math.min(u,a.maxDiscount)}),_=w(()=>M.value+x.value-C.value),E=w(()=>b.value.reduce((a,e)=>a+e.quantity,0)),j=w(()=>n.value.fullName&&n.value.phone&&n.value.address&&n.value.paymentMethod),F=()=>{const a=Date.now().toString().slice(-6),e=Math.random().toString(36).substr(2,4).toUpperCase();return`EM${a}${e}`},G=()=>(r.value={},n.value.fullName.trim()||(r.value.fullName="Vui lòng nhập họ và tên"),n.value.phone.trim()?/^[0-9]{10,11}$/.test(n.value.phone.replace(/\s/g,""))||(r.value.phone="Số điện thoại không hợp lệ"):r.value.phone="Vui lòng nhập số điện thoại",n.value.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.email)&&(r.value.email="Email không hợp lệ"),n.value.address.trim()||(r.value.address="Vui lòng nhập địa chỉ giao hàng"),Object.keys(r.value).length===0),Q=async()=>{if(k.value.trim()){q.value=!0;try{await new Promise(e=>setTimeout(e,1e3));const a=U.value.find(e=>e.code.toLowerCase()===k.value.trim().toLowerCase());if(!a){c("Mã khuyến mãi không hợp lệ!","error");return}if(M.value<a.minOrderValue){c(`Đơn hàng tối thiểu ${g(a.minOrderValue)} để áp dụng mã này!`,"warning");return}m.value=a,c(`Áp dụng mã ${a.code} thành công!`,"success")}catch{c("Có lỗi xảy ra khi áp dụng mã khuyến mãi!","error")}finally{q.value=!1}}},z=()=>{m.value=null,k.value="",c("Đã xóa mã khuyến mãi!","info")},Z=a=>{k.value=a,Q()},R=async()=>{if(!G()){c("Vui lòng kiểm tra lại thông tin đơn hàng","error");return}S.value=!0;try{await new Promise(u=>setTimeout(u,2e3));const a={orderCode:h.value,customer:{...n.value},items:b.value,summary:{subtotal:M.value,shippingFee:x.value,couponDiscount:C.value,total:_.value,itemsCount:E.value},coupon:m.value?{code:m.value.code,description:m.value.description,discountType:m.value.discountType,discountValue:C.value}:null,createdAt:new Date().toISOString()},e=JSON.parse(localStorage.getItem("easymart-orders")||"[]");e.push(a),localStorage.setItem("easymart-orders",JSON.stringify(e)),b.value.forEach(u=>{const t=$.value.findIndex(P=>P.productId===u.productId);t!==-1&&$.value.splice(t,1)}),localStorage.removeItem("easymart-selected-items"),L(a)}catch{c("Có lỗi xảy ra khi đặt hàng. Vui lòng thử lại!","error")}finally{S.value=!1}},L=a=>{const e=n.value.paymentMethod;switch(localStorage.setItem("easymart-last-order",JSON.stringify(a)),e){case"cod":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Bạn sẽ thanh toán khi nhận hàng.`,"success");break;case"banking":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng chuyển khoản theo thông tin đã cung cấp.`,"success");break;case"qr":c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}. Vui lòng quét mã QR để thanh toán.`,"success");break;case"momo":c("Đang chuyển đến MoMo để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán MoMo thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"vnpay":c("Đang chuyển đến VNPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán VNPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;case"zalopay":c("Đang chuyển đến ZaloPay để thanh toán...","info"),setTimeout(()=>{c(`Thanh toán ZaloPay thành công! Mã đơn hàng: ${h.value}`,"success")},1500);break;default:c(`Đặt hàng thành công! Mã đơn hàng: ${h.value}`,"success")}setTimeout(()=>{D.push({name:"PaymentSuccess",query:{orderCode:h.value,total:_.value,paymentMethod:e}})},3e3)};return Y(()=>{h.value=F();const a=localStorage.getItem("easymart-selected-items");if(a){const e=JSON.parse(a);b.value=$.value.filter(u=>e.includes(u.productId)).map(u=>{const t=H.value.find(P=>P.id===u.productId);return{...u,product:t}}).filter(u=>u.product)}b.value.length===0&&(c("Vui lòng chọn sản phẩm từ giỏ hàng để thanh toán","warning"),D.push("/cart"))}),(a,e)=>{const u=ss("router-link");return d(),i("div",ts,[s("div",ns,[s("nav",ls,[s("ol",as,[s("li",os,[I(u,{to:"/",class:"text-decoration-none"},{default:O(()=>e[12]||(e[12]=[s("i",{class:"fas fa-home"},null,-1),l(" Trang chủ ")])),_:1,__:[12]})]),s("li",is,[I(u,{to:"/cart",class:"text-decoration-none"},{default:O(()=>e[13]||(e[13]=[s("i",{class:"fas fa-shopping-cart"},null,-1),l(" Giỏ hàng ")])),_:1,__:[13]})]),e[14]||(e[14]=s("li",{class:"breadcrumb-item active","aria-current":"page"},[s("i",{class:"fas fa-credit-card"}),l(" Thanh toán ")],-1))])]),e[65]||(e[65]=s("h2",{class:"mb-4"},[s("i",{class:"fas fa-credit-card text-primary me-2"}),l(" Thanh toán đơn hàng ")],-1)),b.value.length>0?(d(),i("div",ds,[s("div",us,[s("div",rs,[e[20]||(e[20]=s("div",{class:"card-header bg-primary text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-truck me-2"}),l(" Thông tin giao hàng ")])],-1)),s("div",cs,[s("form",{onSubmit:es(R,["prevent"])},[s("div",ms,[s("div",hs,[e[15]||(e[15]=s("label",{for:"fullName",class:"form-label"},"Họ và tên *",-1)),p(s("input",{type:"text",class:N(["form-control",{"is-invalid":r.value.fullName}]),id:"fullName","onUpdate:modelValue":e[0]||(e[0]=t=>n.value.fullName=t),required:""},null,2),[[V,n.value.fullName]]),r.value.fullName?(d(),i("div",vs,o(r.value.fullName),1)):v("",!0)]),s("div",ps,[e[16]||(e[16]=s("label",{for:"phone",class:"form-label"},"Số điện thoại *",-1)),p(s("input",{type:"tel",class:N(["form-control",{"is-invalid":r.value.phone}]),id:"phone","onUpdate:modelValue":e[1]||(e[1]=t=>n.value.phone=t),required:""},null,2),[[V,n.value.phone]]),r.value.phone?(d(),i("div",gs,o(r.value.phone),1)):v("",!0)])]),s("div",fs,[e[17]||(e[17]=s("label",{for:"email",class:"form-label"},"Email",-1)),p(s("input",{type:"email",class:N(["form-control",{"is-invalid":r.value.email}]),id:"email","onUpdate:modelValue":e[2]||(e[2]=t=>n.value.email=t)},null,2),[[V,n.value.email]]),r.value.email?(d(),i("div",ys,o(r.value.email),1)):v("",!0)]),s("div",bs,[e[18]||(e[18]=s("label",{for:"address",class:"form-label"},"Địa chỉ giao hàng *",-1)),p(s("textarea",{class:N(["form-control",{"is-invalid":r.value.address}]),id:"address",rows:"3","onUpdate:modelValue":e[3]||(e[3]=t=>n.value.address=t),placeholder:"Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố",required:""},null,2),[[V,n.value.address]]),r.value.address?(d(),i("div",ks,o(r.value.address),1)):v("",!0)]),s("div",xs,[e[19]||(e[19]=s("label",{for:"notes",class:"form-label"},"Ghi chú đơn hàng",-1)),p(s("textarea",{class:"form-control",id:"notes",rows:"2","onUpdate:modelValue":e[4]||(e[4]=t=>n.value.notes=t),placeholder:"Ghi chú về đơn hàng, ví dụ: thời gian hay chỉ dẫn địa điểm giao hàng chi tiết hơn."},null,512),[[V,n.value.notes]])])],32)])]),s("div",_s,[e[48]||(e[48]=s("div",{class:"card-header bg-success text-white"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-money-bill-wave me-2"}),l(" Phương thức thanh toán ")])],-1)),s("div",Ms,[s("div",ws,[s("div",Vs,[s("div",Ts,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"cod",value:"cod","onUpdate:modelValue":e[5]||(e[5]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[21]||(e[21]=s("label",{class:"form-check-label w-100",for:"cod"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-hand-holding-usd text-success me-3 fs-4"}),s("div",null,[s("strong",null,"Thanh toán khi nhận hàng (COD)"),s("div",{class:"text-muted small"},"Thanh toán bằng tiền mặt khi nhận hàng")])])],-1))])]),s("div",Cs,[s("div",Ns,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"banking",value:"banking","onUpdate:modelValue":e[6]||(e[6]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[22]||(e[22]=s("label",{class:"form-check-label w-100",for:"banking"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-university text-primary me-3 fs-4"}),s("div",null,[s("strong",null,"Chuyển khoản ngân hàng"),s("div",{class:"text-muted small"},"Chuyển khoản trước khi giao hàng")])])],-1))])]),s("div",Ss,[s("div",qs,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"qr",value:"qr","onUpdate:modelValue":e[7]||(e[7]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[23]||(e[23]=s("label",{class:"form-check-label w-100",for:"qr"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-qrcode text-dark me-3 fs-4"}),s("div",null,[s("strong",null,"Quét mã QR"),s("div",{class:"text-muted small"},"Quét QR để thanh toán nhanh")])])],-1))])]),s("div",Ps,[s("div",Is,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"momo",value:"momo","onUpdate:modelValue":e[8]||(e[8]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[24]||(e[24]=s("label",{class:"form-check-label w-100",for:"momo"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fab fa-momo text-danger me-3 fs-4"}),s("div",null,[s("strong",null,"Ví MoMo"),s("div",{class:"text-muted small"},"Thanh toán qua ví điện tử MoMo")])])],-1))])]),s("div",Os,[s("div",$s,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"vnpay",value:"vnpay","onUpdate:modelValue":e[9]||(e[9]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[25]||(e[25]=s("label",{class:"form-check-label w-100",for:"vnpay"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-credit-card text-info me-3 fs-4"}),s("div",null,[s("strong",null,"VNPay"),s("div",{class:"text-muted small"},"Thanh toán qua cổng VNPay")])])],-1))])]),s("div",Us,[s("div",Ds,[p(s("input",{class:"form-check-input",type:"radio",name:"paymentMethod",id:"zalopay",value:"zalopay","onUpdate:modelValue":e[10]||(e[10]=t=>n.value.paymentMethod=t)},null,512),[[T,n.value.paymentMethod]]),e[26]||(e[26]=s("label",{class:"form-check-label w-100",for:"zalopay"},[s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-mobile-alt text-warning me-3 fs-4"}),s("div",null,[s("strong",null,"ZaloPay"),s("div",{class:"text-muted small"},"Thanh toán qua ví ZaloPay")])])],-1))])])]),n.value.paymentMethod==="banking"?(d(),i("div",Es,[e[30]||(e[30]=s("h6",{class:"text-primary mb-3"},[s("i",{class:"fas fa-info-circle me-2"}),l(" Thông tin chuyển khoản ")],-1)),s("div",Qs,[e[29]||(e[29]=s("div",{class:"col-md-6"},[s("p",{class:"mb-2"},[s("strong",null,"Ngân hàng:"),l(" Vietcombank")]),s("p",{class:"mb-2"},[s("strong",null,"Số tài khoản:"),l(" 1234567890")]),s("p",{class:"mb-2"},[s("strong",null,"Chủ tài khoản:"),l(" EASYMART COMPANY")])],-1)),s("div",Rs,[s("p",As,[e[27]||(e[27]=s("strong",null,"Nội dung:",-1)),l(" THANHTOAN "+o(h.value),1)]),e[28]||(e[28]=s("p",{class:"mb-0 text-danger"},[s("small",null,[s("strong",null,"Lưu ý:"),l(" Vui lòng chuyển khoản đúng nội dung để đơn hàng được xử lý nhanh chóng.")])],-1))])])])):v("",!0),n.value.paymentMethod==="qr"?(d(),i("div",Bs,[e[35]||(e[35]=s("h6",{class:"text-dark mb-3"},[s("i",{class:"fas fa-qrcode me-2"}),l(" Quét mã QR để thanh toán ")],-1)),s("div",Hs,[e[34]||(e[34]=s("div",{class:"col-md-6 text-center"},[s("div",{class:"qr-code-placeholder"},[s("i",{class:"fas fa-qrcode fa-5x text-muted mb-2"}),s("p",{class:"text-muted"},"Mã QR sẽ được tạo sau khi đặt hàng")])],-1)),s("div",js,[s("p",Fs,[e[31]||(e[31]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",Gs,[e[32]||(e[32]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)]),e[33]||(e[33]=s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Mở app ngân hàng → Quét QR → Xác nhận thanh toán")])],-1))])])])):v("",!0),n.value.paymentMethod==="momo"?(d(),i("div",zs,[e[39]||(e[39]=s("h6",{class:"text-danger mb-3"},[s("i",{class:"fab fa-momo me-2"}),l(" Thanh toán qua ví MoMo ")],-1)),s("div",Zs,[s("div",Ls,[s("p",Js,[e[36]||(e[36]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",Ks,[e[37]||(e[37]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),e[38]||(e[38]=s("div",{class:"col-md-6"},[s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app MoMo để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0),n.value.paymentMethod==="vnpay"?(d(),i("div",Xs,[e[43]||(e[43]=s("h6",{class:"text-info mb-3"},[s("i",{class:"fas fa-credit-card me-2"}),l(" Thanh toán qua VNPay ")],-1)),s("div",Ys,[s("div",Ws,[s("p",se,[e[40]||(e[40]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",ee,[e[41]||(e[41]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),e[42]||(e[42]=s("div",{class:"col-md-6"},[s("p",{class:"mb-2"},[s("strong",null,"Hỗ trợ:"),l(" Thẻ ATM, Internet Banking, Ví điện tử")]),s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến cổng thanh toán VNPay để hoàn tất giao dịch.")])])],-1))])])):v("",!0),n.value.paymentMethod==="zalopay"?(d(),i("div",te,[e[47]||(e[47]=s("h6",{class:"text-warning mb-3"},[s("i",{class:"fas fa-mobile-alt me-2"}),l(" Thanh toán qua ZaloPay ")],-1)),s("div",ne,[s("div",le,[s("p",ae,[e[44]||(e[44]=s("strong",null,"Số tiền:",-1)),l(" "+o(f(g)(_.value)),1)]),s("p",oe,[e[45]||(e[45]=s("strong",null,"Mã đơn hàng:",-1)),l(" "+o(h.value),1)])]),e[46]||(e[46]=s("div",{class:"col-md-6"},[s("p",{class:"mb-0 text-info"},[s("small",null,[s("strong",null,"Hướng dẫn:"),l(" Bạn sẽ được chuyển đến app ZaloPay để hoàn tất thanh toán sau khi đặt hàng.")])])],-1))])])):v("",!0)])])]),s("div",ie,[s("div",de,[e[60]||(e[60]=s("div",{class:"card-header bg-warning text-dark"},[s("h5",{class:"mb-0"},[s("i",{class:"fas fa-receipt me-2"}),l(" Đơn hàng của bạn ")])],-1)),s("div",ue,[s("div",re,[(d(!0),i(A,null,B(b.value,t=>(d(),i("div",{key:t.productId,class:"order-item d-flex align-items-center mb-3 pb-3 border-bottom"},[s("img",{src:t.product?.image,alt:t.product?.name,class:"order-item-image me-3"},null,8,ce),s("div",me,[s("h6",he,o(t.product?.name),1),s("div",ve,[s("span",pe,o(f(g)(t.product?.price||0))+" x "+o(t.quantity),1),s("span",ge,o(f(g)((t.product?.price||0)*t.quantity)),1)])])]))),128))]),s("div",fe,[s("div",ye,[s("span",null,"Tạm tính ("+o(E.value)+" sản phẩm):",1),s("span",null,o(f(g)(M.value)),1)]),s("div",be,[e[49]||(e[49]=s("span",null,"Phí vận chuyển:",-1)),s("span",{class:N(x.value===0?"text-success":"")},o(x.value===0?"Miễn phí":f(g)(x.value)),3)]),x.value===0?(d(),i("div",ke,e[50]||(e[50]=[s("i",{class:"fas fa-check-circle me-1"},null,-1),l(" Bạn được miễn phí vận chuyển! ")]))):v("",!0),s("div",xe,[s("div",_e,[p(s("input",{type:"text",class:"form-control form-control-sm",placeholder:"Nhập mã khuyến mãi","onUpdate:modelValue":e[11]||(e[11]=t=>k.value=t),disabled:m.value},null,8,Me),[[V,k.value]]),s("button",{class:"btn btn-outline-primary btn-sm",onClick:Q,disabled:!k.value.trim()||m.value||q.value},[q.value?(d(),i("span",Ve,e[51]||(e[51]=[s("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(d(),i("span",Te,o(m.value?"Đã áp dụng":"Áp dụng"),1))],8,we)]),m.value?(d(),i("div",Ce,[s("div",Ne,[s("div",null,[s("small",Se,[e[52]||(e[52]=s("i",{class:"fas fa-ticket-alt me-1"},null,-1)),l(" "+o(m.value.code),1)]),s("div",qe,o(m.value.description),1)]),s("button",{class:"btn btn-sm",style:{background:"linear-gradient(135deg, #ff6b6b, #ee5a5a)",color:"white",border:"none"},onClick:z,title:"Xóa mã khuyến mãi"},e[53]||(e[53]=[s("i",{class:"fas fa-times"},null,-1)]))])])):v("",!0),C.value>0?(d(),i("div",Pe,[s("span",null,"Giảm giá ("+o(m.value?.code)+"):",1),s("span",null,"-"+o(f(g)(C.value)),1)])):v("",!0),!m.value&&U.value.length>0?(d(),i("div",Ie,[e[54]||(e[54]=s("small",{class:"text-muted d-block mb-2"},"Mã khuyến mãi có sẵn:",-1)),s("div",Oe,[(d(!0),i(A,null,B(U.value,t=>(d(),i("button",{key:t.code,class:"btn btn-sm",style:{background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",border:"none"},onClick:P=>Z(t.code),title:t.description},o(t.code),9,$e))),128))])])):v("",!0)]),e[59]||(e[59]=s("hr",null,null,-1)),s("div",Ue,[e[55]||(e[55]=s("strong",{class:"fs-5"},"Tổng cộng:",-1)),s("strong",De,o(f(g)(_.value)),1)]),s("button",{type:"button",class:"btn btn-primary w-100 mb-2 py-2",onClick:R,disabled:S.value||!j.value},[S.value?(d(),i("span",Qe,e[56]||(e[56]=[s("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),l(" Đang xử lý... ")]))):(d(),i("span",Re,e[57]||(e[57]=[s("i",{class:"fas fa-check me-2"},null,-1),l(" Đặt hàng ")])))],8,Ee),I(u,{to:"/cart",class:"btn btn-outline-secondary w-100"},{default:O(()=>e[58]||(e[58]=[s("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[58]})])])])])])):(d(),i("div",Ae,[s("div",Be,[s("div",He,[e[62]||(e[62]=s("div",{class:"empty-checkout-icon mb-4"},[s("i",{class:"fas fa-exclamation-triangle fa-5x text-warning"})],-1)),e[63]||(e[63]=s("h3",{class:"text-muted mb-3"},"Không có sản phẩm để thanh toán",-1)),e[64]||(e[64]=s("p",{class:"text-muted mb-4"},"Vui lòng quay lại giỏ hàng và chọn sản phẩm để thanh toán",-1)),I(u,{to:"/cart",class:"btn btn-primary btn-lg"},{default:O(()=>e[61]||(e[61]=[s("i",{class:"fas fa-arrow-left me-2"},null,-1),l(" Quay lại giỏ hàng ")])),_:1,__:[61]})])])]))])])}}},Ze=J(je,[["__scopeId","data-v-410a12c2"]]);export{Ze as default};
