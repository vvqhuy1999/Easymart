const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Promotions-ChseY8ki.js","assets/Promotions-Uo5pcINg.css","assets/Checkout-DiC4gs-H.js","assets/Checkout-4Vz-9aI0.css","assets/PaymentSuccess-BdyAO8FZ.js","assets/PaymentSuccess-DiMNo1Vk.css","assets/Search-Cnw5C4KS.js","assets/Search-CRnc_RJl.css","assets/Categories-CpwFVewK.js","assets/Categories-Y6KY7PPS.css","assets/Category-BvikqT9e.js","assets/Category-Cavpeh31.css","assets/About-DFt95wEK.js","assets/About-eoiSrOrX.css","assets/Contact-DqRWzNQk.js","assets/Contact-Dko7EUlx.css","assets/Login-C0CfRfwu.js","assets/FacebookSignIn-bIobS7pE.js","assets/FacebookSignIn-BGU_Fz4z.css","assets/Login-Br0MiDYh.css","assets/Register-BU_PsUbi.js","assets/Register-m9ywLs9E.css","assets/ForgotPassword-6-E1zI_4.js","assets/ForgotPassword-ka-IWcgV.css","assets/Profile-hCMgzTFJ.js","assets/Profile-DblRKRHd.css","assets/Orders-DpZ5BaZd.js","assets/Orders-CeX2U_SJ.css","assets/OAuth2Success-R3yVrL8a.js","assets/OAuth2Success-BmvuGF0Q.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Oo(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Re={},gn=[],Et=()=>{},Tl=()=>!1,Ds=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Do=e=>e.startsWith("onUpdate:"),Be=Object.assign,Lo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},wl=Object.prototype.hasOwnProperty,Ie=(e,t)=>wl.call(e,t),fe=Array.isArray,mn=e=>as(e)==="[object Map]",In=e=>as(e)==="[object Set]",fr=e=>as(e)==="[object Date]",ve=e=>typeof e=="function",Me=e=>typeof e=="string",It=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",Ta=e=>(Pe(e)||ve(e))&&ve(e.then)&&ve(e.catch),wa=Object.prototype.toString,as=e=>wa.call(e),_l=e=>as(e).slice(8,-1),_a=e=>as(e)==="[object Object]",No=e=>Me(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mn=Oo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ls=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Cl=/-(\w)/g,ut=Ls(e=>e.replace(Cl,(t,n)=>n?n.toUpperCase():"")),Sl=/\B([A-Z])/g,Xt=Ls(e=>e.replace(Sl,"-$1").toLowerCase()),Ns=Ls(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zs=Ls(e=>e?`on${Ns(e)}`:""),Yt=(e,t)=>!Object.is(e,t),vs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},mo=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ss=e=>{const t=parseFloat(e);return isNaN(t)?e:t},kl=e=>{const t=Me(e)?Number(e):NaN;return isNaN(t)?e:t};let hr;const Ms=()=>hr||(hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bn(e){if(fe(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Me(s)?$l(s):bn(s);if(o)for(const r in o)t[r]=o[r]}return t}else if(Me(e)||Pe(e))return e}const El=/;(?![^(]*\))/g,Al=/:([^]+)/,Il=/\/\*[^]*?\*\//g;function $l(e){const t={};return e.replace(Il,"").split(El).forEach(n=>{if(n){const s=n.split(Al);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ke(e){let t="";if(Me(e))t=e;else if(fe(e))for(let n=0;n<e.length;n++){const s=ke(e[n]);s&&(t+=s+" ")}else if(Pe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const xl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rl=Oo(xl);function Ca(e){return!!e||e===""}function Pl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=cn(e[s],t[s]);return n}function cn(e,t){if(e===t)return!0;let n=fr(e),s=fr(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=It(e),s=It(t),n||s)return e===t;if(n=fe(e),s=fe(t),n||s)return n&&s?Pl(e,t):!1;if(n=Pe(e),s=Pe(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!cn(e[a],t[a]))return!1}}return String(e)===String(t)}function Mo(e,t){return e.findIndex(n=>cn(n,t))}const Sa=e=>!!(e&&e.__v_isRef===!0),z=e=>Me(e)?e:e==null?"":fe(e)||Pe(e)&&(e.toString===wa||!ve(e.toString))?Sa(e)?z(e.value):JSON.stringify(e,ka,2):String(e),ka=(e,t)=>Sa(t)?ka(e,t.value):mn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],r)=>(n[eo(s,r)+" =>"]=o,n),{})}:In(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>eo(n))}:It(t)?eo(t):Pe(t)&&!fe(t)&&!_a(t)?String(t):t,eo=(e,t="")=>{var n;return It(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tt;class Ol{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tt,!t&&tt&&(this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=tt;try{return tt=this,t()}finally{tt=n}}}on(){++this._on===1&&(this.prevScope=tt,tt=this)}off(){this._on>0&&--this._on===0&&(tt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Dl(){return tt}let De;const to=new WeakSet;class Ea{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tt&&tt.active&&tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,to.has(this)&&(to.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ia(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gr(this),$a(this);const t=De,n=ft;De=this,ft=!0;try{return this.fn()}finally{xa(this),De=t,ft=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Bo(t);this.deps=this.depsTail=void 0,gr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?to.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){po(this)&&this.run()}get dirty(){return po(this)}}let Aa=0,Hn,Un;function Ia(e,t=!1){if(e.flags|=8,t){e.next=Un,Un=e;return}e.next=Hn,Hn=e}function Ho(){Aa++}function Uo(){if(--Aa>0)return;if(Un){let t=Un;for(Un=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Hn;){let t=Hn;for(Hn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function $a(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xa(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Bo(s),Ll(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function po(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ra(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ra(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Yn)||(e.globalVersion=Yn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!po(e))))return;e.flags|=2;const t=e.dep,n=De,s=ft;De=e,ft=!0;try{$a(e);const o=e.fn(e._value);(t.version===0||Yt(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{De=n,ft=s,xa(e),e.flags&=-3}}function Bo(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Bo(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ll(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ft=!0;const Pa=[];function Mt(){Pa.push(ft),ft=!1}function Ht(){const e=Pa.pop();ft=e===void 0?!0:e}function gr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=De;De=void 0;try{t()}finally{De=n}}}let Yn=0;class Nl{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ko{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!De||!ft||De===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==De)n=this.activeLink=new Nl(De,this),De.deps?(n.prevDep=De.depsTail,De.depsTail.nextDep=n,De.depsTail=n):De.deps=De.depsTail=n,Oa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=De.depsTail,n.nextDep=void 0,De.depsTail.nextDep=n,De.depsTail=n,De.deps===n&&(De.deps=s)}return n}trigger(t){this.version++,Yn++,this.notify(t)}notify(t){Ho();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Uo()}}}function Oa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Oa(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const vo=new WeakMap,ln=Symbol(""),yo=Symbol(""),qn=Symbol("");function Ye(e,t,n){if(ft&&De){let s=vo.get(e);s||vo.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new Ko),o.map=s,o.key=n),o.track()}}function Pt(e,t,n,s,o,r){const a=vo.get(e);if(!a){Yn++;return}const l=c=>{c&&c.trigger()};if(Ho(),t==="clear")a.forEach(l);else{const c=fe(e),d=c&&No(n);if(c&&n==="length"){const u=Number(s);a.forEach((f,h)=>{(h==="length"||h===qn||!It(h)&&h>=u)&&l(f)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),d&&l(a.get(qn)),t){case"add":c?d&&l(a.get("length")):(l(a.get(ln)),mn(e)&&l(a.get(yo)));break;case"delete":c||(l(a.get(ln)),mn(e)&&l(a.get(yo)));break;case"set":mn(e)&&l(a.get(ln));break}}Uo()}function dn(e){const t=Ce(e);return t===e?t:(Ye(t,"iterate",qn),lt(e)?t:t.map(Fe))}function Hs(e){return Ye(e=Ce(e),"iterate",qn),e}const Ml={__proto__:null,[Symbol.iterator](){return no(this,Symbol.iterator,Fe)},concat(...e){return dn(this).concat(...e.map(t=>fe(t)?dn(t):t))},entries(){return no(this,"entries",e=>(e[1]=Fe(e[1]),e))},every(e,t){return $t(this,"every",e,t,void 0,arguments)},filter(e,t){return $t(this,"filter",e,t,n=>n.map(Fe),arguments)},find(e,t){return $t(this,"find",e,t,Fe,arguments)},findIndex(e,t){return $t(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $t(this,"findLast",e,t,Fe,arguments)},findLastIndex(e,t){return $t(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $t(this,"forEach",e,t,void 0,arguments)},includes(...e){return so(this,"includes",e)},indexOf(...e){return so(this,"indexOf",e)},join(e){return dn(this).join(e)},lastIndexOf(...e){return so(this,"lastIndexOf",e)},map(e,t){return $t(this,"map",e,t,void 0,arguments)},pop(){return Pn(this,"pop")},push(...e){return Pn(this,"push",e)},reduce(e,...t){return mr(this,"reduce",e,t)},reduceRight(e,...t){return mr(this,"reduceRight",e,t)},shift(){return Pn(this,"shift")},some(e,t){return $t(this,"some",e,t,void 0,arguments)},splice(...e){return Pn(this,"splice",e)},toReversed(){return dn(this).toReversed()},toSorted(e){return dn(this).toSorted(e)},toSpliced(...e){return dn(this).toSpliced(...e)},unshift(...e){return Pn(this,"unshift",e)},values(){return no(this,"values",Fe)}};function no(e,t,n){const s=Hs(e),o=s[t]();return s!==e&&!lt(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.value&&(r.value=n(r.value)),r}),o}const Hl=Array.prototype;function $t(e,t,n,s,o,r){const a=Hs(e),l=a!==e&&!lt(e),c=a[t];if(c!==Hl[t]){const f=c.apply(e,r);return l?Fe(f):f}let d=n;a!==e&&(l?d=function(f,h){return n.call(this,Fe(f),h,e)}:n.length>2&&(d=function(f,h){return n.call(this,f,h,e)}));const u=c.call(a,d,s);return l&&o?o(u):u}function mr(e,t,n,s){const o=Hs(e);let r=n;return o!==e&&(lt(e)?n.length>3&&(r=function(a,l,c){return n.call(this,a,l,c,e)}):r=function(a,l,c){return n.call(this,a,Fe(l),c,e)}),o[t](r,...s)}function so(e,t,n){const s=Ce(e);Ye(s,"iterate",qn);const o=s[t](...n);return(o===-1||o===!1)&&Go(n[0])?(n[0]=Ce(n[0]),s[t](...n)):o}function Pn(e,t,n=[]){Mt(),Ho();const s=Ce(e)[t].apply(e,n);return Uo(),Ht(),s}const Ul=Oo("__proto__,__v_isRef,__isVue"),Da=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(It));function Bl(e){It(e)||(e=String(e));const t=Ce(this);return Ye(t,"has",e),t.hasOwnProperty(e)}class La{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?Ql:Ua:r?Ha:Ma).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=fe(t);if(!o){let c;if(a&&(c=Ml[n]))return c;if(n==="hasOwnProperty")return Bl}const l=Reflect.get(t,n,Ve(t)?t:s);return(It(n)?Da.has(n):Ul(n))||(o||Ye(t,"get",n),r)?l:Ve(l)?a&&No(n)?l:l.value:Pe(l)?o?Ka(l):Lt(l):l}}class Na extends La{constructor(t=!1){super(!1,t)}set(t,n,s,o){let r=t[n];if(!this._isShallow){const c=qt(r);if(!lt(s)&&!qt(s)&&(r=Ce(r),s=Ce(s)),!fe(t)&&Ve(r)&&!Ve(s))return c?!1:(r.value=s,!0)}const a=fe(t)&&No(n)?Number(n)<t.length:Ie(t,n),l=Reflect.set(t,n,s,Ve(t)?t:o);return t===Ce(o)&&(a?Yt(s,r)&&Pt(t,"set",n,s):Pt(t,"add",n,s)),l}deleteProperty(t,n){const s=Ie(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&Pt(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!It(n)||!Da.has(n))&&Ye(t,"has",n),s}ownKeys(t){return Ye(t,"iterate",fe(t)?"length":ln),Reflect.ownKeys(t)}}class Kl extends La{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const jl=new Na,Fl=new Kl,Gl=new Na(!0);const bo=e=>e,ds=e=>Reflect.getPrototypeOf(e);function Vl(e,t,n){return function(...s){const o=this.__v_raw,r=Ce(o),a=mn(r),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,d=o[e](...s),u=n?bo:t?ks:Fe;return!t&&Ye(r,"iterate",c?yo:ln),{next(){const{value:f,done:h}=d.next();return h?{value:f,done:h}:{value:l?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function fs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function zl(e,t){const n={get(o){const r=this.__v_raw,a=Ce(r),l=Ce(o);e||(Yt(o,l)&&Ye(a,"get",o),Ye(a,"get",l));const{has:c}=ds(a),d=t?bo:e?ks:Fe;if(c.call(a,o))return d(r.get(o));if(c.call(a,l))return d(r.get(l));r!==a&&r.get(o)},get size(){const o=this.__v_raw;return!e&&Ye(Ce(o),"iterate",ln),Reflect.get(o,"size",o)},has(o){const r=this.__v_raw,a=Ce(r),l=Ce(o);return e||(Yt(o,l)&&Ye(a,"has",o),Ye(a,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const a=this,l=a.__v_raw,c=Ce(l),d=t?bo:e?ks:Fe;return!e&&Ye(c,"iterate",ln),l.forEach((u,f)=>o.call(r,d(u),d(f),a))}};return Be(n,e?{add:fs("add"),set:fs("set"),delete:fs("delete"),clear:fs("clear")}:{add(o){!t&&!lt(o)&&!qt(o)&&(o=Ce(o));const r=Ce(this);return ds(r).has.call(r,o)||(r.add(o),Pt(r,"add",o,o)),this},set(o,r){!t&&!lt(r)&&!qt(r)&&(r=Ce(r));const a=Ce(this),{has:l,get:c}=ds(a);let d=l.call(a,o);d||(o=Ce(o),d=l.call(a,o));const u=c.call(a,o);return a.set(o,r),d?Yt(r,u)&&Pt(a,"set",o,r):Pt(a,"add",o,r),this},delete(o){const r=Ce(this),{has:a,get:l}=ds(r);let c=a.call(r,o);c||(o=Ce(o),c=a.call(r,o)),l&&l.call(r,o);const d=r.delete(o);return c&&Pt(r,"delete",o,void 0),d},clear(){const o=Ce(this),r=o.size!==0,a=o.clear();return r&&Pt(o,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Vl(o,e,t)}),n}function jo(e,t){const n=zl(e,t);return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Ie(n,o)&&o in s?n:s,o,r)}const Yl={get:jo(!1,!1)},ql={get:jo(!1,!0)},Wl={get:jo(!0,!1)};const Ma=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Ql=new WeakMap;function Jl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xl(e){return e.__v_skip||!Object.isExtensible(e)?0:Jl(_l(e))}function Lt(e){return qt(e)?e:Fo(e,!1,jl,Yl,Ma)}function Ba(e){return Fo(e,!1,Gl,ql,Ha)}function Ka(e){return Fo(e,!0,Fl,Wl,Ua)}function Fo(e,t,n,s,o){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Xl(e);if(r===0)return e;const a=o.get(e);if(a)return a;const l=new Proxy(e,r===2?s:n);return o.set(e,l),l}function pn(e){return qt(e)?pn(e.__v_raw):!!(e&&e.__v_isReactive)}function qt(e){return!!(e&&e.__v_isReadonly)}function lt(e){return!!(e&&e.__v_isShallow)}function Go(e){return e?!!e.__v_raw:!1}function Ce(e){const t=e&&e.__v_raw;return t?Ce(t):e}function Zl(e){return!Ie(e,"__v_skip")&&Object.isExtensible(e)&&mo(e,"__v_skip",!0),e}const Fe=e=>Pe(e)?Lt(e):e,ks=e=>Pe(e)?Ka(e):e;function Ve(e){return e?e.__v_isRef===!0:!1}function Q(e){return ja(e,!1)}function ec(e){return ja(e,!0)}function ja(e,t){return Ve(e)?e:new tc(e,t)}class tc{constructor(t,n){this.dep=new Ko,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ce(t),this._value=n?t:Fe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||lt(t)||qt(t);t=s?t:Ce(t),Yt(t,n)&&(this._rawValue=t,this._value=s?t:Fe(t),this.dep.trigger())}}function K(e){return Ve(e)?e.value:e}const nc={get:(e,t,n)=>t==="__v_raw"?e:K(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Ve(o)&&!Ve(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Fa(e){return pn(e)?e:new Proxy(e,nc)}class sc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ko(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Yn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&De!==this)return Ia(this,!0),!0}get value(){const t=this.dep.track();return Ra(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function oc(e,t,n=!1){let s,o;return ve(e)?s=e:(s=e.get,o=e.set),new sc(s,o,n)}const hs={},Es=new WeakMap;let on;function rc(e,t=!1,n=on){if(n){let s=Es.get(n);s||Es.set(n,s=[]),s.push(e)}}function ac(e,t,n=Re){const{immediate:s,deep:o,once:r,scheduler:a,augmentJob:l,call:c}=n,d=v=>o?v:lt(v)||o===!1||o===0?Ot(v,1):Ot(v);let u,f,h,m,_=!1,y=!1;if(Ve(e)?(f=()=>e.value,_=lt(e)):pn(e)?(f=()=>d(e),_=!0):fe(e)?(y=!0,_=e.some(v=>pn(v)||lt(v)),f=()=>e.map(v=>{if(Ve(v))return v.value;if(pn(v))return d(v);if(ve(v))return c?c(v,2):v()})):ve(e)?t?f=c?()=>c(e,2):e:f=()=>{if(h){Mt();try{h()}finally{Ht()}}const v=on;on=u;try{return c?c(e,3,[m]):e(m)}finally{on=v}}:f=Et,t&&o){const v=f,$=o===!0?1/0:o;f=()=>Ot(v(),$)}const U=Dl(),L=()=>{u.stop(),U&&U.active&&Lo(U.effects,u)};if(r&&t){const v=t;t=(...$)=>{v(...$),L()}}let b=y?new Array(e.length).fill(hs):hs;const T=v=>{if(!(!(u.flags&1)||!u.dirty&&!v))if(t){const $=u.run();if(o||_||(y?$.some((R,C)=>Yt(R,b[C])):Yt($,b))){h&&h();const R=on;on=u;try{const C=[$,b===hs?void 0:y&&b[0]===hs?[]:b,m];b=$,c?c(t,3,C):t(...C)}finally{on=R}}}else u.run()};return l&&l(T),u=new Ea(f),u.scheduler=a?()=>a(T,!1):T,m=v=>rc(v,!1,u),h=u.onStop=()=>{const v=Es.get(u);if(v){if(c)c(v,4);else for(const $ of v)$();Es.delete(u)}},t?s?T(!0):b=u.run():a?a(T.bind(null,!0),!0):u.run(),L.pause=u.pause.bind(u),L.resume=u.resume.bind(u),L.stop=L,L}function Ot(e,t=1/0,n){if(t<=0||!Pe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ve(e))Ot(e.value,t,n);else if(fe(e))for(let s=0;s<e.length;s++)Ot(e[s],t,n);else if(In(e)||mn(e))e.forEach(s=>{Ot(s,t,n)});else if(_a(e)){for(const s in e)Ot(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ot(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function is(e,t,n,s){try{return s?e(...s):e()}catch(o){Us(o,t,n)}}function mt(e,t,n,s){if(ve(e)){const o=is(e,t,n,s);return o&&Ta(o)&&o.catch(r=>{Us(r,t,n)}),o}if(fe(e)){const o=[];for(let r=0;r<e.length;r++)o.push(mt(e[r],t,n,s));return o}}function Us(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Re;if(t){let l=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,d)===!1)return}l=l.parent}if(r){Mt(),is(r,null,10,[e,c,d]),Ht();return}}ic(e,n,o,s,a)}function ic(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const Je=[];let St=-1;const vn=[];let Ft=null,fn=0;const Ga=Promise.resolve();let As=null;function Wn(e){const t=As||Ga;return e?t.then(this?e.bind(this):e):t}function lc(e){let t=St+1,n=Je.length;for(;t<n;){const s=t+n>>>1,o=Je[s],r=Qn(o);r<e||r===e&&o.flags&2?t=s+1:n=s}return t}function Vo(e){if(!(e.flags&1)){const t=Qn(e),n=Je[Je.length-1];!n||!(e.flags&2)&&t>=Qn(n)?Je.push(e):Je.splice(lc(t),0,e),e.flags|=1,Va()}}function Va(){As||(As=Ga.then(Ya))}function cc(e){fe(e)?vn.push(...e):Ft&&e.id===-1?Ft.splice(fn+1,0,e):e.flags&1||(vn.push(e),e.flags|=1),Va()}function pr(e,t,n=St+1){for(;n<Je.length;n++){const s=Je[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Je.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function za(e){if(vn.length){const t=[...new Set(vn)].sort((n,s)=>Qn(n)-Qn(s));if(vn.length=0,Ft){Ft.push(...t);return}for(Ft=t,fn=0;fn<Ft.length;fn++){const n=Ft[fn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ft=null,fn=0}}const Qn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ya(e){try{for(St=0;St<Je.length;St++){const t=Je[St];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),is(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;St<Je.length;St++){const t=Je[St];t&&(t.flags&=-2)}St=-1,Je.length=0,za(),As=null,(Je.length||vn.length)&&Ya()}}let nt=null,qa=null;function Is(e){const t=nt;return nt=e,qa=e&&e.type.__scopeId||null,t}function Ne(e,t=nt,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&xr(-1);const r=Is(t);let a;try{a=e(...o)}finally{Is(r),s._d&&xr(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function ht(e,t){if(nt===null)return e;const n=Gs(nt),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,a,l,c=Re]=t[o];r&&(ve(r)&&(r={mounted:r,updated:r}),r.deep&&Ot(a),s.push({dir:r,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function tn(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let a=0;a<o.length;a++){const l=o[a];r&&(l.oldValue=r[a].value);let c=l.dir[s];c&&(Mt(),mt(c,n,8,[e.el,l,e,t]),Ht())}}const Wa=Symbol("_vte"),Qa=e=>e.__isTeleport,Bn=e=>e&&(e.disabled||e.disabled===""),vr=e=>e&&(e.defer||e.defer===""),yr=e=>typeof SVGElement<"u"&&e instanceof SVGElement,br=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,To=(e,t)=>{const n=e&&e.to;return Me(n)?t?t(n):null:n},Ja={name:"Teleport",__isTeleport:!0,process(e,t,n,s,o,r,a,l,c,d){const{mc:u,pc:f,pbc:h,o:{insert:m,querySelector:_,createText:y,createComment:U}}=d,L=Bn(t.props);let{shapeFlag:b,children:T,dynamicChildren:v}=t;if(e==null){const $=t.el=y(""),R=t.anchor=y("");m($,n,s),m(R,n,s);const C=(I,j)=>{b&16&&(o&&o.isCE&&(o.ce._teleportTarget=I),u(T,I,j,o,r,a,l,c))},V=()=>{const I=t.target=To(t.props,_),j=Za(I,t,y,m);I&&(a!=="svg"&&yr(I)?a="svg":a!=="mathml"&&br(I)&&(a="mathml"),L||(C(I,j),ys(t,!1)))};L&&(C(n,R),ys(t,!0)),vr(t.props)?(t.el.__isMounted=!1,We(()=>{V(),delete t.el.__isMounted},r)):V()}else{if(vr(t.props)&&e.el.__isMounted===!1){We(()=>{Ja.process(e,t,n,s,o,r,a,l,c,d)},r);return}t.el=e.el,t.targetStart=e.targetStart;const $=t.anchor=e.anchor,R=t.target=e.target,C=t.targetAnchor=e.targetAnchor,V=Bn(e.props),I=V?n:R,j=V?$:C;if(a==="svg"||yr(R)?a="svg":(a==="mathml"||br(R))&&(a="mathml"),v?(h(e.dynamicChildren,v,I,o,r,a,l),Wo(e,t,!0)):c||f(e,t,I,j,o,r,a,l,!1),L)V?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):gs(t,n,$,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const N=t.target=To(t.props,_);N&&gs(t,N,null,d,0)}else V&&gs(t,R,C,d,1);ys(t,L)}},remove(e,t,n,{um:s,o:{remove:o}},r){const{shapeFlag:a,children:l,anchor:c,targetStart:d,targetAnchor:u,target:f,props:h}=e;if(f&&(o(d),o(u)),r&&o(c),a&16){const m=r||!Bn(h);for(let _=0;_<l.length;_++){const y=l[_];s(y,t,n,m,!!y.dynamicChildren)}}},move:gs,hydrate:uc};function gs(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:a,anchor:l,shapeFlag:c,children:d,props:u}=e,f=r===2;if(f&&s(a,t,n),(!f||Bn(u))&&c&16)for(let h=0;h<d.length;h++)o(d[h],t,n,2);f&&s(l,t,n)}function uc(e,t,n,s,o,r,{o:{nextSibling:a,parentNode:l,querySelector:c,insert:d,createText:u}},f){const h=t.target=To(t.props,c);if(h){const m=Bn(t.props),_=h._lpa||h.firstChild;if(t.shapeFlag&16)if(m)t.anchor=f(a(e),t,l(e),n,s,o,r),t.targetStart=_,t.targetAnchor=_&&a(_);else{t.anchor=a(e);let y=_;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")t.targetStart=y;else if(y.data==="teleport anchor"){t.targetAnchor=y,h._lpa=t.targetAnchor&&a(t.targetAnchor);break}}y=a(y)}t.targetAnchor||Za(h,t,u,d),f(_&&a(_),t,h,n,s,o,r)}ys(t,m)}return t.anchor&&a(t.anchor)}const Xa=Ja;function ys(e,t){const n=e.ctx;if(n&&n.ut){let s,o;for(t?(s=e.el,o=e.anchor):(s=e.targetStart,o=e.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Za(e,t,n,s){const o=t.targetStart=n(""),r=t.targetAnchor=n("");return o[Wa]=r,e&&(s(o,e),s(r,e)),r}const Gt=Symbol("_leaveCb"),ms=Symbol("_enterCb");function ei(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vt(()=>{e.isMounted=!0}),ci(()=>{e.isUnmounting=!0}),e}const it=[Function,Array],ti={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},ni=e=>{const t=e.subTree;return t.component?ni(t.component):t},dc={name:"BaseTransition",props:ti,setup(e,{slots:t}){const n=Ii(),s=ei();return()=>{const o=t.default&&zo(t.default(),!0);if(!o||!o.length)return;const r=si(o),a=Ce(e),{mode:l}=a;if(s.isLeaving)return oo(r);const c=Tr(r);if(!c)return oo(r);let d=Jn(c,a,s,n,f=>d=f);c.type!==Xe&&un(c,d);let u=n.subTree&&Tr(n.subTree);if(u&&u.type!==Xe&&!rn(c,u)&&ni(n).type!==Xe){let f=Jn(u,a,s,n);if(un(u,f),l==="out-in"&&c.type!==Xe)return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},oo(r);l==="in-out"&&c.type!==Xe?f.delayLeave=(h,m,_)=>{const y=oi(s,u);y[String(u.key)]=u,h[Gt]=()=>{m(),h[Gt]=void 0,delete d.delayedLeave,u=void 0},d.delayedLeave=()=>{_(),delete d.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function si(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Xe){t=n;break}}return t}const fc=dc;function oi(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Jn(e,t,n,s,o){const{appear:r,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:d,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:m,onAfterLeave:_,onLeaveCancelled:y,onBeforeAppear:U,onAppear:L,onAfterAppear:b,onAppearCancelled:T}=t,v=String(e.key),$=oi(n,e),R=(I,j)=>{I&&mt(I,s,9,j)},C=(I,j)=>{const N=j[1];R(I,j),fe(I)?I.every(w=>w.length<=1)&&N():I.length<=1&&N()},V={mode:a,persisted:l,beforeEnter(I){let j=c;if(!n.isMounted)if(r)j=U||c;else return;I[Gt]&&I[Gt](!0);const N=$[v];N&&rn(e,N)&&N.el[Gt]&&N.el[Gt](),R(j,[I])},enter(I){let j=d,N=u,w=f;if(!n.isMounted)if(r)j=L||d,N=b||u,w=T||f;else return;let S=!1;const E=I[ms]=ue=>{S||(S=!0,ue?R(w,[I]):R(N,[I]),V.delayedLeave&&V.delayedLeave(),I[ms]=void 0)};j?C(j,[I,E]):E()},leave(I,j){const N=String(e.key);if(I[ms]&&I[ms](!0),n.isUnmounting)return j();R(h,[I]);let w=!1;const S=I[Gt]=E=>{w||(w=!0,j(),E?R(y,[I]):R(_,[I]),I[Gt]=void 0,$[N]===e&&delete $[N])};$[N]=e,m?C(m,[I,S]):S()},clone(I){const j=Jn(I,t,n,s,o);return o&&o(j),j}};return V}function oo(e){if(Bs(e))return e=Wt(e),e.children=null,e}function Tr(e){if(!Bs(e))return Qa(e.type)&&e.children?si(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ve(n.default))return n.default()}}function un(e,t){e.shapeFlag&6&&e.component?(e.transition=t,un(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zo(e,t=!1,n){let s=[],o=0;for(let r=0;r<e.length;r++){let a=e[r];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:r);a.type===be?(a.patchFlag&128&&o++,s=s.concat(zo(a.children,t,l))):(t||a.type!==Xe)&&s.push(l!=null?Wt(a,{key:l}):a)}if(o>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ri(e,t){return ve(e)?Be({name:e.name},t,{setup:e}):e}function ai(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Kn(e,t,n,s,o=!1){if(fe(e)){e.forEach((_,y)=>Kn(_,t&&(fe(t)?t[y]:t),n,s,o));return}if(jn(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Kn(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?Gs(s.component):s.el,a=o?null:r,{i:l,r:c}=e,d=t&&t.r,u=l.refs===Re?l.refs={}:l.refs,f=l.setupState,h=Ce(f),m=f===Re?()=>!1:_=>Ie(h,_);if(d!=null&&d!==c&&(Me(d)?(u[d]=null,m(d)&&(f[d]=null)):Ve(d)&&(d.value=null)),ve(c))is(c,l,12,[a,u]);else{const _=Me(c),y=Ve(c);if(_||y){const U=()=>{if(e.f){const L=_?m(c)?f[c]:u[c]:c.value;o?fe(L)&&Lo(L,r):fe(L)?L.includes(r)||L.push(r):_?(u[c]=[r],m(c)&&(f[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else _?(u[c]=a,m(c)&&(f[c]=a)):y&&(c.value=a,e.k&&(u[e.k]=a))};a?(U.id=-1,We(U,n)):U()}}}Ms().requestIdleCallback;Ms().cancelIdleCallback;const jn=e=>!!e.type.__asyncLoader,Bs=e=>e.type.__isKeepAlive;function hc(e,t){ii(e,"a",t)}function gc(e,t){ii(e,"da",t)}function ii(e,t,n=Ge){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Ks(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Bs(o.parent.vnode)&&mc(s,t,n,o),o=o.parent}}function mc(e,t,n,s){const o=Ks(t,e,s,!0);Zt(()=>{Lo(s[t],o)},n)}function Ks(e,t,n=Ge,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Mt();const l=cs(n),c=mt(t,n,e,a);return l(),Ht(),c});return s?o.unshift(r):o.push(r),r}}const Ut=e=>(t,n=Ge)=>{(!Zn||e==="sp")&&Ks(e,(...s)=>t(...s),n)},pc=Ut("bm"),vt=Ut("m"),vc=Ut("bu"),li=Ut("u"),ci=Ut("bum"),Zt=Ut("um"),yc=Ut("sp"),bc=Ut("rtg"),Tc=Ut("rtc");function wc(e,t=Ge){Ks("ec",e,t)}const _c="components";function $n(e,t){return Sc(_c,e,!0,t)||e}const Cc=Symbol.for("v-ndc");function Sc(e,t,n=!0,s=!1){const o=nt||Ge;if(o){const r=o.type;{const l=uu(r,!1);if(l&&(l===t||l===ut(t)||l===Ns(ut(t))))return r}const a=wr(o[e]||r[e],t)||wr(o.appContext[e],t);return!a&&s?r:a}}function wr(e,t){return e&&(e[t]||e[ut(t)]||e[Ns(ut(t))])}function Le(e,t,n,s){let o;const r=n,a=fe(e);if(a||Me(e)){const l=a&&pn(e);let c=!1,d=!1;l&&(c=!lt(e),d=qt(e),e=Hs(e)),o=new Array(e.length);for(let u=0,f=e.length;u<f;u++)o[u]=t(c?d?ks(Fe(e[u])):Fe(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(Pe(e))if(e[Symbol.iterator])o=Array.from(e,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let c=0,d=l.length;c<d;c++){const u=l[c];o[c]=t(e[u],u,c,r)}}else o=[];return o}const wo=e=>e?$i(e)?Gs(e):wo(e.parent):null,Fn=Be(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wo(e.parent),$root:e=>wo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>di(e),$forceUpdate:e=>e.f||(e.f=()=>{Vo(e.update)}),$nextTick:e=>e.n||(e.n=Wn.bind(e.proxy)),$watch:e=>Vc.bind(e)}),ro=(e,t)=>e!==Re&&!e.__isScriptSetup&&Ie(e,t),kc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:r,accessCache:a,type:l,appContext:c}=e;let d;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(ro(s,t))return a[t]=1,s[t];if(o!==Re&&Ie(o,t))return a[t]=2,o[t];if((d=e.propsOptions[0])&&Ie(d,t))return a[t]=3,r[t];if(n!==Re&&Ie(n,t))return a[t]=4,n[t];_o&&(a[t]=0)}}const u=Fn[t];let f,h;if(u)return t==="$attrs"&&Ye(e.attrs,"get",""),u(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(n!==Re&&Ie(n,t))return a[t]=4,n[t];if(h=c.config.globalProperties,Ie(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return ro(o,t)?(o[t]=n,!0):s!==Re&&Ie(s,t)?(s[t]=n,!0):Ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},a){let l;return!!n[a]||e!==Re&&Ie(e,a)||ro(t,a)||(l=r[0])&&Ie(l,a)||Ie(s,a)||Ie(Fn,a)||Ie(o.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ie(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function _r(e){return fe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let _o=!0;function Ec(e){const t=di(e),n=e.proxy,s=e.ctx;_o=!1,t.beforeCreate&&Cr(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:a,watch:l,provide:c,inject:d,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:_,activated:y,deactivated:U,beforeDestroy:L,beforeUnmount:b,destroyed:T,unmounted:v,render:$,renderTracked:R,renderTriggered:C,errorCaptured:V,serverPrefetch:I,expose:j,inheritAttrs:N,components:w,directives:S,filters:E}=t;if(d&&Ac(d,s,null),a)for(const ie in a){const re=a[ie];ve(re)&&(s[ie]=re.bind(n))}if(o){const ie=o.call(n,n);Pe(ie)&&(e.data=Lt(ie))}if(_o=!0,r)for(const ie in r){const re=r[ie],oe=ve(re)?re.bind(n,n):ve(re.get)?re.get.bind(n,n):Et,Ee=!ve(re)&&ve(re.set)?re.set.bind(n):Et,Te=Z({get:oe,set:Ee});Object.defineProperty(s,ie,{enumerable:!0,configurable:!0,get:()=>Te.value,set:le=>Te.value=le})}if(l)for(const ie in l)ui(l[ie],s,n,ie);if(c){const ie=ve(c)?c.call(n):c;Reflect.ownKeys(ie).forEach(re=>{bs(re,ie[re])})}u&&Cr(u,e,"c");function F(ie,re){fe(re)?re.forEach(oe=>ie(oe.bind(n))):re&&ie(re.bind(n))}if(F(pc,f),F(vt,h),F(vc,m),F(li,_),F(hc,y),F(gc,U),F(wc,V),F(Tc,R),F(bc,C),F(ci,b),F(Zt,v),F(yc,I),fe(j))if(j.length){const ie=e.exposed||(e.exposed={});j.forEach(re=>{Object.defineProperty(ie,re,{get:()=>n[re],set:oe=>n[re]=oe})})}else e.exposed||(e.exposed={});$&&e.render===Et&&(e.render=$),N!=null&&(e.inheritAttrs=N),w&&(e.components=w),S&&(e.directives=S),I&&ai(e)}function Ac(e,t,n=Et){fe(e)&&(e=Co(e));for(const s in e){const o=e[s];let r;Pe(o)?"default"in o?r=gt(o.from||s,o.default,!0):r=gt(o.from||s):r=gt(o),Ve(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[s]=r}}function Cr(e,t,n){mt(fe(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function ui(e,t,n,s){let o=s.includes(".")?Ci(n,s):()=>n[s];if(Me(e)){const r=t[e];ve(r)&&rt(o,r)}else if(ve(e))rt(o,e.bind(n));else if(Pe(e))if(fe(e))e.forEach(r=>ui(r,t,n,s));else{const r=ve(e.handler)?e.handler.bind(n):t[e.handler];ve(r)&&rt(o,r,e)}}function di(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,l=r.get(t);let c;return l?c=l:!o.length&&!n&&!s?c=t:(c={},o.length&&o.forEach(d=>$s(c,d,a,!0)),$s(c,t,a)),Pe(t)&&r.set(t,c),c}function $s(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&$s(e,r,n,!0),o&&o.forEach(a=>$s(e,a,n,!0));for(const a in t)if(!(s&&a==="expose")){const l=Ic[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Ic={data:Sr,props:kr,emits:kr,methods:Nn,computed:Nn,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:Nn,directives:Nn,watch:xc,provide:Sr,inject:$c};function Sr(e,t){return t?e?function(){return Be(ve(e)?e.call(this,this):e,ve(t)?t.call(this,this):t)}:t:e}function $c(e,t){return Nn(Co(e),Co(t))}function Co(e){if(fe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function Nn(e,t){return e?Be(Object.create(null),e,t):t}function kr(e,t){return e?fe(e)&&fe(t)?[...new Set([...e,...t])]:Be(Object.create(null),_r(e),_r(t??{})):t}function xc(e,t){if(!e)return t;if(!t)return e;const n=Be(Object.create(null),e);for(const s in t)n[s]=qe(e[s],t[s]);return n}function fi(){return{app:null,config:{isNativeTag:Tl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rc=0;function Pc(e,t){return function(s,o=null){ve(s)||(s=Be({},s)),o!=null&&!Pe(o)&&(o=null);const r=fi(),a=new WeakSet,l=[];let c=!1;const d=r.app={_uid:Rc++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:fu,get config(){return r.config},set config(u){},use(u,...f){return a.has(u)||(u&&ve(u.install)?(a.add(u),u.install(d,...f)):ve(u)&&(a.add(u),u(d,...f))),d},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),d},component(u,f){return f?(r.components[u]=f,d):r.components[u]},directive(u,f){return f?(r.directives[u]=f,d):r.directives[u]},mount(u,f,h){if(!c){const m=d._ceVNode||ge(s,o);return m.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(m,u,h),c=!0,d._container=u,u.__vue_app__=d,Gs(m.component)}},onUnmount(u){l.push(u)},unmount(){c&&(mt(l,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,f){return r.provides[u]=f,d},runWithContext(u){const f=yn;yn=d;try{return u()}finally{yn=f}}};return d}}let yn=null;function bs(e,t){if(Ge){let n=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===n&&(n=Ge.provides=Object.create(s)),n[e]=t}}function gt(e,t,n=!1){const s=Ge||nt;if(s||yn){let o=yn?yn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&ve(t)?t.call(s&&s.proxy):t}}const hi={},gi=()=>Object.create(hi),mi=e=>Object.getPrototypeOf(e)===hi;function Oc(e,t,n,s=!1){const o={},r=gi();e.propsDefaults=Object.create(null),pi(e,t,o,r);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=s?o:Ba(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Dc(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:a}}=e,l=Ce(o),[c]=e.propsOptions;let d=!1;if((s||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(js(e.emitsOptions,h))continue;const m=t[h];if(c)if(Ie(r,h))m!==r[h]&&(r[h]=m,d=!0);else{const _=ut(h);o[_]=So(c,l,_,m,e,!1)}else m!==r[h]&&(r[h]=m,d=!0)}}}else{pi(e,t,o,r)&&(d=!0);let u;for(const f in l)(!t||!Ie(t,f)&&((u=Xt(f))===f||!Ie(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(o[f]=So(c,l,f,void 0,e,!0)):delete o[f]);if(r!==l)for(const f in r)(!t||!Ie(t,f))&&(delete r[f],d=!0)}d&&Pt(e.attrs,"set","")}function pi(e,t,n,s){const[o,r]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Mn(c))continue;const d=t[c];let u;o&&Ie(o,u=ut(c))?!r||!r.includes(u)?n[u]=d:(l||(l={}))[u]=d:js(e.emitsOptions,c)||(!(c in s)||d!==s[c])&&(s[c]=d,a=!0)}if(r){const c=Ce(n),d=l||Re;for(let u=0;u<r.length;u++){const f=r[u];n[f]=So(o,c,f,d[f],e,!Ie(d,f))}}return a}function So(e,t,n,s,o,r){const a=e[n];if(a!=null){const l=Ie(a,"default");if(l&&s===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ve(c)){const{propsDefaults:d}=o;if(n in d)s=d[n];else{const u=cs(o);s=d[n]=c.call(null,t),u()}}else s=c;o.ce&&o.ce._setProp(n,s)}a[0]&&(r&&!l?s=!1:a[1]&&(s===""||s===Xt(n))&&(s=!0))}return s}const Lc=new WeakMap;function vi(e,t,n=!1){const s=n?Lc:t.propsCache,o=s.get(e);if(o)return o;const r=e.props,a={},l=[];let c=!1;if(!ve(e)){const u=f=>{c=!0;const[h,m]=vi(f,t,!0);Be(a,h),m&&l.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!c)return Pe(e)&&s.set(e,gn),gn;if(fe(r))for(let u=0;u<r.length;u++){const f=ut(r[u]);Er(f)&&(a[f]=Re)}else if(r)for(const u in r){const f=ut(u);if(Er(f)){const h=r[u],m=a[f]=fe(h)||ve(h)?{type:h}:Be({},h),_=m.type;let y=!1,U=!0;if(fe(_))for(let L=0;L<_.length;++L){const b=_[L],T=ve(b)&&b.name;if(T==="Boolean"){y=!0;break}else T==="String"&&(U=!1)}else y=ve(_)&&_.name==="Boolean";m[0]=y,m[1]=U,(y||Ie(m,"default"))&&l.push(f)}}const d=[a,l];return Pe(e)&&s.set(e,d),d}function Er(e){return e[0]!=="$"&&!Mn(e)}const Yo=e=>e[0]==="_"||e==="$stable",qo=e=>fe(e)?e.map(kt):[kt(e)],Nc=(e,t,n)=>{if(t._n)return t;const s=Ne((...o)=>qo(t(...o)),n);return s._c=!1,s},yi=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Yo(o))continue;const r=e[o];if(ve(r))t[o]=Nc(o,r,s);else if(r!=null){const a=qo(r);t[o]=()=>a}}},bi=(e,t)=>{const n=qo(t);e.slots.default=()=>n},Ti=(e,t,n)=>{for(const s in t)(n||!Yo(s))&&(e[s]=t[s])},Mc=(e,t,n)=>{const s=e.slots=gi();if(e.vnode.shapeFlag&32){const o=t.__;o&&mo(s,"__",o,!0);const r=t._;r?(Ti(s,t,n),n&&mo(s,"_",r,!0)):yi(t,s)}else t&&bi(e,t)},Hc=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,a=Re;if(s.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:Ti(o,t,n):(r=!t.$stable,yi(t,o)),a=t}else t&&(bi(e,t),a={default:1});if(r)for(const l in o)!Yo(l)&&a[l]==null&&delete o[l]},We=Xc;function Uc(e){return Bc(e)}function Bc(e,t){const n=Ms();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:a,createText:l,createComment:c,setText:d,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=Et,insertStaticContent:_}=e,y=(g,p,k,M=null,B=null,H=null,X=void 0,W=null,Y=!!p.dynamicChildren)=>{if(g===p)return;g&&!rn(g,p)&&(M=D(g),le(g,B,H,!0),g=null),p.patchFlag===-2&&(Y=!1,p.dynamicChildren=null);const{type:G,ref:he,shapeFlag:ne}=p;switch(G){case Fs:U(g,p,k,M);break;case Xe:L(g,p,k,M);break;case Ts:g==null&&b(p,k,M,X);break;case be:w(g,p,k,M,B,H,X,W,Y);break;default:ne&1?$(g,p,k,M,B,H,X,W,Y):ne&6?S(g,p,k,M,B,H,X,W,Y):(ne&64||ne&128)&&G.process(g,p,k,M,B,H,X,W,Y,ce)}he!=null&&B?Kn(he,g&&g.ref,H,p||g,!p):he==null&&g&&g.ref!=null&&Kn(g.ref,null,H,g,!0)},U=(g,p,k,M)=>{if(g==null)s(p.el=l(p.children),k,M);else{const B=p.el=g.el;p.children!==g.children&&d(B,p.children)}},L=(g,p,k,M)=>{g==null?s(p.el=c(p.children||""),k,M):p.el=g.el},b=(g,p,k,M)=>{[g.el,g.anchor]=_(g.children,p,k,M,g.el,g.anchor)},T=({el:g,anchor:p},k,M)=>{let B;for(;g&&g!==p;)B=h(g),s(g,k,M),g=B;s(p,k,M)},v=({el:g,anchor:p})=>{let k;for(;g&&g!==p;)k=h(g),o(g),g=k;o(p)},$=(g,p,k,M,B,H,X,W,Y)=>{p.type==="svg"?X="svg":p.type==="math"&&(X="mathml"),g==null?R(p,k,M,B,H,X,W,Y):I(g,p,B,H,X,W,Y)},R=(g,p,k,M,B,H,X,W)=>{let Y,G;const{props:he,shapeFlag:ne,transition:de,dirs:me}=g;if(Y=g.el=a(g.type,H,he&&he.is,he),ne&8?u(Y,g.children):ne&16&&V(g.children,Y,null,M,B,ao(g,H),X,W),me&&tn(g,null,M,"created"),C(Y,g,g.scopeId,X,M),he){for(const Oe in he)Oe!=="value"&&!Mn(Oe)&&r(Y,Oe,null,he[Oe],H,M);"value"in he&&r(Y,"value",null,he.value,H),(G=he.onVnodeBeforeMount)&&_t(G,M,g)}me&&tn(g,null,M,"beforeMount");const we=Kc(B,de);we&&de.beforeEnter(Y),s(Y,p,k),((G=he&&he.onVnodeMounted)||we||me)&&We(()=>{G&&_t(G,M,g),we&&de.enter(Y),me&&tn(g,null,M,"mounted")},B)},C=(g,p,k,M,B)=>{if(k&&m(g,k),M)for(let H=0;H<M.length;H++)m(g,M[H]);if(B){let H=B.subTree;if(p===H||ki(H.type)&&(H.ssContent===p||H.ssFallback===p)){const X=B.vnode;C(g,X,X.scopeId,X.slotScopeIds,B.parent)}}},V=(g,p,k,M,B,H,X,W,Y=0)=>{for(let G=Y;G<g.length;G++){const he=g[G]=W?Vt(g[G]):kt(g[G]);y(null,he,p,k,M,B,H,X,W)}},I=(g,p,k,M,B,H,X)=>{const W=p.el=g.el;let{patchFlag:Y,dynamicChildren:G,dirs:he}=p;Y|=g.patchFlag&16;const ne=g.props||Re,de=p.props||Re;let me;if(k&&nn(k,!1),(me=de.onVnodeBeforeUpdate)&&_t(me,k,p,g),he&&tn(p,g,k,"beforeUpdate"),k&&nn(k,!0),(ne.innerHTML&&de.innerHTML==null||ne.textContent&&de.textContent==null)&&u(W,""),G?j(g.dynamicChildren,G,W,k,M,ao(p,B),H):X||re(g,p,W,null,k,M,ao(p,B),H,!1),Y>0){if(Y&16)N(W,ne,de,k,B);else if(Y&2&&ne.class!==de.class&&r(W,"class",null,de.class,B),Y&4&&r(W,"style",ne.style,de.style,B),Y&8){const we=p.dynamicProps;for(let Oe=0;Oe<we.length;Oe++){const $e=we[Oe],Ze=ne[$e],et=de[$e];(et!==Ze||$e==="value")&&r(W,$e,Ze,et,B,k)}}Y&1&&g.children!==p.children&&u(W,p.children)}else!X&&G==null&&N(W,ne,de,k,B);((me=de.onVnodeUpdated)||he)&&We(()=>{me&&_t(me,k,p,g),he&&tn(p,g,k,"updated")},M)},j=(g,p,k,M,B,H,X)=>{for(let W=0;W<p.length;W++){const Y=g[W],G=p[W],he=Y.el&&(Y.type===be||!rn(Y,G)||Y.shapeFlag&198)?f(Y.el):k;y(Y,G,he,null,M,B,H,X,!0)}},N=(g,p,k,M,B)=>{if(p!==k){if(p!==Re)for(const H in p)!Mn(H)&&!(H in k)&&r(g,H,p[H],null,B,M);for(const H in k){if(Mn(H))continue;const X=k[H],W=p[H];X!==W&&H!=="value"&&r(g,H,W,X,B,M)}"value"in k&&r(g,"value",p.value,k.value,B)}},w=(g,p,k,M,B,H,X,W,Y)=>{const G=p.el=g?g.el:l(""),he=p.anchor=g?g.anchor:l("");let{patchFlag:ne,dynamicChildren:de,slotScopeIds:me}=p;me&&(W=W?W.concat(me):me),g==null?(s(G,k,M),s(he,k,M),V(p.children||[],k,he,B,H,X,W,Y)):ne>0&&ne&64&&de&&g.dynamicChildren?(j(g.dynamicChildren,de,k,B,H,X,W),(p.key!=null||B&&p===B.subTree)&&Wo(g,p,!0)):re(g,p,k,he,B,H,X,W,Y)},S=(g,p,k,M,B,H,X,W,Y)=>{p.slotScopeIds=W,g==null?p.shapeFlag&512?B.ctx.activate(p,k,M,X,Y):E(p,k,M,B,H,X,Y):ue(g,p,Y)},E=(g,p,k,M,B,H,X)=>{const W=g.component=ru(g,M,B);if(Bs(g)&&(W.ctx.renderer=ce),au(W,!1,X),W.asyncDep){if(B&&B.registerDep(W,F,X),!g.el){const Y=W.subTree=ge(Xe);L(null,Y,p,k)}}else F(W,g,p,k,B,H,X)},ue=(g,p,k)=>{const M=p.component=g.component;if(Qc(g,p,k))if(M.asyncDep&&!M.asyncResolved){ie(M,p,k);return}else M.next=p,M.update();else p.el=g.el,M.vnode=p},F=(g,p,k,M,B,H,X)=>{const W=()=>{if(g.isMounted){let{next:ne,bu:de,u:me,parent:we,vnode:Oe}=g;{const Tt=wi(g);if(Tt){ne&&(ne.el=Oe.el,ie(g,ne,X)),Tt.asyncDep.then(()=>{g.isUnmounted||W()});return}}let $e=ne,Ze;nn(g,!1),ne?(ne.el=Oe.el,ie(g,ne,X)):ne=Oe,de&&vs(de),(Ze=ne.props&&ne.props.onVnodeBeforeUpdate)&&_t(Ze,we,ne,Oe),nn(g,!0);const et=Ir(g),bt=g.subTree;g.subTree=et,y(bt,et,f(bt.el),D(bt),g,B,H),ne.el=et.el,$e===null&&Jc(g,et.el),me&&We(me,B),(Ze=ne.props&&ne.props.onVnodeUpdated)&&We(()=>_t(Ze,we,ne,Oe),B)}else{let ne;const{el:de,props:me}=p,{bm:we,m:Oe,parent:$e,root:Ze,type:et}=g,bt=jn(p);nn(g,!1),we&&vs(we),!bt&&(ne=me&&me.onVnodeBeforeMount)&&_t(ne,$e,p),nn(g,!0);{Ze.ce&&Ze.ce._def.shadowRoot!==!1&&Ze.ce._injectChildStyle(et);const Tt=g.subTree=Ir(g);y(null,Tt,k,M,g,B,H),p.el=Tt.el}if(Oe&&We(Oe,B),!bt&&(ne=me&&me.onVnodeMounted)){const Tt=p;We(()=>_t(ne,$e,Tt),B)}(p.shapeFlag&256||$e&&jn($e.vnode)&&$e.vnode.shapeFlag&256)&&g.a&&We(g.a,B),g.isMounted=!0,p=k=M=null}};g.scope.on();const Y=g.effect=new Ea(W);g.scope.off();const G=g.update=Y.run.bind(Y),he=g.job=Y.runIfDirty.bind(Y);he.i=g,he.id=g.uid,Y.scheduler=()=>Vo(he),nn(g,!0),G()},ie=(g,p,k)=>{p.component=g;const M=g.vnode.props;g.vnode=p,g.next=null,Dc(g,p.props,M,k),Hc(g,p.children,k),Mt(),pr(g),Ht()},re=(g,p,k,M,B,H,X,W,Y=!1)=>{const G=g&&g.children,he=g?g.shapeFlag:0,ne=p.children,{patchFlag:de,shapeFlag:me}=p;if(de>0){if(de&128){Ee(G,ne,k,M,B,H,X,W,Y);return}else if(de&256){oe(G,ne,k,M,B,H,X,W,Y);return}}me&8?(he&16&&ee(G,B,H),ne!==G&&u(k,ne)):he&16?me&16?Ee(G,ne,k,M,B,H,X,W,Y):ee(G,B,H,!0):(he&8&&u(k,""),me&16&&V(ne,k,M,B,H,X,W,Y))},oe=(g,p,k,M,B,H,X,W,Y)=>{g=g||gn,p=p||gn;const G=g.length,he=p.length,ne=Math.min(G,he);let de;for(de=0;de<ne;de++){const me=p[de]=Y?Vt(p[de]):kt(p[de]);y(g[de],me,k,null,B,H,X,W,Y)}G>he?ee(g,B,H,!0,!1,ne):V(p,k,M,B,H,X,W,Y,ne)},Ee=(g,p,k,M,B,H,X,W,Y)=>{let G=0;const he=p.length;let ne=g.length-1,de=he-1;for(;G<=ne&&G<=de;){const me=g[G],we=p[G]=Y?Vt(p[G]):kt(p[G]);if(rn(me,we))y(me,we,k,null,B,H,X,W,Y);else break;G++}for(;G<=ne&&G<=de;){const me=g[ne],we=p[de]=Y?Vt(p[de]):kt(p[de]);if(rn(me,we))y(me,we,k,null,B,H,X,W,Y);else break;ne--,de--}if(G>ne){if(G<=de){const me=de+1,we=me<he?p[me].el:M;for(;G<=de;)y(null,p[G]=Y?Vt(p[G]):kt(p[G]),k,we,B,H,X,W,Y),G++}}else if(G>de)for(;G<=ne;)le(g[G],B,H,!0),G++;else{const me=G,we=G,Oe=new Map;for(G=we;G<=de;G++){const ot=p[G]=Y?Vt(p[G]):kt(p[G]);ot.key!=null&&Oe.set(ot.key,G)}let $e,Ze=0;const et=de-we+1;let bt=!1,Tt=0;const Rn=new Array(et);for(G=0;G<et;G++)Rn[G]=0;for(G=me;G<=ne;G++){const ot=g[G];if(Ze>=et){le(ot,B,H,!0);continue}let wt;if(ot.key!=null)wt=Oe.get(ot.key);else for($e=we;$e<=de;$e++)if(Rn[$e-we]===0&&rn(ot,p[$e])){wt=$e;break}wt===void 0?le(ot,B,H,!0):(Rn[wt-we]=G+1,wt>=Tt?Tt=wt:bt=!0,y(ot,p[wt],k,null,B,H,X,W,Y),Ze++)}const ur=bt?jc(Rn):gn;for($e=ur.length-1,G=et-1;G>=0;G--){const ot=we+G,wt=p[ot],dr=ot+1<he?p[ot+1].el:M;Rn[G]===0?y(null,wt,k,dr,B,H,X,W,Y):bt&&($e<0||G!==ur[$e]?Te(wt,k,dr,2):$e--)}}},Te=(g,p,k,M,B=null)=>{const{el:H,type:X,transition:W,children:Y,shapeFlag:G}=g;if(G&6){Te(g.component.subTree,p,k,M);return}if(G&128){g.suspense.move(p,k,M);return}if(G&64){X.move(g,p,k,ce);return}if(X===be){s(H,p,k);for(let ne=0;ne<Y.length;ne++)Te(Y[ne],p,k,M);s(g.anchor,p,k);return}if(X===Ts){T(g,p,k);return}if(M!==2&&G&1&&W)if(M===0)W.beforeEnter(H),s(H,p,k),We(()=>W.enter(H),B);else{const{leave:ne,delayLeave:de,afterLeave:me}=W,we=()=>{g.ctx.isUnmounted?o(H):s(H,p,k)},Oe=()=>{ne(H,()=>{we(),me&&me()})};de?de(H,we,Oe):Oe()}else s(H,p,k)},le=(g,p,k,M=!1,B=!1)=>{const{type:H,props:X,ref:W,children:Y,dynamicChildren:G,shapeFlag:he,patchFlag:ne,dirs:de,cacheIndex:me}=g;if(ne===-2&&(B=!1),W!=null&&(Mt(),Kn(W,null,k,g,!0),Ht()),me!=null&&(p.renderCache[me]=void 0),he&256){p.ctx.deactivate(g);return}const we=he&1&&de,Oe=!jn(g);let $e;if(Oe&&($e=X&&X.onVnodeBeforeUnmount)&&_t($e,p,g),he&6)J(g.component,k,M);else{if(he&128){g.suspense.unmount(k,M);return}we&&tn(g,null,p,"beforeUnmount"),he&64?g.type.remove(g,p,k,ce,M):G&&!G.hasOnce&&(H!==be||ne>0&&ne&64)?ee(G,p,k,!1,!0):(H===be&&ne&384||!B&&he&16)&&ee(Y,p,k),M&&A(g)}(Oe&&($e=X&&X.onVnodeUnmounted)||we)&&We(()=>{$e&&_t($e,p,g),we&&tn(g,null,p,"unmounted")},k)},A=g=>{const{type:p,el:k,anchor:M,transition:B}=g;if(p===be){O(k,M);return}if(p===Ts){v(g);return}const H=()=>{o(k),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(g.shapeFlag&1&&B&&!B.persisted){const{leave:X,delayLeave:W}=B,Y=()=>X(k,H);W?W(g.el,H,Y):Y()}else H()},O=(g,p)=>{let k;for(;g!==p;)k=h(g),o(g),g=k;o(p)},J=(g,p,k)=>{const{bum:M,scope:B,job:H,subTree:X,um:W,m:Y,a:G,parent:he,slots:{__:ne}}=g;Ar(Y),Ar(G),M&&vs(M),he&&fe(ne)&&ne.forEach(de=>{he.renderCache[de]=void 0}),B.stop(),H&&(H.flags|=8,le(X,g,p,k)),W&&We(W,p),We(()=>{g.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},ee=(g,p,k,M=!1,B=!1,H=0)=>{for(let X=H;X<g.length;X++)le(g[X],p,k,M,B)},D=g=>{if(g.shapeFlag&6)return D(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const p=h(g.anchor||g.el),k=p&&p[Wa];return k?h(k):p};let se=!1;const te=(g,p,k)=>{g==null?p._vnode&&le(p._vnode,null,null,!0):y(p._vnode||null,g,p,null,null,null,k),p._vnode=g,se||(se=!0,pr(),za(),se=!1)},ce={p:y,um:le,m:Te,r:A,mt:E,mc:V,pc:re,pbc:j,n:D,o:e};return{render:te,hydrate:void 0,createApp:Pc(te)}}function ao({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function nn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Kc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Wo(e,t,n=!1){const s=e.children,o=t.children;if(fe(s)&&fe(o))for(let r=0;r<s.length;r++){const a=s[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=Vt(o[r]),l.el=a.el),!n&&l.patchFlag!==-2&&Wo(a,l)),l.type===Fs&&(l.el=a.el),l.type===Xe&&!l.el&&(l.el=a.el)}}function jc(e){const t=e.slice(),n=[0];let s,o,r,a,l;const c=e.length;for(s=0;s<c;s++){const d=e[s];if(d!==0){if(o=n[n.length-1],e[o]<d){t[s]=o,n.push(s);continue}for(r=0,a=n.length-1;r<a;)l=r+a>>1,e[n[l]]<d?r=l+1:a=l;d<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function wi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:wi(t)}function Ar(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Fc=Symbol.for("v-scx"),Gc=()=>gt(Fc);function rt(e,t,n){return _i(e,t,n)}function _i(e,t,n=Re){const{immediate:s,deep:o,flush:r,once:a}=n,l=Be({},n),c=t&&s||!t&&r!=="post";let d;if(Zn){if(r==="sync"){const m=Gc();d=m.__watcherHandles||(m.__watcherHandles=[])}else if(!c){const m=()=>{};return m.stop=Et,m.resume=Et,m.pause=Et,m}}const u=Ge;l.call=(m,_,y)=>mt(m,u,_,y);let f=!1;r==="post"?l.scheduler=m=>{We(m,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(m,_)=>{_?m():Vo(m)}),l.augmentJob=m=>{t&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=ac(e,t,l);return Zn&&(d?d.push(h):c&&h()),h}function Vc(e,t,n){const s=this.proxy,o=Me(e)?e.includes(".")?Ci(s,e):()=>s[e]:e.bind(s,s);let r;ve(t)?r=t:(r=t.handler,n=t);const a=cs(this),l=_i(o,r.bind(s),n);return a(),l}function Ci(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}const zc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ut(t)}Modifiers`]||e[`${Xt(t)}Modifiers`];function Yc(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Re;let o=n;const r=t.startsWith("update:"),a=r&&zc(s,t.slice(7));a&&(a.trim&&(o=n.map(u=>Me(u)?u.trim():u)),a.number&&(o=n.map(Ss)));let l,c=s[l=Zs(t)]||s[l=Zs(ut(t))];!c&&r&&(c=s[l=Zs(Xt(t))]),c&&mt(c,e,6,o);const d=s[l+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,mt(d,e,6,o)}}function Si(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let a={},l=!1;if(!ve(e)){const c=d=>{const u=Si(d,t,!0);u&&(l=!0,Be(a,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(Pe(e)&&s.set(e,null),null):(fe(r)?r.forEach(c=>a[c]=null):Be(a,r),Pe(e)&&s.set(e,a),a)}function js(e,t){return!e||!Ds(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ie(e,t[0].toLowerCase()+t.slice(1))||Ie(e,Xt(t))||Ie(e,t))}function Ir(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[r],slots:a,attrs:l,emit:c,render:d,renderCache:u,props:f,data:h,setupState:m,ctx:_,inheritAttrs:y}=e,U=Is(e);let L,b;try{if(n.shapeFlag&4){const v=o||s,$=v;L=kt(d.call($,v,u,f,m,h,_)),b=l}else{const v=t;L=kt(v.length>1?v(f,{attrs:l,slots:a,emit:c}):v(f,null)),b=t.props?l:qc(l)}}catch(v){Gn.length=0,Us(v,e,1),L=ge(Xe)}let T=L;if(b&&y!==!1){const v=Object.keys(b),{shapeFlag:$}=T;v.length&&$&7&&(r&&v.some(Do)&&(b=Wc(b,r)),T=Wt(T,b,!1,!0))}return n.dirs&&(T=Wt(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&un(T,n.transition),L=T,Is(U),L}const qc=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ds(n))&&((t||(t={}))[n]=e[n]);return t},Wc=(e,t)=>{const n={};for(const s in e)(!Do(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Qc(e,t,n){const{props:s,children:o,component:r}=e,{props:a,children:l,patchFlag:c}=t,d=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?$r(s,a,d):!!a;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==s[h]&&!js(d,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:s===a?!1:s?a?$r(s,a,d):!0:!!a;return!1}function $r(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!js(n,r))return!0}return!1}function Jc({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const ki=e=>e.__isSuspense;function Xc(e,t){t&&t.pendingBranch?fe(e)?t.effects.push(...e):t.effects.push(e):cc(e)}const be=Symbol.for("v-fgt"),Fs=Symbol.for("v-txt"),Xe=Symbol.for("v-cmt"),Ts=Symbol.for("v-stc"),Gn=[];let at=null;function x(e=!1){Gn.push(at=e?null:[])}function Zc(){Gn.pop(),at=Gn[Gn.length-1]||null}let Xn=1;function xr(e,t=!1){Xn+=e,e<0&&at&&t&&(at.hasOnce=!0)}function Ei(e){return e.dynamicChildren=Xn>0?at||gn:null,Zc(),Xn>0&&at&&at.push(e),e}function P(e,t,n,s,o,r){return Ei(i(e,t,n,s,o,r,!0))}function ls(e,t,n,s,o){return Ei(ge(e,t,n,s,o,!0))}function xs(e){return e?e.__v_isVNode===!0:!1}function rn(e,t){return e.type===t.type&&e.key===t.key}const Ai=({key:e})=>e??null,ws=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Me(e)||Ve(e)||ve(e)?{i:nt,r:e,k:t,f:!!n}:e:null);function i(e,t=null,n=null,s=0,o=null,r=e===be?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ai(t),ref:t&&ws(t),scopeId:qa,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:nt};return l?(Qo(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=Me(n)?8:16),Xn>0&&!a&&at&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&at.push(c),c}const ge=eu;function eu(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===Cc)&&(e=Xe),xs(e)){const l=Wt(e,t,!0);return n&&Qo(l,n),Xn>0&&!r&&at&&(l.shapeFlag&6?at[at.indexOf(e)]=l:at.push(l)),l.patchFlag=-2,l}if(du(e)&&(e=e.__vccOpts),t){t=tu(t);let{class:l,style:c}=t;l&&!Me(l)&&(t.class=ke(l)),Pe(c)&&(Go(c)&&!fe(c)&&(c=Be({},c)),t.style=bn(c))}const a=Me(e)?1:ki(e)?128:Qa(e)?64:Pe(e)?4:ve(e)?2:0;return i(e,t,n,s,o,a,r,!0)}function tu(e){return e?Go(e)||mi(e)?Be({},e):e:null}function Wt(e,t,n=!1,s=!1){const{props:o,ref:r,patchFlag:a,children:l,transition:c}=e,d=t?nu(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Ai(d),ref:t&&t.ref?n&&r?fe(r)?r.concat(ws(t)):[r,ws(t)]:ws(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==be?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wt(e.ssContent),ssFallback:e.ssFallback&&Wt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&un(u,c.clone(u)),u}function q(e=" ",t=0){return ge(Fs,null,e,t)}function Nt(e,t){const n=ge(Ts,null,e);return n.staticCount=t,n}function pe(e="",t=!1){return t?(x(),ls(Xe,null,e)):ge(Xe,null,e)}function kt(e){return e==null||typeof e=="boolean"?ge(Xe):fe(e)?ge(be,null,e.slice()):xs(e)?Vt(e):ge(Fs,null,String(e))}function Vt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Wt(e)}function Qo(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(fe(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Qo(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!mi(t)?t._ctx=nt:o===3&&nt&&(nt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ve(t)?(t={default:t,_ctx:nt},n=32):(t=String(t),s&64?(n=16,t=[q(t)]):n=8);e.children=t,e.shapeFlag|=n}function nu(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=ke([t.class,s.class]));else if(o==="style")t.style=bn([t.style,s.style]);else if(Ds(o)){const r=t[o],a=s[o];a&&r!==a&&!(fe(r)&&r.includes(a))&&(t[o]=r?[].concat(r,a):a)}else o!==""&&(t[o]=s[o])}return t}function _t(e,t,n,s=null){mt(e,t,7,[n,s])}const su=fi();let ou=0;function ru(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||su,r={uid:ou++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ol(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vi(s,o),emitsOptions:Si(s,o),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:s.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Yc.bind(null,r),e.ce&&e.ce(r),r}let Ge=null;const Ii=()=>Ge||nt;let Rs,ko;{const e=Ms(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),r=>{o.length>1?o.forEach(a=>a(r)):o[0](r)}};Rs=t("__VUE_INSTANCE_SETTERS__",n=>Ge=n),ko=t("__VUE_SSR_SETTERS__",n=>Zn=n)}const cs=e=>{const t=Ge;return Rs(e),e.scope.on(),()=>{e.scope.off(),Rs(t)}},Rr=()=>{Ge&&Ge.scope.off(),Rs(null)};function $i(e){return e.vnode.shapeFlag&4}let Zn=!1;function au(e,t=!1,n=!1){t&&ko(t);const{props:s,children:o}=e.vnode,r=$i(e);Oc(e,s,r,t),Mc(e,o,n||t);const a=r?iu(e,t):void 0;return t&&ko(!1),a}function iu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,kc);const{setup:s}=n;if(s){Mt();const o=e.setupContext=s.length>1?cu(e):null,r=cs(e),a=is(s,e,0,[e.props,o]),l=Ta(a);if(Ht(),r(),(l||e.sp)&&!jn(e)&&ai(e),l){if(a.then(Rr,Rr),t)return a.then(c=>{Pr(e,c)}).catch(c=>{Us(c,e,0)});e.asyncDep=a}else Pr(e,a)}else xi(e)}function Pr(e,t,n){ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=Fa(t)),xi(e)}function xi(e,t,n){const s=e.type;e.render||(e.render=s.render||Et);{const o=cs(e);Mt();try{Ec(e)}finally{Ht(),o()}}}const lu={get(e,t){return Ye(e,"get",""),e[t]}};function cu(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,lu),slots:e.slots,emit:e.emit,expose:t}}function Gs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Fa(Zl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Fn)return Fn[n](e)},has(t,n){return n in t||n in Fn}})):e.proxy}function uu(e,t=!0){return ve(e)?e.displayName||e.name:e.name||t&&e.__name}function du(e){return ve(e)&&"__vccOpts"in e}const Z=(e,t)=>oc(e,t,Zn);function Jo(e,t,n){const s=arguments.length;return s===2?Pe(t)&&!fe(t)?xs(t)?ge(e,null,[t]):ge(e,t):ge(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&xs(n)&&(n=[n]),ge(e,t,n))}const fu="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Eo;const Or=typeof window<"u"&&window.trustedTypes;if(Or)try{Eo=Or.createPolicy("vue",{createHTML:e=>e})}catch{}const Ri=Eo?e=>Eo.createHTML(e):e=>e,hu="http://www.w3.org/2000/svg",gu="http://www.w3.org/1998/Math/MathML",Rt=typeof document<"u"?document:null,Dr=Rt&&Rt.createElement("template"),mu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?Rt.createElementNS(hu,e):t==="mathml"?Rt.createElementNS(gu,e):n?Rt.createElement(e,{is:n}):Rt.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Rt.createTextNode(e),createComment:e=>Rt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,r){const a=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Dr.innerHTML=Ri(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Dr.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Bt="transition",On="animation",Tn=Symbol("_vtc"),Pi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Oi=Be({},ti,Pi),pu=e=>(e.displayName="Transition",e.props=Oi,e),Vs=pu((e,{slots:t})=>Jo(fc,Di(e),t)),sn=(e,t=[])=>{fe(e)?e.forEach(n=>n(...t)):e&&e(...t)},Lr=e=>e?fe(e)?e.some(t=>t.length>1):e.length>1:!1;function Di(e){const t={};for(const w in e)w in Pi||(t[w]=e[w]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=r,appearActiveClass:d=a,appearToClass:u=l,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,_=vu(o),y=_&&_[0],U=_&&_[1],{onBeforeEnter:L,onEnter:b,onEnterCancelled:T,onLeave:v,onLeaveCancelled:$,onBeforeAppear:R=L,onAppear:C=b,onAppearCancelled:V=T}=t,I=(w,S,E,ue)=>{w._enterCancelled=ue,jt(w,S?u:l),jt(w,S?d:a),E&&E()},j=(w,S)=>{w._isLeaving=!1,jt(w,f),jt(w,m),jt(w,h),S&&S()},N=w=>(S,E)=>{const ue=w?C:b,F=()=>I(S,w,E);sn(ue,[S,F]),Nr(()=>{jt(S,w?c:r),Ct(S,w?u:l),Lr(ue)||Mr(S,s,y,F)})};return Be(t,{onBeforeEnter(w){sn(L,[w]),Ct(w,r),Ct(w,a)},onBeforeAppear(w){sn(R,[w]),Ct(w,c),Ct(w,d)},onEnter:N(!1),onAppear:N(!0),onLeave(w,S){w._isLeaving=!0;const E=()=>j(w,S);Ct(w,f),w._enterCancelled?(Ct(w,h),Ao()):(Ao(),Ct(w,h)),Nr(()=>{w._isLeaving&&(jt(w,f),Ct(w,m),Lr(v)||Mr(w,s,U,E))}),sn(v,[w,E])},onEnterCancelled(w){I(w,!1,void 0,!0),sn(T,[w])},onAppearCancelled(w){I(w,!0,void 0,!0),sn(V,[w])},onLeaveCancelled(w){j(w),sn($,[w])}})}function vu(e){if(e==null)return null;if(Pe(e))return[io(e.enter),io(e.leave)];{const t=io(e);return[t,t]}}function io(e){return kl(e)}function Ct(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Tn]||(e[Tn]=new Set)).add(t)}function jt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Tn];n&&(n.delete(t),n.size||(e[Tn]=void 0))}function Nr(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let yu=0;function Mr(e,t,n,s){const o=e._endId=++yu,r=()=>{o===e._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:a,timeout:l,propCount:c}=Li(e,t);if(!a)return s();const d=a+"end";let u=0;const f=()=>{e.removeEventListener(d,h),r()},h=m=>{m.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},l+1),e.addEventListener(d,h)}function Li(e,t){const n=window.getComputedStyle(e),s=_=>(n[_]||"").split(", "),o=s(`${Bt}Delay`),r=s(`${Bt}Duration`),a=Hr(o,r),l=s(`${On}Delay`),c=s(`${On}Duration`),d=Hr(l,c);let u=null,f=0,h=0;t===Bt?a>0&&(u=Bt,f=a,h=r.length):t===On?d>0&&(u=On,f=d,h=c.length):(f=Math.max(a,d),u=f>0?a>d?Bt:On:null,h=u?u===Bt?r.length:c.length:0);const m=u===Bt&&/\b(transform|all)(,|$)/.test(s(`${Bt}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:m}}function Hr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ur(n)+Ur(e[s])))}function Ur(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ao(){return document.body.offsetHeight}function bu(e,t,n){const s=e[Tn];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ps=Symbol("_vod"),Ni=Symbol("_vsh"),es={beforeMount(e,{value:t},{transition:n}){e[Ps]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Dn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Dn(e,!0),s.enter(e)):s.leave(e,()=>{Dn(e,!1)}):Dn(e,t))},beforeUnmount(e,{value:t}){Dn(e,t)}};function Dn(e,t){e.style.display=t?e[Ps]:"none",e[Ni]=!t}const Tu=Symbol(""),wu=/(^|;)\s*display\s*:/;function _u(e,t,n){const s=e.style,o=Me(n);let r=!1;if(n&&!o){if(t)if(Me(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&_s(s,l,"")}else for(const a in t)n[a]==null&&_s(s,a,"");for(const a in n)a==="display"&&(r=!0),_s(s,a,n[a])}else if(o){if(t!==n){const a=s[Tu];a&&(n+=";"+a),s.cssText=n,r=wu.test(n)}}else t&&e.removeAttribute("style");Ps in e&&(e[Ps]=r?s.display:"",e[Ni]&&(s.display="none"))}const Br=/\s*!important$/;function _s(e,t,n){if(fe(n))n.forEach(s=>_s(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Cu(e,t);Br.test(n)?e.setProperty(Xt(s),n.replace(Br,""),"important"):e[s]=n}}const Kr=["Webkit","Moz","ms"],lo={};function Cu(e,t){const n=lo[t];if(n)return n;let s=ut(t);if(s!=="filter"&&s in e)return lo[t]=s;s=Ns(s);for(let o=0;o<Kr.length;o++){const r=Kr[o]+s;if(r in e)return lo[t]=r}return t}const jr="http://www.w3.org/1999/xlink";function Fr(e,t,n,s,o,r=Rl(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(jr,t.slice(6,t.length)):e.setAttributeNS(jr,t,n):n==null||r&&!Ca(n)?e.removeAttribute(t):e.setAttribute(t,r?"":It(n)?String(n):n)}function Gr(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ri(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Ca(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(o||t)}function Dt(e,t,n,s){e.addEventListener(t,n,s)}function Su(e,t,n,s){e.removeEventListener(t,n,s)}const Vr=Symbol("_vei");function ku(e,t,n,s,o=null){const r=e[Vr]||(e[Vr]={}),a=r[t];if(s&&a)a.value=s;else{const[l,c]=Eu(t);if(s){const d=r[t]=$u(s,o);Dt(e,l,d,c)}else a&&(Su(e,l,a,c),r[t]=void 0)}}const zr=/(?:Once|Passive|Capture)$/;function Eu(e){let t;if(zr.test(e)){t={};let s;for(;s=e.match(zr);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xt(e.slice(2)),t]}let co=0;const Au=Promise.resolve(),Iu=()=>co||(Au.then(()=>co=0),co=Date.now());function $u(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;mt(xu(s,n.value),t,5,[s])};return n.value=e,n.attached=Iu(),n}function xu(e,t){if(fe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Yr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ru=(e,t,n,s,o,r)=>{const a=o==="svg";t==="class"?bu(e,s,a):t==="style"?_u(e,n,s):Ds(t)?Do(t)||ku(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Pu(e,t,s,a))?(Gr(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Fr(e,t,s,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Me(s))?Gr(e,ut(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Fr(e,t,s,a))};function Pu(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Yr(t)&&ve(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Yr(t)&&Me(n)?!1:t in e}const Mi=new WeakMap,Hi=new WeakMap,Os=Symbol("_moveCb"),qr=Symbol("_enterCb"),Ou=e=>(delete e.props.mode,e),Du=Ou({name:"TransitionGroup",props:Be({},Oi,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Ii(),s=ei();let o,r;return li(()=>{if(!o.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!Uu(o[0].el,n.vnode.el,a)){o=[];return}o.forEach(Nu),o.forEach(Mu);const l=o.filter(Hu);Ao(),l.forEach(c=>{const d=c.el,u=d.style;Ct(d,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=d[Os]=h=>{h&&h.target!==d||(!h||/transform$/.test(h.propertyName))&&(d.removeEventListener("transitionend",f),d[Os]=null,jt(d,a))};d.addEventListener("transitionend",f)}),o=[]}),()=>{const a=Ce(e),l=Di(a);let c=a.tag||be;if(o=[],r)for(let d=0;d<r.length;d++){const u=r[d];u.el&&u.el instanceof Element&&(o.push(u),un(u,Jn(u,l,s,n)),Mi.set(u,u.el.getBoundingClientRect()))}r=t.default?zo(t.default()):[];for(let d=0;d<r.length;d++){const u=r[d];u.key!=null&&un(u,Jn(u,l,s,n))}return ge(c,null,r)}}}),Lu=Du;function Nu(e){const t=e.el;t[Os]&&t[Os](),t[qr]&&t[qr]()}function Mu(e){Hi.set(e,e.el.getBoundingClientRect())}function Hu(e){const t=Mi.get(e),n=Hi.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function Uu(e,t,n){const s=e.cloneNode(),o=e[Tn];o&&o.forEach(l=>{l.split(/\s+/).forEach(c=>c&&s.classList.remove(c))}),n.split(/\s+/).forEach(l=>l&&s.classList.add(l)),s.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(s);const{hasTransform:a}=Li(s);return r.removeChild(s),a}const Qt=e=>{const t=e.props["onUpdate:modelValue"]||!1;return fe(t)?n=>vs(t,n):t};function Bu(e){e.target.composing=!0}function Wr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ct=Symbol("_assign"),wn={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[ct]=Qt(o);const r=s||o.props&&o.props.type==="number";Dt(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Ss(l)),e[ct](l)}),n&&Dt(e,"change",()=>{e.value=e.value.trim()}),t||(Dt(e,"compositionstart",Bu),Dt(e,"compositionend",Wr),Dt(e,"change",Wr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:r}},a){if(e[ct]=Qt(a),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ss(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===c)||(e.value=c))}},Ui={deep:!0,created(e,t,n){e[ct]=Qt(n),Dt(e,"change",()=>{const s=e._modelValue,o=_n(e),r=e.checked,a=e[ct];if(fe(s)){const l=Mo(s,o),c=l!==-1;if(r&&!c)a(s.concat(o));else if(!r&&c){const d=[...s];d.splice(l,1),a(d)}}else if(In(s)){const l=new Set(s);r?l.add(o):l.delete(o),a(l)}else a(Ki(e,r))})},mounted:Qr,beforeUpdate(e,t,n){e[ct]=Qt(n),Qr(e,t,n)}};function Qr(e,{value:t,oldValue:n},s){e._modelValue=t;let o;if(fe(t))o=Mo(t,s.props.value)>-1;else if(In(t))o=t.has(s.props.value);else{if(t===n)return;o=cn(t,Ki(e,!0))}e.checked!==o&&(e.checked=o)}const Ku={created(e,{value:t},n){e.checked=cn(t,n.props.value),e[ct]=Qt(n),Dt(e,"change",()=>{e[ct](_n(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[ct]=Qt(s),t!==n&&(e.checked=cn(t,s.props.value))}},Bi={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=In(t);Dt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?Ss(_n(a)):_n(a));e[ct](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Wn(()=>{e._assigning=!1})}),e[ct]=Qt(s)},mounted(e,{value:t}){Jr(e,t)},beforeUpdate(e,t,n){e[ct]=Qt(n)},updated(e,{value:t}){e._assigning||Jr(e,t)}};function Jr(e,t){const n=e.multiple,s=fe(t);if(!(n&&!s&&!In(t))){for(let o=0,r=e.options.length;o<r;o++){const a=e.options[o],l=_n(a);if(n)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(d=>String(d)===String(l)):a.selected=Mo(t,l)>-1}else a.selected=t.has(l);else if(cn(_n(a),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function _n(e){return"_value"in e?e._value:e.value}function Ki(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const oT={created(e,t,n){ps(e,t,n,null,"created")},mounted(e,t,n){ps(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){ps(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){ps(e,t,n,s,"updated")}};function ju(e,t){switch(e){case"SELECT":return Bi;case"TEXTAREA":return wn;default:switch(t){case"checkbox":return Ui;case"radio":return Ku;default:return wn}}}function ps(e,t,n,s,o){const a=ju(e.tagName,n.props&&n.props.type)[o];a&&a(e,t,n,s)}const Fu=["ctrl","shift","alt","meta"],Gu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Fu.some(n=>e[`${n}Key`]&&!t.includes(n))},je=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...r)=>{for(let a=0;a<t.length;a++){const l=Gu[t[a]];if(l&&l(o,t))return}return e(o,...r)})},Vu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zu=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=o=>{if(!("key"in o))return;const r=Xt(o.key);if(t.some(a=>a===r||Vu[a]===r))return e(o)})},Yu=Be({patchProp:Ru},mu);let Xr;function qu(){return Xr||(Xr=Uc(Yu))}const Wu=(...e)=>{const t=qu().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Ju(s);if(!o)return;const r=t._component;!ve(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const a=n(o,!1,Qu(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function Qu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ju(e){return Me(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const hn=typeof document<"u";function ji(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xu(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ji(e.default)}const Ae=Object.assign;function uo(e,t){const n={};for(const s in t){const o=t[s];n[s]=pt(o)?o.map(e):e(o)}return n}const Vn=()=>{},pt=Array.isArray,Fi=/#/g,Zu=/&/g,ed=/\//g,td=/=/g,nd=/\?/g,Gi=/\+/g,sd=/%5B/g,od=/%5D/g,Vi=/%5E/g,rd=/%60/g,zi=/%7B/g,ad=/%7C/g,Yi=/%7D/g,id=/%20/g;function Xo(e){return encodeURI(""+e).replace(ad,"|").replace(sd,"[").replace(od,"]")}function ld(e){return Xo(e).replace(zi,"{").replace(Yi,"}").replace(Vi,"^")}function Io(e){return Xo(e).replace(Gi,"%2B").replace(id,"+").replace(Fi,"%23").replace(Zu,"%26").replace(rd,"`").replace(zi,"{").replace(Yi,"}").replace(Vi,"^")}function cd(e){return Io(e).replace(td,"%3D")}function ud(e){return Xo(e).replace(Fi,"%23").replace(nd,"%3F")}function dd(e){return e==null?"":ud(e).replace(ed,"%2F")}function ts(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const fd=/\/$/,hd=e=>e.replace(fd,"");function fo(e,t,n="/"){let s,o={},r="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,l>-1?l:t.length),o=e(r)),l>-1&&(s=s||t.slice(0,l),a=t.slice(l,t.length)),s=vd(s??t,n),{fullPath:s+(r&&"?")+r+a,path:s,query:o,hash:ts(a)}}function gd(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Zr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function md(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Cn(t.matched[s],n.matched[o])&&qi(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Cn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function qi(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!pd(e[n],t[n]))return!1;return!0}function pd(e,t){return pt(e)?ea(e,t):pt(t)?ea(t,e):e===t}function ea(e,t){return pt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function vd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let r=n.length-1,a,l;for(a=0;a<s.length;a++)if(l=s[a],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(a).join("/")}const Kt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ns;(function(e){e.pop="pop",e.push="push"})(ns||(ns={}));var zn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(zn||(zn={}));function yd(e){if(!e)if(hn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),hd(e)}const bd=/^[^#]+#/;function Td(e,t){return e.replace(bd,"#")+t}function wd(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const zs=()=>({left:window.scrollX,top:window.scrollY});function _d(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=wd(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ta(e,t){return(history.state?history.state.position-t:-1)+e}const $o=new Map;function Cd(e,t){$o.set(e,t)}function Sd(e){const t=$o.get(e);return $o.delete(e),t}let kd=()=>location.protocol+"//"+location.host;function Wi(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let l=o.includes(e.slice(r))?e.slice(r).length:1,c=o.slice(l);return c[0]!=="/"&&(c="/"+c),Zr(c,"")}return Zr(n,e)+s+o}function Ed(e,t,n,s){let o=[],r=[],a=null;const l=({state:h})=>{const m=Wi(e,location),_=n.value,y=t.value;let U=0;if(h){if(n.value=m,t.value=h,a&&a===_){a=null;return}U=y?h.position-y.position:0}else s(m);o.forEach(L=>{L(n.value,_,{delta:U,type:ns.pop,direction:U?U>0?zn.forward:zn.back:zn.unknown})})};function c(){a=n.value}function d(h){o.push(h);const m=()=>{const _=o.indexOf(h);_>-1&&o.splice(_,1)};return r.push(m),m}function u(){const{history:h}=window;h.state&&h.replaceState(Ae({},h.state,{scroll:zs()}),"")}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:d,destroy:f}}function na(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?zs():null}}function Ad(e){const{history:t,location:n}=window,s={value:Wi(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,d,u){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:kd()+e+c;try{t[u?"replaceState":"pushState"](d,"",h),o.value=d}catch(m){console.error(m),n[u?"replace":"assign"](h)}}function a(c,d){const u=Ae({},t.state,na(o.value.back,c,o.value.forward,!0),d,{position:o.value.position});r(c,u,!0),s.value=c}function l(c,d){const u=Ae({},o.value,t.state,{forward:c,scroll:zs()});r(u.current,u,!0);const f=Ae({},na(s.value,c,null),{position:u.position+1},d);r(c,f,!1),s.value=c}return{location:s,state:o,push:l,replace:a}}function Id(e){e=yd(e);const t=Ad(e),n=Ed(e,t.state,t.location,t.replace);function s(r,a=!0){a||n.pauseListeners(),history.go(r)}const o=Ae({location:"",base:e,go:s,createHref:Td.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function $d(e){return typeof e=="string"||e&&typeof e=="object"}function Qi(e){return typeof e=="string"||typeof e=="symbol"}const Ji=Symbol("");var sa;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(sa||(sa={}));function Sn(e,t){return Ae(new Error,{type:e,[Ji]:!0},t)}function xt(e,t){return e instanceof Error&&Ji in e&&(t==null||!!(e.type&t))}const oa="[^/]+?",xd={sensitive:!1,strict:!1,start:!0,end:!0},Rd=/[.+*?^${}()[\]/\\]/g;function Pd(e,t){const n=Ae({},xd,t),s=[];let o=n.start?"^":"";const r=[];for(const d of e){const u=d.length?[]:[90];n.strict&&!d.length&&(o+="/");for(let f=0;f<d.length;f++){const h=d[f];let m=40+(n.sensitive?.25:0);if(h.type===0)f||(o+="/"),o+=h.value.replace(Rd,"\\$&"),m+=40;else if(h.type===1){const{value:_,repeatable:y,optional:U,regexp:L}=h;r.push({name:_,repeatable:y,optional:U});const b=L||oa;if(b!==oa){m+=10;try{new RegExp(`(${b})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${_}" (${b}): `+v.message)}}let T=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(T=U&&d.length<2?`(?:/${T})`:"/"+T),U&&(T+="?"),o+=T,m+=20,U&&(m+=-8),y&&(m+=-20),b===".*"&&(m+=-50)}u.push(m)}s.push(u)}if(n.strict&&n.end){const d=s.length-1;s[d][s[d].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,n.sensitive?"":"i");function l(d){const u=d.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",_=r[h-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function c(d){let u="",f=!1;for(const h of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of h)if(m.type===0)u+=m.value;else if(m.type===1){const{value:_,repeatable:y,optional:U}=m,L=_ in d?d[_]:"";if(pt(L)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const b=pt(L)?L.join("/"):L;if(!b)if(U)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=b}}return u||"/"}return{re:a,score:s,keys:r,parse:l,stringify:c}}function Od(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Xi(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=Od(s[n],o[n]);if(r)return r;n++}if(Math.abs(o.length-s.length)===1){if(ra(s))return 1;if(ra(o))return-1}return o.length-s.length}function ra(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Dd={type:0,value:""},Ld=/[a-zA-Z0-9_]/;function Nd(e){if(!e)return[[]];if(e==="/")return[[Dd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${d}": ${m}`)}let n=0,s=n;const o=[];let r;function a(){r&&o.push(r),r=[]}let l=0,c,d="",u="";function f(){d&&(n===0?r.push({type:0,value:d}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:d,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),d="")}function h(){d+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(d&&f(),a()):c===":"?(f(),n=1):h();break;case 4:h(),n=s;break;case 1:c==="("?n=2:Ld.test(c)?h():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),f(),a(),o}function Md(e,t,n){const s=Pd(Nd(e.path),n),o=Ae(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Hd(e,t){const n=[],s=new Map;t=ca({strict:!1,end:!0,sensitive:!1},t);function o(f){return s.get(f)}function r(f,h,m){const _=!m,y=ia(f);y.aliasOf=m&&m.record;const U=ca(t,f),L=[y];if("alias"in f){const v=typeof f.alias=="string"?[f.alias]:f.alias;for(const $ of v)L.push(ia(Ae({},y,{components:m?m.record.components:y.components,path:$,aliasOf:m?m.record:y})))}let b,T;for(const v of L){const{path:$}=v;if(h&&$[0]!=="/"){const R=h.record.path,C=R[R.length-1]==="/"?"":"/";v.path=h.record.path+($&&C+$)}if(b=Md(v,h,U),m?m.alias.push(b):(T=T||b,T!==b&&T.alias.push(b),_&&f.name&&!la(b)&&a(f.name)),Zi(b)&&c(b),y.children){const R=y.children;for(let C=0;C<R.length;C++)r(R[C],b,m&&m.children[C])}m=m||b}return T?()=>{a(T)}:Vn}function a(f){if(Qi(f)){const h=s.get(f);h&&(s.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&s.delete(f.record.name),f.children.forEach(a),f.alias.forEach(a))}}function l(){return n}function c(f){const h=Kd(f,n);n.splice(h,0,f),f.record.name&&!la(f)&&s.set(f.record.name,f)}function d(f,h){let m,_={},y,U;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Sn(1,{location:f});U=m.record.name,_=Ae(aa(h.params,m.keys.filter(T=>!T.optional).concat(m.parent?m.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&aa(f.params,m.keys.map(T=>T.name))),y=m.stringify(_)}else if(f.path!=null)y=f.path,m=n.find(T=>T.re.test(y)),m&&(_=m.parse(y),U=m.record.name);else{if(m=h.name?s.get(h.name):n.find(T=>T.re.test(h.path)),!m)throw Sn(1,{location:f,currentLocation:h});U=m.record.name,_=Ae({},h.params,f.params),y=m.stringify(_)}const L=[];let b=m;for(;b;)L.unshift(b.record),b=b.parent;return{name:U,path:y,params:_,matched:L,meta:Bd(L)}}e.forEach(f=>r(f));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:d,removeRoute:a,clearRoutes:u,getRoutes:l,getRecordMatcher:o}}function aa(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function ia(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ud(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ud(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function la(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Bd(e){return e.reduce((t,n)=>Ae(t,n.meta),{})}function ca(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Kd(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Xi(e,t[r])<0?s=r:n=r+1}const o=jd(e);return o&&(s=t.lastIndexOf(o,s-1)),s}function jd(e){let t=e;for(;t=t.parent;)if(Zi(t)&&Xi(e,t)===0)return t}function Zi({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Fd(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(Gi," "),a=r.indexOf("="),l=ts(a<0?r:r.slice(0,a)),c=a<0?null:ts(r.slice(a+1));if(l in t){let d=t[l];pt(d)||(d=t[l]=[d]),d.push(c)}else t[l]=c}return t}function ua(e){let t="";for(let n in e){const s=e[n];if(n=cd(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(pt(s)?s.map(r=>r&&Io(r)):[s&&Io(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Gd(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=pt(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const Vd=Symbol(""),da=Symbol(""),Ys=Symbol(""),Zo=Symbol(""),xo=Symbol("");function Ln(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function zt(e,t,n,s,o,r=a=>a()){const a=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((l,c)=>{const d=h=>{h===!1?c(Sn(4,{from:n,to:t})):h instanceof Error?c(h):$d(h)?c(Sn(2,{from:t,to:h})):(a&&s.enterCallbacks[o]===a&&typeof h=="function"&&a.push(h),l())},u=r(()=>e.call(s&&s.instances[o],t,n,d));let f=Promise.resolve(u);e.length<3&&(f=f.then(d)),f.catch(h=>c(h))})}function ho(e,t,n,s,o=r=>r()){const r=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(ji(c)){const u=(c.__vccOpts||c)[t];u&&r.push(zt(u,n,s,a,l,o))}else{let d=c();r.push(()=>d.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const f=Xu(u)?u.default:u;a.mods[l]=u,a.components[l]=f;const m=(f.__vccOpts||f)[t];return m&&zt(m,n,s,a,l,o)()}))}}return r}function fa(e){const t=gt(Ys),n=gt(Zo),s=Z(()=>{const c=K(e.to);return t.resolve(c)}),o=Z(()=>{const{matched:c}=s.value,{length:d}=c,u=c[d-1],f=n.matched;if(!u||!f.length)return-1;const h=f.findIndex(Cn.bind(null,u));if(h>-1)return h;const m=ha(c[d-2]);return d>1&&ha(u)===m&&f[f.length-1].path!==m?f.findIndex(Cn.bind(null,c[d-2])):h}),r=Z(()=>o.value>-1&&Qd(n.params,s.value.params)),a=Z(()=>o.value>-1&&o.value===n.matched.length-1&&qi(n.params,s.value.params));function l(c={}){if(Wd(c)){const d=t[K(e.replace)?"replace":"push"](K(e.to)).catch(Vn);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:s,href:Z(()=>s.value.href),isActive:r,isExactActive:a,navigate:l}}function zd(e){return e.length===1?e[0]:e}const Yd=ri({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fa,setup(e,{slots:t}){const n=Lt(fa(e)),{options:s}=gt(Ys),o=Z(()=>({[ga(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ga(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&zd(t.default(n));return e.custom?r:Jo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),qd=Yd;function Wd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Qd(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!pt(o)||o.length!==s.length||s.some((r,a)=>r!==o[a]))return!1}return!0}function ha(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ga=(e,t,n)=>e??t??n,Jd=ri({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=gt(xo),o=Z(()=>e.route||s.value),r=gt(da,0),a=Z(()=>{let d=K(r);const{matched:u}=o.value;let f;for(;(f=u[d])&&!f.components;)d++;return d}),l=Z(()=>o.value.matched[a.value]);bs(da,Z(()=>a.value+1)),bs(Vd,l),bs(xo,o);const c=Q();return rt(()=>[c.value,l.value,e.name],([d,u,f],[h,m,_])=>{u&&(u.instances[f]=d,m&&m!==u&&d&&d===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),d&&u&&(!m||!Cn(u,m)||!h)&&(u.enterCallbacks[f]||[]).forEach(y=>y(d))},{flush:"post"}),()=>{const d=o.value,u=e.name,f=l.value,h=f&&f.components[u];if(!h)return ma(n.default,{Component:h,route:d});const m=f.props[u],_=m?m===!0?d.params:typeof m=="function"?m(d):m:null,U=Jo(h,Ae({},_,t,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return ma(n.default,{Component:U,route:d})||U}}});function ma(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Xd=Jd;function Zd(e){const t=Hd(e.routes,e),n=e.parseQuery||Fd,s=e.stringifyQuery||ua,o=e.history,r=Ln(),a=Ln(),l=Ln(),c=ec(Kt);let d=Kt;hn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=uo.bind(null,D=>""+D),f=uo.bind(null,dd),h=uo.bind(null,ts);function m(D,se){let te,ce;return Qi(D)?(te=t.getRecordMatcher(D),ce=se):ce=D,t.addRoute(ce,te)}function _(D){const se=t.getRecordMatcher(D);se&&t.removeRoute(se)}function y(){return t.getRoutes().map(D=>D.record)}function U(D){return!!t.getRecordMatcher(D)}function L(D,se){if(se=Ae({},se||c.value),typeof D=="string"){const k=fo(n,D,se.path),M=t.resolve({path:k.path},se),B=o.createHref(k.fullPath);return Ae(k,M,{params:h(M.params),hash:ts(k.hash),redirectedFrom:void 0,href:B})}let te;if(D.path!=null)te=Ae({},D,{path:fo(n,D.path,se.path).path});else{const k=Ae({},D.params);for(const M in k)k[M]==null&&delete k[M];te=Ae({},D,{params:f(k)}),se.params=f(se.params)}const ce=t.resolve(te,se),xe=D.hash||"";ce.params=u(h(ce.params));const g=gd(s,Ae({},D,{hash:ld(xe),path:ce.path})),p=o.createHref(g);return Ae({fullPath:g,hash:xe,query:s===ua?Gd(D.query):D.query||{}},ce,{redirectedFrom:void 0,href:p})}function b(D){return typeof D=="string"?fo(n,D,c.value.path):Ae({},D)}function T(D,se){if(d!==D)return Sn(8,{from:se,to:D})}function v(D){return C(D)}function $(D){return v(Ae(b(D),{replace:!0}))}function R(D){const se=D.matched[D.matched.length-1];if(se&&se.redirect){const{redirect:te}=se;let ce=typeof te=="function"?te(D):te;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=b(ce):{path:ce},ce.params={}),Ae({query:D.query,hash:D.hash,params:ce.path!=null?{}:D.params},ce)}}function C(D,se){const te=d=L(D),ce=c.value,xe=D.state,g=D.force,p=D.replace===!0,k=R(te);if(k)return C(Ae(b(k),{state:typeof k=="object"?Ae({},xe,k.state):xe,force:g,replace:p}),se||te);const M=te;M.redirectedFrom=se;let B;return!g&&md(s,ce,te)&&(B=Sn(16,{to:M,from:ce}),Te(ce,ce,!0,!1)),(B?Promise.resolve(B):j(M,ce)).catch(H=>xt(H)?xt(H,2)?H:Ee(H):re(H,M,ce)).then(H=>{if(H){if(xt(H,2))return C(Ae({replace:p},b(H.to),{state:typeof H.to=="object"?Ae({},xe,H.to.state):xe,force:g}),se||M)}else H=w(M,ce,!0,p,xe);return N(M,ce,H),H})}function V(D,se){const te=T(D,se);return te?Promise.reject(te):Promise.resolve()}function I(D){const se=O.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(D):D()}function j(D,se){let te;const[ce,xe,g]=ef(D,se);te=ho(ce.reverse(),"beforeRouteLeave",D,se);for(const k of ce)k.leaveGuards.forEach(M=>{te.push(zt(M,D,se))});const p=V.bind(null,D,se);return te.push(p),ee(te).then(()=>{te=[];for(const k of r.list())te.push(zt(k,D,se));return te.push(p),ee(te)}).then(()=>{te=ho(xe,"beforeRouteUpdate",D,se);for(const k of xe)k.updateGuards.forEach(M=>{te.push(zt(M,D,se))});return te.push(p),ee(te)}).then(()=>{te=[];for(const k of g)if(k.beforeEnter)if(pt(k.beforeEnter))for(const M of k.beforeEnter)te.push(zt(M,D,se));else te.push(zt(k.beforeEnter,D,se));return te.push(p),ee(te)}).then(()=>(D.matched.forEach(k=>k.enterCallbacks={}),te=ho(g,"beforeRouteEnter",D,se,I),te.push(p),ee(te))).then(()=>{te=[];for(const k of a.list())te.push(zt(k,D,se));return te.push(p),ee(te)}).catch(k=>xt(k,8)?k:Promise.reject(k))}function N(D,se,te){l.list().forEach(ce=>I(()=>ce(D,se,te)))}function w(D,se,te,ce,xe){const g=T(D,se);if(g)return g;const p=se===Kt,k=hn?history.state:{};te&&(ce||p?o.replace(D.fullPath,Ae({scroll:p&&k&&k.scroll},xe)):o.push(D.fullPath,xe)),c.value=D,Te(D,se,te,p),Ee()}let S;function E(){S||(S=o.listen((D,se,te)=>{if(!J.listening)return;const ce=L(D),xe=R(ce);if(xe){C(Ae(xe,{replace:!0,force:!0}),ce).catch(Vn);return}d=ce;const g=c.value;hn&&Cd(ta(g.fullPath,te.delta),zs()),j(ce,g).catch(p=>xt(p,12)?p:xt(p,2)?(C(Ae(b(p.to),{force:!0}),ce).then(k=>{xt(k,20)&&!te.delta&&te.type===ns.pop&&o.go(-1,!1)}).catch(Vn),Promise.reject()):(te.delta&&o.go(-te.delta,!1),re(p,ce,g))).then(p=>{p=p||w(ce,g,!1),p&&(te.delta&&!xt(p,8)?o.go(-te.delta,!1):te.type===ns.pop&&xt(p,20)&&o.go(-1,!1)),N(ce,g,p)}).catch(Vn)}))}let ue=Ln(),F=Ln(),ie;function re(D,se,te){Ee(D);const ce=F.list();return ce.length?ce.forEach(xe=>xe(D,se,te)):console.error(D),Promise.reject(D)}function oe(){return ie&&c.value!==Kt?Promise.resolve():new Promise((D,se)=>{ue.add([D,se])})}function Ee(D){return ie||(ie=!D,E(),ue.list().forEach(([se,te])=>D?te(D):se()),ue.reset()),D}function Te(D,se,te,ce){const{scrollBehavior:xe}=e;if(!hn||!xe)return Promise.resolve();const g=!te&&Sd(ta(D.fullPath,0))||(ce||!te)&&history.state&&history.state.scroll||null;return Wn().then(()=>xe(D,se,g)).then(p=>p&&_d(p)).catch(p=>re(p,D,se))}const le=D=>o.go(D);let A;const O=new Set,J={currentRoute:c,listening:!0,addRoute:m,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:U,getRoutes:y,resolve:L,options:e,push:v,replace:$,go:le,back:()=>le(-1),forward:()=>le(1),beforeEach:r.add,beforeResolve:a.add,afterEach:l.add,onError:F.add,isReady:oe,install(D){const se=this;D.component("RouterLink",qd),D.component("RouterView",Xd),D.config.globalProperties.$router=se,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>K(c)}),hn&&!A&&c.value===Kt&&(A=!0,v(o.location).catch(xe=>{}));const te={};for(const xe in Kt)Object.defineProperty(te,xe,{get:()=>c.value[xe],enumerable:!0});D.provide(Ys,se),D.provide(Zo,Ba(te)),D.provide(xo,c);const ce=D.unmount;O.add(D),D.unmount=function(){O.delete(D),O.size<1&&(d=Kt,S&&S(),S=null,c.value=Kt,A=!1,ie=!1),ce()}}};function ee(D){return D.reduce((se,te)=>se.then(()=>I(te)),Promise.resolve())}return J}function ef(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const l=t.matched[a];l&&(e.matched.find(d=>Cn(d,l))?s.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(d=>Cn(d,c))||o.push(c))}return[n,s,o]}function en(){return gt(Ys)}function tf(e){return gt(Zo)}const ae={BASE_URL:"http://localhost:8080",AUTH:{LOGIN:"/api/auth/log-in",LOGOUT:"/api/auth/log-out",STATUS:"/api/auth/status",VALIDATE_TOKEN:"/api/auth/validate-token"},PASSWORD_RESET:{SEND_OTP:"/api/forgot-password/send-otp",VERIFY_OTP:"/api/forgot-password/verify-otp",RESET_PASSWORD:"/api/forgot-password/reset-password"},USER:{REGISTER:"/api/khachhang/register",GET_BY_ID:"/api/nguoidung/{maNguoiDung}",GET_BY_EMAIL:"/api/nguoidung/email/{email}",UPDATE:"/api/nguoidung/{maNguoiDung}",DELETE:"/api/nguoidung/{maNguoiDung}",CHECK_EMAIL:"/api/nguoidung/check-email/{email}",CHECK_ID:"/api/nguoidung/check-id/{maNguoiDung}"},OAUTH2:{GET_JWT_TOKEN:"/api/oauth2/get-jwt-token",USER_INFO:"/api/oauth2/user-info",SUCCESS:"/api/oauth2/success",FAILURE:"/api/oauth2/failure",CHECK_EMAIL:"/api/oauth2/check-email",CHECK_SUB:"/api/oauth2/check-sub",TEST_CONFIG:"/api/oauth2/test-config",LOGOUT_DEPRECATED:"/api/oauth2/logout"},AUTHORIZATION:{GOOGLE:"/oauth2/authorization/google",FACEBOOK:"/oauth2/authorization/facebook"}},nf=e=>`${ae.BASE_URL}${e}`,Qe="http://localhost:8080",ye={OAUTH2:{TEST_CONFIG:"/api/oauth2/test-config",USER_INFO:"/api/oauth2/user-info",ANALYZE:"/api/oauth2/analyze",CHECK_EMAIL:"/api/oauth2/check-email",CHECK_SUB:"/api/oauth2/check-sub",GET_TOKEN:"/api/oauth2/get-token",GOOGLE_CALLBACK:"/api/oauth2/callback/google",GOOGLE_REGISTER:"/api/oauth2/register/google"},CATEGORIES:{LIST:"/api/loaisanpham",BY_ID:e=>`/api/loaisanpham/${e}`},PRODUCTS:{LIST:"/api/sanpham",BY_ID:e=>`/api/sanpham/${e}`,BY_CATEGORY:e=>`/api/sanpham/category/${e}`,BY_CATEGORY_ACTIVE:e=>`/api/sanpham/category/${e}/active`,WITH_STOCK_LIST:"/api/sanpham/with-tonkho",BY_ID_WITH_STOCK:e=>`/api/sanpham/${e}/with-tonkho`,SEARCH:"/api/sanpham/search",SEARCH_ADVANCED:"/api/sanpham/search/advanced"},CART:{BY_CUSTOMER:e=>`/api/giohang/by-khachhang/${e}`,BY_CUSTOMER_WITH_ITEMS:e=>`/api/giohang/by-khachhang/${e}/with-items`,UPDATE_STATUS:e=>`/api/giohang/by-khachhang/${e}/status`,CLEAR_ITEMS:e=>`/api/giohang/by-khachhang/${e}/items`,SYNC:"/api/giohang/sync",CURRENT_USER:"/api/giohang/current-user"},CART_ITEMS:{ADD:"/api/giohang/items",UPDATE_QTY:e=>`/api/giohang/items/${e}/quantity`,REMOVE:e=>`/api/giohang/items/${e}`},HOADON:{LIST:"/api/hoadon",BY_ID:e=>`/api/hoadon/${e}`,CREATE:"/api/hoadon",UPDATE:e=>`/api/hoadon/${e}`,DELETE:e=>`/api/hoadon/${e}`,CREATE_FROM_CART:"/api/hoadon/from-cart",BY_CUSTOMER:e=>`/api/hoadon/by-khachhang/${e}`,UPDATE_STATUS:e=>`/api/hoadon/${e}/trangthai`,BY_ID_FULL:e=>`/api/hoadon/${e}/full-details`,BY_CUSTOMER_FULL:e=>`/api/hoadon/by-khachhang/${e}/full-details`,COUNT_BY_STATUS:e=>`/api/hoadon/count/trangthai/${e}`,COUNT_BY_CUSTOMER:e=>`/api/hoadon/count/khachhang/${e}`,BY_STATUS:e=>`/api/hoadon/status/${e}`,BY_CUSTOMER_AND_STATUS:(e,t)=>`/api/hoadon/by-khachhang/${e}/status/${t}`,BY_DATE_RANGE:"/api/hoadon/date-range",BY_CUSTOMER_AND_DATE:e=>`/api/hoadon/by-khachhang/${e}/date-range`,SEARCH:"/api/hoadon/search",CANCEL:e=>`/api/hoadon/${e}/cancel`,STATISTICS:e=>`/api/hoadon/by-khachhang/${e}/statistics`,COUNT_BY_STATUS_CUSTOMER:e=>`/api/hoadon/by-khachhang/${e}/count-by-status`},CHITIETHOADON:{BY_HOADON:e=>`/api/chitiethoadon/hoadon/${e}`,UPDATE:e=>`/api/chitiethoadon/${e}`,BY_HOADON_OLD:e=>`/api/chitiethoadon/${e}`},KHACHHANG:{BY_ID:e=>`/api/khachhang/${e}`,BY_NGUOIDUNG:e=>`/api/khachhang/by-nguoidung/${e}`,UPDATE_INFO:e=>`/api/khachhang/${e}`,REGISTER:"/api/khachhang/register"},IMAGES:{PRODUCT_LIST:e=>`/api/hinhanh/product/${e}`,SERVE_IMAGE:e=>`/api/upload/serve-image/${e}`,PRODUCT_IMAGES:e=>[`/api/upload/serve-image/${e}_main.jfif`,`/api/upload/serve-image/${e}_main1.jfif`,`/api/upload/serve-image/${e}_main2.jfif`]},INVENTORY:{ALL_DETAILS:"/api/tonkhochitiet",BY_ID:e=>`/api/tonkhochitiet/${e}`,BY_PRODUCT:e=>`/api/tonkhochitiet/product/${e}`,BY_WAREHOUSE:e=>`/api/tonkhochitiet/warehouse/${e}`,COMPARE_MASP:"/api/tonkhochitiet/compare-masp"}},er="easymart-token",sf=1,of=(e,t,n=1,s=!1,o=!1)=>{let r="";if(n){const l=new Date;l.setTime(l.getTime()+n*24*60*60*1e3),r=`; expires=${l.toUTCString()}`}let a=`${e}=${t||""}${r}; path=/`;s&&(a+="; Secure"),o&&(a+="; HttpOnly"),a+="; SameSite=Strict",document.cookie=a},rf=e=>{const t=e+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let o=n[s];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},af=e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict`},lf=e=>{{const t=window.location.protocol==="https:";of(er,e,sf,t,!1)}},Se=()=>{let e=null;return e=rf(er),e},cf=()=>{af(er)},uf="modulepreload",df=function(e){return"/"+e},pa={},Ke=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");o=c(n.map(d=>{if(d=df(d),d in pa)return;pa[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":uf,u||(h.as="script"),h.crossOrigin="",h.href=d,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,_)=>{h.addEventListener("load",m),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},ff=(e,t,n=7,s=!1,o=!1)=>{let r="";if(n){const l=new Date;l.setTime(l.getTime()+n*24*60*60*1e3),r=`; expires=${l.toUTCString()}`}let a=`${e}=${t||""}${r}; path=/`;s&&(a+="; Secure"),o&&(a+="; HttpOnly"),a+="; SameSite=Strict",document.cookie=a},hf=e=>{const t=e+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let o=n[s];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},gf=e=>{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict`},tr=(e,t)=>{ff(e,t,7,!1,!1)},yt=e=>hf(e),nr=e=>{gf(e)},Ue=Q(null),mf=Z(()=>!!Ue.value),el=()=>{const e=localStorage.getItem("easymart-user");if(e)try{const t=JSON.parse(e);Ue.value={...t,email:null,phone:null,totalOrders:0,totalSpent:0,joinDate:null}}catch(t){console.error("Error loading user data:",t),localStorage.removeItem("easymart-user"),Ue.value=null}},ss=e=>{const t={id:e.id,name:e.name,avatar:e.avatar,role:e.role,loginMethod:e.loginMethod,displayName:e.name||e.email?.split("@")[0]||"User"};localStorage.setItem("easymart-user",JSON.stringify(t)),Ue.value=e,e.triggerEvent!==!1&&window.dispatchEvent(new CustomEvent("user-updated",{detail:t}))},qs=e=>{try{if(!e)return null;const t=JSON.parse(atob(e.split(".")[1]));return{email:t.sub,issuer:t.iss,role:t.role,exp:t.exp,iat:t.iat,raw:t}}catch(t){return console.error("Error decoding token:",t),null}},Ws=e=>{try{if(!e)return!1;const t=qs(e);if(!t)return!1;const n=Math.floor(Date.now()/1e3);return t.exp>n}catch{return!1}},pf=()=>{const e=yt("easymart-token");if(!e||!Ws(e)){nr("easymart-token"),localStorage.removeItem("easymart-user"),Ue.value=null;return}const t=qs(e);if(t){const n={id:null,email:t.email,name:t.email.split("@")[0],role:t.role,loginMethod:"token",avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(t.email.split("@")[0])}&background=28a745&color=fff`,tokenInfo:{issuer:t.issuer,exp:new Date(t.exp*1e3),iat:new Date(t.iat*1e3)}};Ue.value=n,console.log("🔐 User initialized from token:",n),console.log("🔍 Token payload:",t.raw),setTimeout(async()=>{try{console.log("🔄 Fetching complete user info in background..."),await sl()}catch(s){console.warn("⚠️ Could not fetch complete user info in background:",s)}},1e3)}},vf=()=>{const e=yt("easymart-token");if(console.log("🔍 Current token:",e),e){const t=qs(e);if(console.log("📋 Decoded token:",t),console.log("✅ Token valid:",Ws(e)),t&&t.exp){const n=new Date(t.exp*1e3),s=new Date;console.log("⏰ Token expires:",n),console.log("🕐 Current time:",s),console.log("⏱️ Time until expiry:",Math.round((n-s)/1e3/60),"minutes")}}else console.log("❌ No token found")},tl=async e=>{try{if(!e)return!1;const t=await fetch(`${ae.BASE_URL}/api/auth/validate-token`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({token:e})});if(!t.ok)return!1;const n=await t.json();if(n&&n.result&&n.result.valid===!0){const s=Ue.value;return(!s||!s.id||s.email!==n.result.username)&&await nl(n.result),!0}else return!1}catch(t){return console.error("❌ Error validating token:",t),!1}},nl=async e=>{try{const{username:t,role:n,expiration:s}=e,o=await sr(t);if(o&&o.success&&o.user){const r={id:o.user.maNguoiDung||o.user.id,email:t,name:o.user.tenNguoiDung||o.user.hoTen||t.split("@")[0],phone:o.user.soDienThoai||o.user.sdt||"",address:o.user.diaChi||"",role:n,avatar:o.user.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(o.user.tenNguoiDung||t.split("@")[0])}&background=28a745&color=fff`,loginMethod:"token",tokenInfo:{expiration:new Date(s),role:n,lastValidated:new Date}};Ue.value=r,localStorage.setItem("easymart-user",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("user-updated",{detail:r}))}else{const r={id:null,email:t,name:t.split("@")[0],role:n,loginMethod:"token",tokenInfo:{expiration:new Date(s),role:n,lastValidated:new Date}};Ue.value=r,localStorage.setItem("easymart-user",JSON.stringify(r))}}catch(t){console.error("❌ Error updating user from validation:",t)}},yf=async()=>{const e=yt("easymart-token");if(!e)return;if(!Ws(e)){await Ro("Token đã hết hạn");return}await tl(e)||await Ro("Phiên đăng nhập không hợp lệ")},Ro=async e=>{console.log("🚪 Performing auto-logout:",e),nr("easymart-token"),localStorage.removeItem("easymart-user"),Ue.value=null,alert(`${e}. Bạn sẽ được chuyển về trang đăng nhập.`),window.location.href="/login"},sl=async()=>{const e=Ue.value;if(!e)return console.warn("⚠️ No user logged in"),null;if(e.id)return console.log("✅ User already has complete info:",e.id),e;if(e.email){console.log("🔍 Fetching user ID for:",e.email);try{const t=await sr(e.email);if(t&&t.success&&t.user){const n={...e,id:t.user.maNguoiDung||t.user.id,name:t.user.tenNguoiDung||t.user.hoTen||e.name,phone:t.user.soDienThoai||t.user.sdt||e.phone||"",address:t.user.diaChi||e.address||""};return Ue.value=n,localStorage.setItem("easymart-user",JSON.stringify(n)),console.log("✅ User info completed with ID:",n.id),n}}catch(t){console.error("❌ Error fetching complete user info:",t)}}return console.warn("⚠️ Could not complete user info"),e},bf=()=>{const e=localStorage.getItem("easymart-user");if(e)try{const t=JSON.parse(e);Ue.value={...t,email:null,phone:null,totalOrders:0,totalSpent:0,joinDate:null}}catch(t){console.error("Error reloading user data:",t),localStorage.removeItem("easymart-user"),Ue.value=null}},Tf=async()=>{try{const e=yt("easymart-token");if(!e)return null;const t=await ze(ae.USER.GET_BY_ID,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(t&&t.result)return Ue.value=t.result,ss(t.result),t.result}catch(e){return console.error("Error fetching full user data:",e),null}},Cs=async()=>{try{const e=yt("easymart-token");if(!e)throw new Error("Không có token xác thực");console.log("🔍 Validating token for profile access..."),console.log("📡 Step 1: Calling validate-token API...");const t=await ze(ae.AUTH.VALIDATE_TOKEN,{method:"POST",body:JSON.stringify({token:e})});if(console.log("📥 Validate token response:",t),!t?.result?.valid)throw new Error("Token không hợp lệ hoặc đã hết hạn");const{username:n,role:s,expiration:o}=t.result;console.log("✅ Token validated:",{username:n,role:s,expiration:o}),console.log("📡 Step 2: Calling GET_BY_EMAIL API...");const r=ae.USER.GET_BY_EMAIL.replace("{email}",n);console.log("🔗 Email endpoint:",r);const a=await ze(r,{method:"GET"});console.log("📥 User response:",a);let l=null;if(a?.result)l=a.result;else if(a?.data)l=a.data;else if(a?.maNguoiDung)l=a;else throw console.error("❌ Unexpected user response format:",a),new Error("Response format không đúng từ API người dùng");const{maNguoiDung:c,vaiTro:d}=l;if(console.log("👤 User info retrieved:",{maNguoiDung:c,vaiTro:d}),!c)throw new Error("Không tìm thấy mã người dùng trong response");console.log("📡 Step 3: Calling customer API..."),console.log("📡 Step 3: Calling customer API...");let u=null,f=null;const h=[`/api/khachhang/by-nguoidung/${c}`,`/api/khachhang/${c}`,`/api/nguoidung/${c}`];for(let y=0;y<h.length;y++){const U=h[y];console.log(`🔗 Trying endpoint ${y+1}: ${U}`);try{const L=`${ae.BASE_URL}${U}`;if(console.log(`🔗 Full URL: ${L}`),f=await fetch(L,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),console.log(`📡 Response ${y+1} status:`,f.status),console.log(`📡 Response ${y+1} redirected:`,f.redirected),f.ok){const b=f.headers.get("content-type");if(console.log(`📡 Response ${y+1} Content-Type:`,b),b&&b.includes("application/json")){const T=await f.json();if(console.log(`✅ Endpoint ${y+1} success:`,T),T?.hoTen)console.log("✅ Response có hoTen - format customer data"),u={hoTen:T.hoTen,soDienThoai:T.sdt,ngaySinh:T.ngaySinh,diaChi:T.diaChi,ngayTao:T.ngayDangKy,tongDonHang:0,tongChiTieu:0,maKH:T.maKH,diemTichLuy:T.diemTichLuy,loaiKhachHang:T.loaiKhachHang,nguoiDung:T.nguoiDung,sdt:T.sdt};else if(T?.token){console.log("⚠️ Response chỉ có token - cần xử lý khác cho Google OAuth2 user");try{console.log("🔄 Gọi API /api/nguoidung để lấy customer info...");const v=await fetch(`${ae.BASE_URL}/api/nguoidung/${c}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(v.ok){const $=await v.json();console.log("✅ Customer info từ /api/nguoidung:",$),u={hoTen:$.tenNguoiDung||n.split("@")[0],soDienThoai:$.soDienThoai||"",ngaySinh:$.ngaySinh||null,diaChi:$.diaChi||"",ngayTao:$.ngayTao||new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,maKH:$.maNguoiDung,diemTichLuy:0,loaiKhachHang:"OAuth2 User",sdt:$.soDienThoai||""}}else{console.log("❌ Không thể lấy customer info từ /api/nguoidung");continue}}catch(v){console.log("❌ Lỗi khi gọi /api/nguoidung:",v.message);continue}}else if(T?.result)u=T.result;else if(T?.data)u=T.data;else if(console.log("⚠️ Response không có hoTen, token, result, data - có thể là Google OAuth2 user"),n.includes("@gmail.com")||n.includes("@fpt.edu.vn")){console.log("🔍 Detected Google OAuth2 user, calling /api/nguoidung...");try{console.log("🔄 Gọi API /api/nguoidung để lấy customer info...");const $=await fetch(`${ae.BASE_URL}/api/nguoidung/${c}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if($.ok){const R=await $.json();console.log("✅ Customer info từ /api/nguoidung:",R);let C="",V="";R.soDienThoai?C=R.soDienThoai:R.sdt?C=R.sdt:R.phone?C=R.phone:R.dienThoai&&(C=R.dienThoai),R.diaChi?V=R.diaChi:R.address?V=R.address:R.diaChiChiTiet&&(V=R.diaChiChiTiet),u={hoTen:R.tenNguoiDung||R.hoTen||n.split("@")[0],soDienThoai:C,ngaySinh:R.ngaySinh||null,diaChi:V,ngayTao:R.ngayTao||R.ngayDangKy||new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,maKH:R.maNguoiDung||R.maKH||c,diemTichLuy:0,loaiKhachHang:"OAuth2 User",sdt:C}}else{console.log("❌ Không thể lấy customer info từ /api/nguoidung");continue}}catch($){console.log("❌ Lỗi khi gọi /api/nguoidung:",$.message);continue}}else{console.log(`⚠️ Endpoint ${y+1} response format không xác định:`,T);continue}console.log(`✅ Found working endpoint: ${U}`);break}else{const T=await f.text();console.log(`⚠️ Endpoint ${y+1} returned non-JSON:`,T.substring(0,200));continue}}else if(f.redirected)if(console.log(`⚠️ Endpoint ${y+1} was redirected - trying /api/nguoidung directly...`),n.includes("@gmail.com")||n.includes("@fpt.edu.vn"))try{const T=await fetch(`${ae.BASE_URL}/api/nguoidung/${c}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(T.ok){const v=await T.json();console.log("✅ Direct call to /api/nguoidung successful");let $=v.soDienThoai||v.sdt||v.phone||v.dienThoai||"",R=v.diaChi||v.address||v.diaChiChiTiet||"";u={hoTen:v.tenNguoiDung||v.hoTen||n.split("@")[0],soDienThoai:$,ngaySinh:v.ngaySinh||null,diaChi:R,ngayTao:v.ngayTao||v.ngayDangKy||new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,maKH:v.maNguoiDung||v.maKH||c,diemTichLuy:0,loaiKhachHang:"OAuth2 User",sdt:$},console.log("✅ Found working solution: direct call to /api/nguoidung");break}else{console.log("❌ Direct call to /api/nguoidung failed with status:",T.status);continue}}catch(T){console.log("❌ Error in direct call to /api/nguoidung:",T.message);continue}else{console.log(`⚠️ Endpoint ${y+1} failed with status:`,f.status);continue}else{console.log(`⚠️ Endpoint ${y+1} failed with status:`,f.status);continue}}catch(L){console.log(`❌ Endpoint ${y+1} error:`,L.message);continue}}if(!u){console.log("⚠️ No working customer endpoint found, attempting to create customer record...");try{console.log("🔧 Creating new customer record for user:",n);const y={nguoiDung:{maNguoiDung:c},hoTen:n.split("@")[0],soDienThoai:"",diaChi:"",ngaySinh:null,ngayTao:new Date().toISOString()};console.log("📤 Creating customer with data:",y);const U=await fetch(`${ae.BASE_URL}/api/khachhang`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(y)});if(U.ok){const L=await U.json();console.log("✅ Successfully created customer record:",L),u={hoTen:L.hoTen||n.split("@")[0],soDienThoai:L.soDienThoai||"",ngaySinh:L.ngaySinh||null,diaChi:L.diaChi||"",ngayTao:L.ngayTao||new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,maKH:L.maKH,diemTichLuy:0,loaiKhachHang:"New User",sdt:L.soDienThoai||""},console.log("✅ Using newly created customer data:",u)}else{const L=await U.json().catch(()=>({}));console.error("❌ Failed to create customer record:",U.status,L),console.log("🔄 Fallback: Creating basic data in memory"),u={hoTen:n.split("@")[0],soDienThoai:"",ngayTao:new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,diaChi:"",maKH:c,diemTichLuy:0,loaiKhachHang:"Fallback User",sdt:""}}}catch(y){console.error("❌ Error creating customer record:",y.message),console.log("🔄 Fallback: Creating basic data in memory due to error"),u={hoTen:n.split("@")[0],soDienThoai:"",ngayTao:new Date().toISOString().split("T")[0],tongDonHang:0,tongChiTieu:0,diaChi:"",maKH:c,diemTichLuy:0,loaiKhachHang:"Error Fallback User",sdt:""}}}console.log("🏪 Final customer data:",u);const m=u.loaiKhachHang==="OAuth2 User",_={id:c,name:u.hoTen||n.split("@")[0],email:n,phone:u.soDienThoai||"",avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(u.hoTen||n.split("@")[0])}&background=007bff&color=fff`,joinDate:u.ngayTao||new Date().toISOString().split("T")[0],totalOrders:u.tongDonHang||0,totalSpent:u.tongChiTieu||0,role:d===3?"CUSTOMER":"USER",loginMethod:m?"google":"traditional",customerInfo:u,userRole:d,userCode:c};return Ue.value=_,ss({..._,triggerEvent:!1}),console.log("✅ Profile validation completed successfully"),{success:!0,user:_}}catch(e){return console.error("❌ Profile validation failed:",e),(e.message.includes("Token không hợp lệ")||e.message.includes("Không có token"))&&al(),{success:!1,error:e.message}}},wf=async e=>{try{const t=yt("easymart-token");if(!t)throw new Error("Không có token xác thực");const n=await Cs();if(!n.success)throw new Error(n.error);const{userCode:s}=Ue.value,o=`${ae.BASE_URL}/api/khachhang/by-nguoidung/${s}`;console.log("🔗 Update customer endpoint:",o),console.log("📤 Update data being sent:",e);const r=await fetch(o,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const a=await r.json();if(console.log("📥 Update response:",a),a?.success||a?.result?.success||a?.message?.includes("thành công"))return console.log("✅ Update successful, refreshing user data..."),await Cs(),{success:!0,message:"Cập nhật profile thành công!"};if(console.log("⚠️ Update response format unexpected:",a),r.ok)return console.log("✅ Update successful (status 200), refreshing user data..."),await Cs(),{success:!0,message:"Cập nhật profile thành công!"};throw new Error(a?.message||a?.error||"Cập nhật profile thất bại")}catch(t){return console.error("❌ Update profile failed:",t),{success:!1,error:t.message}}},ze=async(e,t={})=>{try{const n=await fetch(nf(e),{headers:{"Content-Type":"application/json",...t.headers},...t});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){throw console.error("API call error:",n),n}},_f=async(e,t)=>{try{if(e==="demo@easymart.vn"){const n={id:"DEMO_USER",name:"Demo User",email:e,phone:"0123456789",avatar:"https://ui-avatars.com/api/?name=Demo+User&background=007bff&color=fff",joinDate:new Date().toISOString().split("T")[0],totalOrders:5,totalSpent:15e5,role:"USER",loginMethod:"traditional"};return ss(n),{success:!0,user:n}}try{const n=await ze(ae.AUTH.LOGIN,{method:"POST",body:JSON.stringify({email:e,matKhau:t})});if(n&&n.result&&n.result.authenticated){const s=n.result;s.token&&tr("easymart-token",s.token);const o={id:null,name:e.split("@")[0],email:e,phone:"",avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.split("@")[0])}&background=007bff&color=fff`,joinDate:new Date().toISOString().split("T")[0],totalOrders:0,totalSpent:0,role:"USER",loginMethod:"traditional"};try{const r=s.token;if(r){const a=await fetch(`${ae.BASE_URL}/api/nguoidung/email/${encodeURIComponent(e)}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(a.ok){const l=await a.json();(l.id||l.maNguoiDung)&&(o.id=l.id||l.maNguoiDung,console.log("✅ Got real user ID from backend:",o.id))}}}catch{console.log("⚠️ Could not get real user ID from backend, will use email-based lookup")}ss(o);try{const r=await Ke(()=>Promise.resolve().then(()=>lr),void 0);if(r&&typeof r.useCart=="function"){const{syncLocalCartToDBViaEndpoint:a,persistLocalToBackend:l,reloadCartFromBackend:c,mergeWithBackendOnLogin:d}=r.useCart();if(a?!(await a())?.success&&l&&await l():l&&await l(),c){const u=yt("easymart-token"),f="cart-merged-for-token";u&&sessionStorage.getItem(f)!==u&&(!await c()&&d&&await d(),sessionStorage.setItem(f,u))}}}catch(r){console.warn("Cart merge after login failed (non-blocking):",r?.message||r)}return{success:!0,user:o,message:s.message}}else return{success:!1,error:n?.result?.message||"Email hoặc mật khẩu không đúng"}}catch(n){return console.error("Login API error:",n),{success:!1,error:"Đăng nhập thất bại. Vui lòng kiểm tra lại thông tin."}}}catch(n){return console.error("Login error:",n),{success:!1,error:"Đăng nhập thất bại. Vui lòng thử lại."}}},Cf=async e=>{try{if(e.redirect)return{success:!0,redirect:!0,message:e.message||"Đang chuyển hướng tới Google OAuth2..."};if(e.credential){const t=JSON.parse(atob(e.credential.split(".")[1]));return console.log("Legacy Google credential payload:",t),{success:!1,error:"Vui lòng sử dụng OAuth2 flow mới"}}return{success:!1,error:"Invalid response format"}}catch(t){return console.error("Google login error:",t),{success:!1,error:"Đăng nhập với Google thất bại. Vui lòng thử lại."}}},Sf=async e=>{try{if(e.redirect)return{success:!0,redirect:!0,message:e.message||"Đang chuyển hướng tới Facebook OAuth2..."};if(e.credential){const t=JSON.parse(atob(e.credential.split(".")[1]));return console.log("Legacy Facebook credential payload:",t),{success:!1,error:"Vui lòng sử dụng OAuth2 flow mới"}}return{success:!1,error:"Invalid response format"}}catch(t){return console.error("Facebook login error:",t),{success:!1,error:"Đăng nhập với Facebook thất bại. Vui lòng thử lại."}}},kf=async(e,t,n="",s,o,r="")=>{try{if(s!==o)return{success:!1,error:"Mật khẩu không khớp!"};if(n&&n.trim()&&!/^[0-9]{10,11}$/.test(n))return{success:!1,error:"Số điện thoại phải có 10-11 chữ số!"};try{const c=await rl(t);if(c&&c.exists)return{success:!1,error:"Email đã tồn tại trong hệ thống!"}}catch(c){console.warn("Email check failed, proceeding anyway:",c)}const a={email:t,matKhau:s,hoTen:e,sdt:n||"",diaChi:r||""};console.log("📤 Sending register data:",a);const l=await ze(ae.USER.REGISTER,{method:"POST",body:JSON.stringify(a)});if(console.log("📥 Received register response:",l),l&&l.login_info&&l.login_info.email){const c=l.login_info;return{success:!0,user:{id:null,name:e,email:c.email,phone:n||"",address:r||"",avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=28a745&color=fff`,joinDate:new Date().toISOString().split("T")[0],totalOrders:0,totalSpent:0,role:"USER",loginMethod:"traditional"},message:c.message||"Đăng ký thành công! Vui lòng đăng nhập để tiếp tục."}}else return{success:!1,error:"Đăng ký thất bại - Không nhận được thông tin xác nhận từ server"}}catch(a){return console.error("Register error:",a),{success:!1,error:"Đăng ký thất bại. Vui lòng thử lại."}}},Ef=async e=>{try{return e.redirect?{success:!0,redirect:!0,message:e.message||"Đang chuyển hướng tới Google OAuth2..."}:e.credential?(console.log("Legacy Google register credential"),{success:!1,error:"Vui lòng sử dụng OAuth2 flow mới"}):{success:!1,error:"Invalid response format"}}catch(t){return console.error("Google register error:",t),{success:!1,error:"Đăng ký với Google thất bại. Vui lòng thử lại."}}},Af=async e=>{try{return e.redirect?{success:!0,redirect:!0,message:e.message||"Đang chuyển hướng tới Facebook OAuth2..."}:e.credential?(console.log("Legacy Facebook register credential"),{success:!1,error:"Vui lòng sử dụng OAuth2 flow mới"}):{success:!1,error:"Invalid response format"}}catch(t){return console.error("Facebook register error:",t),{success:!1,error:"Đăng ký với Facebook thất bại. Vui lòng thử lại."}}},If=async()=>{try{const e=await ze(ae.OAUTH2.GET_JWT_TOKEN);if(e.success)return tr("easymart-token",e.result.jwt_token),e.result;throw new Error(e.message||"Không thể lấy JWT token")}catch(e){throw console.error("Get JWT token error:",e),e}},$f=async()=>{try{const e=yt("easymart-token");if(!e)throw new Error("Không có token xác thực");const t=await ze(ae.OAUTH2.USER_INFO,{headers:{Authorization:`Bearer ${e}`}});if(t.success)return t.result;throw new Error(t.message||"Không thể lấy thông tin user")}catch(e){throw console.error("Get user info error:",e),e}},xf=async()=>{try{return await ze(ae.OAUTH2.TEST_CONFIG)}catch(e){throw console.error("Test OAuth2 config error:",e),e}},ol=async e=>{try{return await ze(`${ae.OAUTH2.CHECK_EMAIL}?email=${encodeURIComponent(e)}`)}catch(t){throw console.error("Check email duplicate error:",t),t}},rl=async e=>{try{const t=ae.USER.CHECK_EMAIL.replace("{email}",encodeURIComponent(e));return await ze(t)}catch(t){throw console.error("Check user email exists error:",t),t}},sr=async e=>{try{const t=ae.USER.GET_BY_EMAIL.replace("{email}",encodeURIComponent(e));return await ze(t)}catch(t){throw console.error("Get user by email error:",t),t}},Rf=async e=>{try{return await ze(`${ae.OAUTH2.CHECK_SUB}?sub=${encodeURIComponent(e)}`)}catch(t){throw console.error("Check OAuth2 sub error:",t),t}},Pf=async()=>{try{const e=yt("easymart-token");return e?await ze(ae.AUTH.STATUS,{method:"GET",headers:{Authorization:`Bearer ${e}`}}):{success:!1,error:"No token found"}}catch(e){return console.error("Check auth status error:",e),{success:!1,error:"Failed to check auth status"}}},Of=async e=>{try{return await ze(ae.AUTH.VALIDATE_TOKEN,{method:"POST",body:JSON.stringify({token:e})})}catch(t){return console.error("Validate token error:",t),{success:!1,error:"Token validation failed"}}},Df=async()=>{try{const e=yt("easymart-token"),t=localStorage.getItem("easymart-user");if(e&&t){const r=JSON.parse(t);try{const a=await Ke(()=>Promise.resolve().then(()=>lr),void 0);if(a&&typeof a.useCart=="function"){const{persistLocalToBackend:l,reloadCartFromBackend:c,mergeWithBackendOnLogin:d}=a.useCart();if(l&&await l(),c){const u="cart-merged-for-token";sessionStorage.getItem(u)!==e&&(!await c()&&d&&await d(),sessionStorage.setItem(u,e))}}}catch(a){console.warn("Cart merge after OAuth2 login failed (non-blocking):",a?.message||a)}return{success:!0,user:r}}const n=new URLSearchParams(window.location.search),s=n.get("code"),o=n.get("error");if(o)return console.error("OAuth2 error:",o),{success:!1,error:`OAuth2 lỗi: ${o}`};if(s){console.log("Legacy OAuth2 callback with code:",s);try{const r=await ze(ae.OAUTH2.USER_INFO),a=await ze(ae.OAUTH2.GET_JWT_TOKEN);if(r.success&&a.success){const l=r.result,c=a.result,d=l.email||c.user_email,u=await ol(d);if(u.success&&u.result.exists){const f={id:l.maNguoiDung||c.user_info?.maNguoiDung||null,name:l.tenNguoiDung||c.user_info?.tenNguoiDung||d.split("@")[0],email:d,phone:l.soDienThoai||c.user_info?.soDienThoai||"",avatar:l.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(l.tenNguoiDung||d.split("@")[0])}&background=007bff&color=fff`,joinDate:l.ngayTao||new Date().toISOString().split("T")[0],totalOrders:l.tongDonHang||0,totalSpent:l.tongChiTieu||0,role:l.vaiTro||c.user_role||"USER",loginMethod:"google",sub:l.sub||c.user_info?.sub};return tr("easymart-token",c.jwt_token),ss(f),{success:!0,user:f}}else return{success:!1,needsRegistration:!0,error:"Tài khoản chưa tồn tại. Vui lòng đăng ký trước.",userInfo:{name:l.tenNguoiDung||c.user_info?.tenNguoiDung||d.split("@")[0],email:d,avatar:l.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(l.tenNguoiDung||d.split("@")[0])}&background=007bff&color=fff`}}}}catch(r){return console.error("Failed to get user info from APIs:",r),{success:!1,error:"Không thể lấy thông tin user từ backend"}}}return null}catch(e){return console.error("OAuth2 callback error:",e),{success:!1,error:"Xử lý OAuth2 callback thất bại"}}},al=async()=>{try{try{const t=await Ke(()=>Promise.resolve().then(()=>lr),void 0);t&&typeof t.useCart=="function"&&(t.useCart().cart.value=[],console.log("[LOGOUT] Cart local state cleared, backend cart preserved"))}catch(t){console.warn("Clear cart state on logout failed (non-blocking):",t?.message||t)}try{localStorage.removeItem("easymart-selected-items"),localStorage.removeItem("easymart-redirect-after-login")}catch{}const e=yt("easymart-token");if(e)try{await ze(ae.AUTH.LOGOUT,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(t){console.warn("Logout API call failed:",t)}return localStorage.removeItem("easymart-user"),nr("easymart-token"),sessionStorage.removeItem("oauth2-frontend-redirect"),sessionStorage.removeItem("google-credential"),sessionStorage.removeItem("oauth2-login-mode"),sessionStorage.removeItem("google-user-info"),sessionStorage.removeItem("pending-oauth-user-info"),sessionStorage.removeItem("pending-google-credential"),sessionStorage.removeItem("pending-facebook-credential"),Ue.value=null,{success:!0}}catch(e){return console.error("Logout error:",e),localStorage.clear(),sessionStorage.clear(),Ue.value=null,{success:!1,error:"Đăng xuất có lỗi, nhưng đã xóa dữ liệu local"}}};el();function os(){return{user:Ue,isLoggedIn:mf,login:_f,loginWithGoogle:Cf,loginWithFacebook:Sf,register:kf,registerWithGoogle:Ef,registerWithFacebook:Af,logout:al,loadUser:el,forceReloadUser:bf,getJWTToken:If,getUserInfo:$f,testOAuth2Config:xf,checkEmailDuplicate:ol,checkUserEmailExists:rl,getUserByEmail:sr,checkOAuth2Sub:Rf,checkAuthStatus:Pf,validateToken:Of,handleOAuth2Callback:Df,fetchFullUserData:Tf,validateProfileAccess:Cs,updateCustomerProfile:wf,decodeToken:qs,isTokenValid:Ws,initUserFromToken:pf,debugCurrentToken:vf,checkTokenValidity:tl,autoLogoutIfInvalid:yf,performAutoLogout:Ro,updateUserFromValidation:nl,ensureUserComplete:sl}}const _e=Q([]),kn=Q(null),En=Q(!1),il=()=>{_e.value=[]},us=()=>{},At=()=>{const e=Se();return e?{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}:{"Content-Type":"application/json"}},Lf=e=>_e.value.find(t=>t.productId===e),Nf=Z(()=>_e.value.reduce((e,t)=>e+t.quantity,0)),Mf=Z(()=>_e.value.reduce((e,t)=>e+(t.product?.price||0)*t.quantity,0)),{user:He,ensureUserComplete:Hf,validateProfileAccess:Uf}=os(),Jt=async()=>{try{const n=await fetch(`${ae.BASE_URL}${ye.CART.CURRENT_USER}`,{headers:At()});if(n.ok){const o=(await n.json().catch(()=>null))?.maKH||null;try{console.log("[CART][RESOLVE_KH] source=current-user maKH=",o)}catch{}if(o)return o}}catch{}if(!He.value)return null;if(He.value?.customerInfo?.maKH){try{console.log("[CART][RESOLVE_KH] source=customerInfo maKH=",He.value.customerInfo.maKH)}catch{}return He.value.customerInfo.maKH}const e=await Hf().catch(()=>He.value);if(!e?.customerInfo?.maKH)try{console.log("[CART][RESOLVE_KH] Trying to validate profile access..."),await Uf()}catch(n){console.warn("[CART][RESOLVE_KH] Profile validation failed:",n.message)}let t=He.value?.customerInfo?.maKH||null;if(!t&&He.value?.email)try{if(console.log("[CART][RESOLVE_KH] No maKH found, attempting to create customer info..."),t=await ul(),t)return console.log("[CART][RESOLVE_KH] Successfully created customer info with maKH:",t),t}catch(n){console.error("[CART][RESOLVE_KH] Failed to create customer info:",n.message)}try{console.log("[CART][RESOLVE_KH] userId=",e?.id,"maKH=",t)}catch{}return t},rs=async e=>{try{const t=Se();if(!t)return console.warn("[CART][PULL_ITEMS] No token available"),[];const n=`${ae.BASE_URL}${ye.CART.BY_CUSTOMER_WITH_ITEMS(e)}`;console.log("[CART][PULL_ITEMS][REQ]",n,"with token:",t.substring(0,20)+"...");const s=await fetch(n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok){console.error("[CART][PULL_ITEMS][FAIL] status=",s.status,"statusText=",s.statusText);const a=await s.text().catch(()=>"Unable to read response");if(console.error("[CART][PULL_ITEMS][RESPONSE_BODY]",a),s.status===401)return console.error("[CART][PULL_ITEMS] Unauthorized - token may be invalid"),[];if(s.status===404){console.error("[CART][PULL_ITEMS] With-items endpoint not found, trying basic cart endpoint...");const l=`${ae.BASE_URL}${ye.CART.BY_CUSTOMER(e)}`;console.log("[CART][PULL_ITEMS][FALLBACK] Trying basic endpoint:",l);const c=await fetch(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(c.ok){const d=await c.json().catch(()=>({}));return console.log("[CART][PULL_ITEMS][FALLBACK] Basic cart data:",d),Array.isArray(d)?(console.warn("[CART][PULL_ITEMS][FALLBACK] Basic endpoint returned empty array - endpoint may be incorrect"),[]):d&&typeof d=="object"?(console.log("[CART][PULL_ITEMS][FALLBACK] Basic endpoint returned cart info:",d),[]):(console.warn("[CART][PULL_ITEMS][FALLBACK] Basic endpoint returned unexpected format:",d),[])}else{console.error("[CART][PULL_ITEMS][FALLBACK] Basic endpoint also failed:",c.status),console.log("[CART][PULL_ITEMS][FINAL_FALLBACK] Both endpoints failed, attempting to create cart via add endpoint...");try{const d=`${ae.BASE_URL}${ye.CART_ITEMS.ADD}`,u=await fetch(d,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({maSP:"DUMMY_SP",soLuong:1,donGiaHienTai:0})});if(u.ok){console.log("[CART][PULL_ITEMS][FINAL_FALLBACK] Successfully created cart via add endpoint");const f=await u.json().catch(()=>({}));return f.itemId&&await fetch(`${ae.BASE_URL}${ye.CART_ITEMS.REMOVE(f.itemId)}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}).catch(()=>{}),[]}else return console.warn("[CART][PULL_ITEMS][FINAL_FALLBACK] Failed to create cart via add endpoint:",u.status),[]}catch(d){return console.error("[CART][PULL_ITEMS][FINAL_FALLBACK] Error in final fallback:",d),[]}}}else return console.error("[CART][PULL_ITEMS] Other error status:",s.status),[]}const o=await s.json().catch(()=>({})),r=o?.items||[];return console.log("[CART][PULL_ITEMS][OK] maKH=",e,"count=",r.length,"tongTien=",o.tongTien),r.map(a=>({productId:a.sanPham?.maSP||a.maSP||a.productId,quantity:a.soLuong||a.quantity||1,itemId:a.maGHCT||a.maGioHangChiTiet||a.maCTGH||a.id||a.itemId,price:a.donGiaHienTai||0,product:a.sanPham||a.product||null,originalData:a}))}catch(t){return console.error("[CART][PULL_ITEMS][EXCEPTION]",t),[]}},ll=async()=>{if(!Se())return;const t=await Jt();if(!t)return;kn.value=t;const n=await Qs();if(n&&n.maKH)console.log("[CART][MERGE] Sync successful"),await An();else{const s=await rs(t);_e.value=s}En.value=!0},Bf=async()=>{await cl()},An=async()=>{if(!Se()){try{console.warn("[CART][RELOAD] No token available")}catch{}return!1}const t=await Jt();if(!t){try{console.warn("[CART][RELOAD] Could not resolve customer ID")}catch{}return!1}kn.value=t;const n=await rs(t);_e.value=Array.isArray(n)?n:[],En.value=!0;try{console.log("[CART][RELOAD] maKH=",t,"itemsCount=",_e.value.length),_e.value.length===0&&console.log("[CART][RELOAD] Cart is empty - this may be normal if backend endpoints are not fully implemented yet")}catch{}return!0},cl=async()=>{if(Se()){try{console.log("[GIOHANG][PERSIST_LOGOUT] local cart disabled, clearing state")}catch{}try{const t=await Qs();if(t&&t.maKH){console.log("[GIOHANG][PERSIST_LOGOUT] Sync successful, using maKH:",t.maKH),kn.value=t.maKH,_e.value=[],us();return}}catch(t){console.error("[GIOHANG][PERSIST_LOGOUT] Sync error:",t)}_e.value=[]}},Qs=async()=>{try{const e=_e.value.filter(s=>!s.inactive);if(e.length===0)return console.log("[CART][SYNC] No active items to sync"),null;const t={items:e.map(s=>({maSP:s.productId,soLuong:s.quantity}))};console.log("[CART][SYNC] Syncing items:",t);const n=await fetch(`${ae.BASE_URL}${ye.CART.SYNC}`,{method:"POST",headers:At(),body:JSON.stringify(t)});if(n.ok){const s=await n.json();return console.log("[CART][SYNC][SUCCESS]",s),{maKH:s.maKH,items:s.items||[],tongTien:s.tongTien||0}}else{const s=await n.json().catch(()=>({message:"Unknown error"}));throw console.error("[CART][SYNC][ERROR]",n.status,s),new Error(`Sync failed: ${s.message}`)}}catch(e){return console.error("[CART][SYNC][EXCEPTION]",e),null}},Kf=async()=>{try{console.log("🧪 [CART][TEST] Testing cart API connection...");const e=Se();if(!e)return console.error("❌ [CART][TEST] No token found"),{success:!1,error:"No authentication token"};console.log("🔑 [CART][TEST] Token found:",e.substring(0,20)+"...");const t=await Jt();if(!t)return console.error("❌ [CART][TEST] Could not resolve customer ID"),{success:!1,error:"Could not resolve customer ID"};console.log("✅ [CART][TEST] Customer ID resolved:",t);try{const n=`${ae.BASE_URL}${ye.CART.CURRENT_USER}`;console.log("🧪 [CART][TEST] Testing current-user endpoint:",n);const s=await fetch(n,{headers:At()});if(console.log("📊 [CART][TEST] Current-user response status:",s.status),s.ok){const o=await s.json();console.log("✅ [CART][TEST] Current-user data:",o)}else{const o=await s.text().catch(()=>"Unable to read");console.error("❌ [CART][TEST] Current-user error:",o)}}catch(n){console.error("❌ [CART][TEST] Current-user exception:",n)}try{const n=`${ae.BASE_URL}${ye.CART.BY_CUSTOMER(t)}`;console.log("🧪 [CART][TEST] Testing basic cart endpoint:",n);const s=await fetch(n,{headers:At()});if(console.log("📊 [CART][TEST] Basic cart response status:",s.status),s.ok){const o=await s.json();console.log("✅ [CART][TEST] Basic cart data:",o)}else{const o=await s.text().catch(()=>"Unable to read");console.error("❌ [CART][TEST] Basic cart error:",o)}}catch(n){console.error("❌ [CART][TEST] Basic cart exception:",n)}try{const n=`${ae.BASE_URL}${ye.CART.BY_CUSTOMER_WITH_ITEMS(t)}`;console.log("🧪 [CART][TEST] Testing with-items endpoint:",n);const s=await fetch(n,{headers:At()});if(console.log("📊 [CART][TEST] With-items response status:",s.status),s.ok){const o=await s.json();return console.log("✅ [CART][TEST] With-items data:",o),{success:!0,maKH:t,data:o}}else{const o=await s.text().catch(()=>"Unable to read");return console.error("❌ [CART][TEST] With-items error:",o),{success:!1,error:`API returned ${s.status}: ${o}`}}}catch(n){return console.error("❌ [CART][TEST] With-items exception:",n),{success:!1,error:n.message}}}catch(e){return console.error("❌ [CART][TEST] General exception:",e),{success:!1,error:e.message}}},ul=async()=>{try{if(!He.value?.email)return console.log("[CART][CREATE_CUSTOMER] No email available for user"),null;console.log("[CART][CREATE_CUSTOMER] Creating customer info for:",He.value.email);const e=Se(),t=await fetch(`${ae.BASE_URL}/api/nguoidung/email/${encodeURIComponent(He.value.email)}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)return console.error("[CART][CREATE_CUSTOMER] Failed to get user info:",t.status),null;const s=(await t.json()).maNguoiDung;if(!s)return console.error("[CART][CREATE_CUSTOMER] No maNguoiDung found in user info"),null;console.log("[CART][CREATE_CUSTOMER] Got maNguoiDung:",s);const o={nguoiDung:{maNguoiDung:s},hoTen:He.value.name||He.value.email.split("@")[0],soDienThoai:He.value.phone||"",diaChi:He.value.address||"",ngaySinh:He.value.birthDate||null,ngayTao:new Date().toISOString()};console.log("[CART][CREATE_CUSTOMER] Creating customer with data:",o);const r=await fetch(`${ae.BASE_URL}/api/khachhang`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(o)});if(!r.ok){const c=await r.json().catch(()=>({}));return console.error("[CART][CREATE_CUSTOMER] Failed to create customer:",r.status,c),null}const a=await r.json(),l=a.maKH||a.maKH;return l?(console.log("[CART][CREATE_CUSTOMER] Successfully created customer with maKH:",l),He.value&&(He.value.customerInfo={...He.value.customerInfo,maKH:l},He.value.maKH=l),l):(console.error("[CART][CREATE_CUSTOMER] No maKH in response:",a),null)}catch(e){return console.error("[CART][CREATE_CUSTOMER] Exception:",e),null}},Js=async(e,t=1,n=null)=>{try{const s={maSP:e,soLuong:t};n!==null&&n>0&&(s.donGiaHienTai=n);const o=await fetch(`${ae.BASE_URL}${ye.CART_ITEMS.ADD}`,{method:"POST",headers:At(),body:JSON.stringify(s)});if(o.ok){const r=await o.json();return console.log("[CART][ADD_BACKEND] Success:",r),r}else{const r=await o.json().catch(()=>({message:"Unknown error"}));return console.error("[CART][ADD_BACKEND] Error:",o.status,r),null}}catch(s){return console.error("[CART][ADD_BACKEND] Exception:",s),null}},dl=async(e,t)=>{try{const n=await fetch(`${ae.BASE_URL}${ye.CART_ITEMS.UPDATE_QTY(e)}?value=${t}`,{method:"PUT",headers:At()});return n.ok?(console.log("[CART][UPDATE_QTY] Success for itemId:",e),!0):(console.error("[CART][UPDATE_QTY] Error:",n.status),!1)}catch(n){return console.error("[CART][UPDATE_QTY] Exception:",n),!1}},fl=async e=>{try{const t=await fetch(`${ae.BASE_URL}${ye.CART_ITEMS.REMOVE(e)}`,{method:"DELETE",headers:At()});return t.ok?(console.log("[CART][REMOVE_ITEM] Success for itemId:",e),!0):(console.error("[CART][REMOVE_ITEM] Error:",t.status),!1)}catch(t){return console.error("[CART][REMOVE_ITEM] Exception:",t),!1}},or=async()=>{try{const e=await Jt();if(!e)return!1;const t=await fetch(`${ae.BASE_URL}${ye.CART.CLEAR_ITEMS(e)}`,{method:"DELETE",headers:At()});return t.ok?(console.log("[CART][CLEAR_ALL] Success for maKH:",e),!0):(console.error("[CART][CLEAR_ALL] Error:",t.status),!1)}catch(e){return console.error("[CART][CLEAR_ALL] Exception:",e),!1}},rr=async e=>{try{const t=await Jt();if(!t)return!1;const n=await fetch(`${ae.BASE_URL}${ye.CART.UPDATE_STATUS(t)}?value=${e}`,{method:"PUT",headers:At()});return n.ok?(console.log("[CART][UPDATE_STATUS] Success:",e),!0):(console.error("[CART][UPDATE_STATUS] Error:",n.status),!1)}catch(t){return console.error("[CART][UPDATE_STATUS] Exception:",t),!1}},ar=async()=>{if(!Se())return console.log("[CART][SYNC_IDS] No token available"),!1;const t=await Jt();if(!t)return console.log("[CART][SYNC_IDS] No customer ID available"),!1;try{console.log("[CART][SYNC_IDS] Syncing itemIds from backend...");const n=await rs(t);if(!n||n.length===0)return console.log("[CART][SYNC_IDS] No backend items found"),!1;let s=0;return _e.value.forEach(o=>{const r=n.find(a=>a.productId===o.productId);r&&r.itemId?(!o.itemId||o.itemId!==r.itemId)&&(o.itemId=r.itemId,s++,console.log("[CART][SYNC_IDS] Updated itemId for",o.productId,":",r.itemId)):console.warn("[CART][SYNC_IDS] No backend item found for",o.productId)}),s>0?(us(),console.log("[CART][SYNC_IDS] Synced",s,"itemIds")):console.log("[CART][SYNC_IDS] No itemIds needed syncing"),s>0}catch(n){return console.error("[CART][SYNC_IDS] Error syncing itemIds:",n),!1}},jf=async()=>{if(!Se())throw new Error("Cần đăng nhập để thanh toán");try{if(console.log("[CART][CHECKOUT] Processing checkout..."),await rr(1))return console.log("[CART][CHECKOUT] Successfully updated cart status to Paid"),_e.value=[],us(),En.value=!1,{success:!0,message:"Thanh toán thành công"};throw new Error("Không thể cập nhật trạng thái giỏ hàng")}catch(t){return console.error("[CART][CHECKOUT] Error:",t),{success:!1,error:t.message}}},Ff=async()=>{if(!Se())throw new Error("Cần đăng nhập để hủy giỏ hàng");try{if(console.log("[CART][CANCEL] Cancelling cart..."),await rr(2))return console.log("[CART][CANCEL] Successfully cancelled cart"),_e.value=[],us(),En.value=!1,{success:!0,message:"Đã hủy giỏ hàng"};throw new Error("Không thể hủy giỏ hàng")}catch(t){return console.error("[CART][CANCEL] Error:",t),{success:!1,error:t.message}}},ir=async(e,t=1,n=null)=>{try{console.log("[CART][ADD] productId=",e,"quantity=",t)}catch{}if(!Se()){try{sessionStorage.setItem("pending-cart-add",JSON.stringify({productId:e,quantity:t})),typeof window<"u"&&(sessionStorage.setItem("easymart-redirect-after-login",window.location.pathname||"/"),window.location.href="/login")}catch{}return{success:!1,needsLogin:!0}}let o=!0,r=n,a=null;try{if(n)typeof n.trangThai<"u"?(o=n.trangThai===1,a=n.trangThai):typeof n.isActive<"u"?(o=!!n.isActive,a=n.isActive?"active":"inactive"):(o=!0,a="unknown");else{const l=await fetch(`${ae.BASE_URL}${ye.PRODUCTS.BY_ID(e)}`);if(l.ok){const c=await l.json();r=c,typeof c.trangThai<"u"?(o=c.trangThai===1,a=c.trangThai):typeof c.isActive<"u"&&(o=!!c.isActive,a=c.isActive?"active":"inactive")}}}catch(l){console.warn("[CART][ADD] Could not check product status:",l),o=!0,a="unknown"}if(!o)return console.warn("[CART][ADD] Product is inactive, skip add:",e,"status:",a),typeof window<"u"&&alert(`⚠️ Sản phẩm ${e} hiện không khả dụng!

Trạng thái: ${a===0?"Ngừng bán":"Không khả dụng"}

Vui lòng chọn sản phẩm khác hoặc liên hệ admin để kích hoạt sản phẩm.`),{success:!1,inactive:!0,message:`Sản phẩm ${e} hiện không khả dụng (trạng thái: ${a})`};try{console.log("[CART][ADD] Adding to backend:",e,"quantity:",t);const l=r?.giaHienTai||r?.price||0;if(await Js(e,t,l))return await An(),{success:!0,message:`Đã thêm ${t} sản phẩm vào giỏ hàng`}}catch(l){return console.error("[CART][ADD] Backend add error:",l),typeof window<"u"&&alert(`❌ Không thể thêm sản phẩm vào giỏ hàng!

Lỗi: ${l.message||"Lỗi không xác định"}

Vui lòng thử lại sau hoặc liên hệ admin.`),{success:!1,error:l.message||"Không thể thêm vào giỏ hàng"}}return{success:!1,error:"Không thể thêm vào giỏ hàng"}},Po=async e=>{const t=_e.value.findIndex(n=>n.productId===e);if(t!==-1){const n=_e.value[t];if(Se())try{if(!n.itemId){console.log("[CART][REMOVE] Item missing itemId, syncing from backend..."),await ar();const o=_e.value.find(r=>r.productId===e);o?.itemId&&(n.itemId=o.itemId)}if(n.itemId)console.log("[CART][REMOVE] Removing from backend:",n.itemId),await fl(n.itemId)?console.log("[CART][REMOVE] Successfully removed from backend"):console.warn("[CART][REMOVE] Failed to remove from backend, continuing with local removal");else{console.log("[CART][REMOVE] No itemId found, using fallback method");const o=_e.value.filter(r=>r.productId!==e);await or();for(const r of o)r.inactive||await Js(r.productId,r.quantity,r.product?.giaHienTai||r.price||0)}}catch(o){console.error("[CART][REMOVE] Backend removal error:",o)}_e.value.splice(t,1),console.log("[CART][REMOVE] Removed from local cart:",e)}},Gf=async(e,t)=>{const n=Lf(e);if(n)if(t<=0)await Po(e);else{if(Se())try{if(!n.itemId){console.log("[CART][UPDATE_QTY] Item missing itemId, syncing from backend..."),await ar();const o=_e.value.find(r=>r.productId===e);o?.itemId&&(n.itemId=o.itemId)}if(n.itemId)console.log("[CART][UPDATE_QTY] Updating backend quantity:",n.itemId,"to",t),await dl(n.itemId,t)?console.log("[CART][UPDATE_QTY] Successfully updated backend"):console.warn("[CART][UPDATE_QTY] Failed to update backend, continuing with local update");else{console.log("[CART][UPDATE_QTY] No itemId found, using fallback method"),await Po(e),await ir(e,t,n.product);return}}catch(o){console.error("[CART][UPDATE_QTY] Backend update error:",o)}n.quantity=t,console.log("[CART][UPDATE_QTY] Updated local quantity:",e,"to",t)}},Vf=async()=>{if(Se())try{console.log("[CART][CLEAR] Clearing backend cart..."),await or()?console.log("[CART][CLEAR] Successfully cleared backend cart"):console.warn("[CART][CLEAR] Failed to clear backend cart, continuing with local clear")}catch(t){console.error("[CART][CLEAR] Backend clear error:",t)}_e.value=[],console.log("[CART][CLEAR] Cleared local cart")},zf=e=>_e.value.map(t=>{const n=e.find(s=>s.id===t.productId);return{...t,product:n||t.product}}).filter(t=>t.product),Yf=e=>_e.value.reduce((t,n)=>{const s=e.find(o=>o.id===n.productId);return t+(s?s.price*n.quantity:0)},0);il();rt(He,async(e,t)=>{const n=Se();if(e&&!t&&n){try{console.log("[GIOHANG][AUTH_WATCH] login detected")}catch{}try{const o=sessionStorage.getItem("pending-cart-add");if(o){const{productId:r,quantity:a}=JSON.parse(o);sessionStorage.removeItem("pending-cart-add"),console.log("[GIOHANG][AUTH_WATCH] Processing pending cart add:",r,a);const l=await ir(r,a);l.success?console.log("[GIOHANG][AUTH_WATCH] Successfully added pending item:",l.message):console.warn("[GIOHANG][AUTH_WATCH] Failed to add pending item:",l.error||l.message)}}catch(o){console.error("[GIOHANG][AUTH_WATCH] Error processing pending cart add:",o)}console.log("[GIOHANG][AUTH_WATCH] Reloading cart from backend..."),await An()?console.log("[GIOHANG][AUTH_WATCH] Cart reload successful, items count:",_e.value.length):console.warn("[GIOHANG][AUTH_WATCH] Cart reload failed, but continuing...")}});const qf=async e=>{try{console.log("[GIOHANG][FALLBACK] Adding items to cart for maKH:",e);for(const t of _e.value)if(t.inactive)console.log("[GIOHANG][FALLBACK] Skipping inactive item:",t.productId);else try{await Js(t.productId,t.quantity,t.product?.giaHienTai||t.product?.price||null)?console.log("[GIOHANG][FALLBACK] Item added successfully:",t.productId):console.error("[GIOHANG][FALLBACK] Failed to add item:",t.productId)}catch(n){console.error("[GIOHANG][FALLBACK] Exception adding item:",n)}}catch(t){console.error("[GIOHANG][FALLBACK] Error in fallback persist:",t)}};(async()=>{if(Se()){try{console.log("[GIOHANG][INIT] token present, syncing cart...")}catch{}if(_e.value.length===0){console.log("[GIOHANG][INIT] Local cart empty, just reloading backend"),await An();return}const t=await Qs();t&&t.maKH?(console.log("[GIOHANG][INIT] Sync successful, using maKH:",t.maKH),kn.value=t.maKH,(!t.items||t.items.length===0)&&(console.warn("[GIOHANG][INIT] Sync returned empty items, trying fallback..."),await qf(t.maKH)),await An()):(console.log("[GIOHANG][INIT] Sync failed, using fallback strategy"),await ll())}})();function Xs(){return{cart:_e,backendCartId:kn,backendReady:En,cartCount:Nf,cartTotal:Mf,addToCart:ir,removeFromCart:Po,updateCartQuantity:Gf,clearCart:Vf,getCartItemsWithProducts:zf,getCartTotal:Yf,loadCart:il,saveCart:us,addItemToBackendCart:Js,updateItemQuantityInBackend:dl,removeItemFromBackend:fl,clearBackendCart:or,updateCartStatus:rr,syncItemIdsFromBackend:ar,checkoutCart:jf,cancelCart:Ff,createCustomerInfoForUser:ul,mergeWithBackendOnLogin:ll,persistLocalToBackendAndClear:cl,reloadCartFromBackend:An,syncLocalCartToDBViaEndpoint:Qs,testCartAPIConnection:Kf,debugCartState:()=>(console.log("=== CART DEBUG STATE ==="),console.log("Local cart items:",_e.value.map(e=>({productId:e.productId,quantity:e.quantity,itemId:e.itemId,hasItemId:!!e.itemId,inactive:e.inactive}))),console.log("Backend cart ID:",kn.value),console.log("Backend ready:",En.value),console.log("Token available:",!!Se()),_e.value),getLocalCartSnapshot:()=>({count:_e.value.length,items:_e.value.map(e=>({productId:e.productId,quantity:e.quantity}))}),getBackendCartSnapshot:async()=>{if(!Se())return{maKH:null,items:[]};const t=await Jt();if(!t)return{maKH:null,items:[]};const n=await rs(t);return{maKH:t,items:n}},compareLocalAndBackend:async()=>{const e={count:_e.value.length,items:_e.value.map(c=>({productId:c.productId,quantity:c.quantity}))},t=Se();let n={maKH:null,items:[]};if(t){const c=await Jt();if(c){const d=await rs(c);n={maKH:c,items:d}}}const s=c=>{const d=new Map;for(const u of c){const f=String(u.productId);d.set(f,(d.get(f)||0)+(u.quantity||0))}return d},o=s(e.items),r=s(n.items),a=new Set([...o.keys(),...r.keys()]),l=[];for(const c of a){const d=o.get(c)||0,u=r.get(c)||0;l.push({productId:c,localQty:d,backendQty:u,equal:d===u})}return{local:e,backend:n,diff:l}}}}const lr=Object.freeze(Object.defineProperty({__proto__:null,persistCartOnLogout:Bf,useCart:Xs},Symbol.toStringTag,{value:"Module"}));class an{static async getAllCategories(){try{const t=await fetch(`${Qe}${ye.CATEGORIES.LIST}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).map(s=>({id:s.maLoaiSP,name:s.tenLoai,description:s.moTa,parentId:s.loaiCha,displayOrder:s.thuTuHienThi,isDeleted:s.isDeleted,icon:an.getCategoryIcon(s.tenLoai),color:an.getCategoryColor(s.tenLoai)}))}catch(t){return console.error("Error fetching categories:",t),an.getDefaultCategories()}}static async getCategoryById(t){try{const n=await fetch(`${Qe}${ye.CATEGORIES.BY_ID(t)}`);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();return{id:s.maLoaiSP,name:s.tenLoai,description:s.moTa,parentId:s.loaiCha,displayOrder:s.thuTuHienThi,isDeleted:s.isDeleted,icon:an.getCategoryIcon(s.tenLoai),color:an.getCategoryColor(s.tenLoai)}}catch(n){return console.error(`Error fetching category ${t}:`,n),null}}static getCategoryIcon(t){if(!t)return"fas fa-tags";const n={"tươi sống":"fas fa-leaf","rau củ":"fas fa-carrot",thịt:"fas fa-drumstick-bite",cá:"fas fa-fish","trái cây":"fas fa-apple-alt","đông lạnh":"fas fa-snowflake",kem:"fas fa-ice-cream","đóng hộp":"fas fa-box",hộp:"fas fa-box",lon:"fas fa-cube","đồ uống":"fas fa-tint",nước:"fas fa-tint",sữa:"fas fa-wine-bottle",trà:"fas fa-mug-hot","cà phê":"fas fa-coffee",sữa:"fas fa-baby","em bé":"fas fa-baby","trẻ em":"fas fa-child","gia vị":"fas fa-pepper-hot","dầu ăn":"fas fa-oil-can","nước mắm":"fas fa-flask",muối:"fas fa-cube","hóa phẩm":"fas fa-soap","tẩy rửa":"fas fa-broom",giặt:"fas fa-tshirt","vệ sinh":"fas fa-spray-can"},s=t.toLowerCase().trim();for(const[o,r]of Object.entries(n))if(s.includes(o))return r;return s.includes("ăn")||s.includes("thực phẩm")?"fas fa-utensils":s.includes("đồ")?"fas fa-shopping-basket":"fas fa-tags"}static getCategoryColor(t){if(!t)return"primary";const n={"tươi sống":"success","rau củ":"success",thịt:"danger",cá:"info","trái cây":"success","đông lạnh":"info",kem:"info","đóng hộp":"warning",hộp:"warning",lon:"warning","đồ uống":"primary",nước:"primary",sữa:"info",trà:"success","cà phê":"dark",sữa:"info","em bé":"info","trẻ em":"info","gia vị":"danger","dầu ăn":"warning","nước mắm":"danger",muối:"light","hóa phẩm":"success","tẩy rửa":"success",giặt:"info","vệ sinh":"success"},s=t.toLowerCase().trim();for(const[o,r]of Object.entries(n))if(s.includes(o))return r;return s.includes("ăn")||s.includes("thực phẩm")?"success":(s.includes("đồ"),"primary")}static getDefaultCategories(){return[{id:"LSP001",name:"Tươi sống",icon:"fas fa-leaf",color:"success",description:"Các loại rau củ quả tươi"},{id:"LSP002",name:"Đông lạnh",icon:"fas fa-snowflake",color:"info",description:"Thực phẩm đông lạnh"},{id:"LSP003",name:"Đồ đóng hộp",icon:"fas fa-box",color:"warning",description:"Thực phẩm đóng hộp"},{id:"LSP004",name:"Đồ uống",icon:"fas fa-tint",color:"primary",description:"Các loại nước giải khát"},{id:"LSP005",name:"Sữa & em bé",icon:"fas fa-baby",color:"info",description:"Sản phẩm cho trẻ em"},{id:"LSP006",name:"Gia vị & Dầu ăn",icon:"fas fa-pepper-hot",color:"danger",description:"Gia vị và dầu ăn"},{id:"LSP007",name:"Hóa phẩm & Tẩy rửa",icon:"fas fa-soap",color:"success",description:"Sản phẩm vệ sinh"}]}}const hl={BASIC:"/api/sanpham/search",ADVANCED:"/api/sanpham/search/advanced"},gl=async(e={})=>{try{const t=new URLSearchParams;e.keyword&&t.append("keyword",e.keyword),e.tensp&&t.append("tensp",e.tensp),e.mota&&t.append("mota",e.mota),e.activeOnly!==void 0&&t.append("activeOnly",e.activeOnly),e.page&&t.append("page",e.page),e.size&&t.append("size",e.size);const n=`${Qe}${hl.BASIC}?${t.toString()}`,s=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();return{success:!0,data:o,total:o.totalElements||o.length||0,page:o.number||1,size:o.size||10}}catch(t){return console.error("Basic search error:",t),{success:!1,error:t.message,data:[],total:0,page:1,size:10}}},Wf=async(e={})=>{try{const t=new URLSearchParams;e.keyword&&t.append("keyword",e.keyword),e.maLoaiSP&&t.append("maLoaiSP",e.maLoaiSP),e.tensp&&t.append("tensp",e.tensp),e.mota&&t.append("mota",e.mota),e.minPrice&&t.append("minPrice",e.minPrice),e.maxPrice&&t.append("maxPrice",e.maxPrice),e.activeOnly!==void 0&&t.append("activeOnly",e.activeOnly),e.inStock!==void 0&&t.append("inStock",e.inStock),e.sortBy&&t.append("sortBy",e.sortBy),e.sortOrder&&t.append("sortOrder",e.sortOrder),e.page&&t.append("page",e.page),e.size&&t.append("size",e.size);const n=`${Qe}${hl.ADVANCED}?${t.toString()}`,s=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const o=await s.json();return{success:!0,data:o,total:o.totalElements||o.length||0,page:o.number||1,size:o.size||10}}catch(t){return console.error("Advanced search error:",t),{success:!1,error:t.message,data:[],total:0,page:1,size:10}}},ml=async(e,t=5)=>{if(!e||e.trim().length<2)return[];try{const n=await gl({keyword:e.trim(),activeOnly:!0,size:t});return n.success?n.data:[]}catch(n){return console.error("Quick search error:",n),[]}};function xn(){const e=Q([]),t=Q([]),n=Q(""),s=Q(null),o=Q({hours:0,minutes:0,seconds:0}),r=Q(!1),{addToCart:a}=Xs(),l=[{id:1,name:"Tươi Sống",icon:"fas fa-leaf",color:"success"},{id:2,name:"Đông lạnh",icon:"fas fa-snowflake",color:"info"},{id:3,name:"Đồ đóng hộp",icon:"fas fa-can-food",color:"warning"},{id:4,name:"Đồ Uống",icon:"fas fa-tint",color:"primary"},{id:5,name:"Sữa & Em bé",icon:"fas fa-baby",color:"info"},{id:6,name:"Gia Vị & Dầu Ăn",icon:"fas fa-pepper-hot",color:"danger"},{id:7,name:"Hóa Phẩm & Tẩy Rửa",icon:"fas fa-soap",color:"success"}],c=Z(()=>e.value.filter(v=>v.isFlashSale)),d=async v=>{try{const $=await fetch(`${Qe}${ye.PRODUCTS.BY_CATEGORY_ACTIVE(v)}`);if(!$.ok)throw new Error(`HTTP error! status: ${$.status}`);const C=(await $.json()).map(I=>({id:I.maSP||I.id,name:I.tenSP||I.name,price:I.giaHienTai||I.giaBan||I.price,originalPrice:I.giaGoc||I.originalPrice,categoryId:I.loaiSanPham?.maLoaiSP||I.categoryId,categoryName:I.loaiSanPham?.tenLoai||I.categoryName,image:`${Qe}${ye.IMAGES.SERVE_IMAGE(I.maSP+"_main.jfif")}`,images:ye.IMAGES.PRODUCT_IMAGES(I.maSP).map(N=>`${Qe}${N}`),description:I.moTa||I.description,isFlashSale:I.isFlashSale||!1,isActive:I.isActive!==!1,stock:I.trongLuong||I.stock||0,unit:I.donViTinh||I.unit||"cái",rating:I.danhGia||I.rating||4.5,reviews:I.danhGia||I.reviews||[]}));return await T(C)}catch($){return console.error(`Failed to get products for category ${v} from API:`,$),[]}},u=v=>t.value.find($=>$.id===v),f=v=>{const $=Number(v),R=Number.isFinite($)?$:0;return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(R)},h=(v,$="success")=>{s.value={message:v,type:$},setTimeout(()=>{s.value=null},3e3)},m=v=>{h(`Đã lưu mã khuyến mãi: ${v}`,"success")},_=()=>{const v=new Date().getTime(),$=new Date;$.setHours(24,0,0,0);const R=$.getTime()-v;o.value={hours:Math.floor(R%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(R%(1e3*60*60)/(1e3*60)),seconds:Math.floor(R%(1e3*60)/1e3)}},y=()=>{_(),setInterval(_,1e3)},U=async()=>{y(),await Promise.all([L(),b()])},L=async()=>{try{r.value=!0;const v=await an.getAllCategories();t.value=v}catch(v){console.error("Failed to load categories from API, using defaults:",v),t.value=l}finally{r.value=!1}},b=async()=>{try{const v=await fetch(`${Qe}${ye.PRODUCTS.LIST}`);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const R=(await v.json()).map(C=>({id:C.maSP||C.id,name:C.tenSP||C.name,price:C.giaHienTai||C.giaBan||C.price,originalPrice:C.giaGoc||C.originalPrice,categoryId:C.loaiSanPham?.maLoaiSP||C.categoryId,categoryName:C.loaiSanPham?.tenLoai||C.categoryName,image:`${Qe}${ye.IMAGES.SERVE_IMAGE(C.maSP+"_main.jfif")}`,images:ye.IMAGES.PRODUCT_IMAGES(C.maSP).map(I=>`${Qe}${I}`),description:C.moTa||C.description,isFlashSale:C.isFlashSale||!1,isActive:C.isActive!==!1,stock:C.trongLuong||C.stock||0,unit:C.donViTinh||C.unit||"cái",rating:C.danhGia||C.rating||4.5,reviews:C.danhGia||C.reviews||[]}));e.value=await T(R)}catch(v){console.error("Failed to load products from API:",v),e.value=[]}},T=async v=>await Promise.all(v.map(async R=>{const C=Number(R.price);if(Number.isFinite(C)&&C>0)return R;try{const V=await fetch(`${Qe}${ye.PRODUCTS.BY_ID(R.id)}`);if(V.ok){const I=await V.json(),j=I.giaHienTai||I.giaBan||I.price||0;return{...R,price:j}}}catch{}return R}));return vt(()=>{U()}),{products:e,categories:t,searchQuery:n,notification:s,countdown:o,isLoadingCategories:r,flashSaleProducts:c,getProductsByCategory:d,getCategoryById:u,formatPrice:f,showNotification:h,addToCart:a,saveCoupon:m,initializeData:U,loadCategories:L,loadProducts:b,quickSearch:ml,basicSearch:gl,advancedSearch:Wf}}const st=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Qf={class:"d-flex align-items-center justify-content-center rounded-circle me-3 bg-white bg-opacity-20",style:{width:"40px",height:"40px"}},Jf={class:"flex-grow-1"},Xf={class:"fw-medium lh-sm"},Zf={key:0,class:"mt-2 rounded-pill overflow-hidden bg-white bg-opacity-30",style:{height:"3px"}},eh={__name:"Notification",props:{message:{type:String,required:!0},type:{type:String,default:"success",validator:e=>["success","warning","danger","info"].includes(e)},duration:{type:Number,default:4e3},showProgress:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,o=Q(100);let r=null,a=null;const l=Z(()=>{const f={success:"fas fa-check-circle",warning:"fas fa-exclamation-triangle",danger:"fas fa-times-circle",info:"fas fa-info-circle"};return f[n.type]||f.success}),c=()=>{d(),s("close")},d=()=>{r&&(clearInterval(r),r=null),a&&(clearTimeout(a),a=null)},u=()=>{if(!n.showProgress)return;const f=100/(n.duration/50);r=setInterval(()=>{o.value=Math.max(0,o.value-f)},50)};return vt(()=>{u(),a=setTimeout(()=>{c()},n.duration)}),Zt(()=>{d()}),(f,h)=>(x(),ls(Xa,{to:"body"},[ge(Vs,{name:"notification","enter-active-class":"animate__animated animate__slideInRight animate__faster","leave-active-class":"animate__animated animate__slideOutRight animate__faster"},{default:Ne(()=>[i("div",{class:ke(["position-fixed top-0 end-0 m-3 shadow-lg rounded-3 border-0 notification-alert d-flex align-items-center",`alert-${e.type}`]),style:{"z-index":"9999","min-width":"350px","max-width":"450px","backdrop-filter":"blur(10px)"},role:"alert"},[i("div",Qf,[i("i",{class:ke(`${l.value} fs-5`)},null,2)]),i("div",Jf,[i("div",Xf,z(e.message),1),e.showProgress?(x(),P("div",Zf,[i("div",{class:"h-100 bg-white bg-opacity-80 rounded-pill",style:bn([{transition:"width 0.05s linear"},{width:o.value+"%"}])},null,4)])):pe("",!0)]),i("button",{type:"button",class:"btn-close ms-3 opacity-75 hover-scale",onClick:c,"aria-label":"Đóng"})],2)]),_:1})]))}},th=st(eh,[["__scopeId","data-v-fc51c166"]]),nh={class:"search-container"},sh={class:"search-icon"},oh={class:"fas fa-search"},rh={class:"spinner-border spinner-border-sm",role:"status"},ah=["placeholder","value"],ih={class:"search-actions"},lh={key:0,class:"quick-search"},ch={class:"dropdown-section"},uh={class:"recent-searches"},dh=["onClick"],fh={class:"dropdown-section"},hh={class:"popular-keywords"},gh=["onClick"],mh={key:1,class:"search-results"},ph={key:0,class:"search-error"},vh={class:"error-content"},yh={key:1,class:"no-results"},bh={key:2,class:"search-suggestions"},Th={class:"suggestion-items"},wh=["onClick"],_h={key:3,class:"product-results"},Ch={class:"results-header"},Sh={class:"section-title"},kh={class:"product-list"},Eh=["onClick"],Ah={class:"product-image"},Ih=["src","alt"],$h={key:0,class:"product-badge"},xh={class:"product-info"},Rh={class:"product-name"},Ph={class:"product-price"},Oh={key:0,class:"original-price"},Dh={class:"current-price"},Lh={class:"product-meta"},Nh={class:"product-rating"},Mh={key:0,class:"out-of-stock-label"},Hh={class:"product-actions"},Uh=["onClick","disabled"],Bh={key:4,class:"category-results"},Kh={class:"category-list"},jh=["onClick"],Fh={class:"product-count"},Gh={__name:"SearchDropdown",props:{searchQuery:{type:String,required:!0}},emits:["update-search","add-to-cart","view-product","view-category"],setup(e,{emit:t}){const n=en(),s=e,o=t,r=Q(null),a=Q(!1),l=Q(!1),c=Q(-1),d=Q(0),u=Q(null),f=Q([]),h=Q(null),m=["Tìm kiếm sản phẩm... (có thể tìm không dấu)","Rau củ quả tươi ngon...","Thịt cá hải sản...","Sữa và các sản phẩm từ sữa...","Bánh kẹo đồ uống..."],_=Lt(["Rau xanh organic","Thịt bò úc","Sữa tươi"]),y=Lt(["Rau organic","Thịt tươi","Hải sản","Trái cây","Sữa tươi","Bánh mì","Đồ uống","Gia vị"]),U=Z(()=>m[d.value]),L=Z(()=>s.searchQuery.length<2?[]:y.filter(O=>O.toLowerCase().includes(s.searchQuery.toLowerCase())&&O.toLowerCase()!==s.searchQuery.toLowerCase()).slice(0,3)),b=Z(()=>f.value.slice(0,5)),T=Z(()=>s.searchQuery.length<2?[]:[{id:1,name:"Rau củ quả",icon:"fas fa-carrot",color:"success",productCount:24},{id:2,name:"Thịt cá",icon:"fas fa-fish",color:"danger",productCount:15},{id:3,name:"Sữa",icon:"fas fa-glass-whiskey",color:"info",productCount:8}].filter(O=>O.name.toLowerCase().includes(s.searchQuery.toLowerCase()))),v=Z(()=>window.innerWidth<=768),$=async O=>{const J=O.target.value;o("update-search",J),J.length>=2?(l.value=!0,h.value=null,clearTimeout(u.value),u.value=setTimeout(async()=>{try{const ee=await ml(J,10);f.value=ee}catch(ee){console.error("API search error:",ee),h.value="Lỗi tìm kiếm, vui lòng thử lại",f.value=[]}finally{l.value=!1}},300)):(f.value=[],l.value=!1),a.value=!0,c.value=-1},R=()=>{a.value=!0},C=()=>{setTimeout(()=>{a.value=!1},200)},V=()=>{a.value=!1},I=()=>{r.value?.focus()},j=()=>{o("update-search",""),f.value=[],h.value=null,I()},N=O=>{const J=O.trim();J&&!_.includes(J)&&(_.unshift(J),_.length>5&&_.pop())},w=O=>{o("update-search",O),I()},S=O=>{o("update-search",O),I()},E=O=>{o("update-search",O),N(O),I()},ue=O=>{N(s.searchQuery),a.value=!1;const J=O.maSP||O.id;J&&n.push({name:"ProductDetail",params:{id:J}})},F=O=>{a.value=!1;const J=O.maLoaiSP||O.id;J&&n.push({name:"Category",params:{id:J}})},ie=O=>{o("add-to-cart",O)},re=O=>{const J=Number(O);return!Number.isFinite(J)||J<=0?"0 ₫":new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(J)},oe=O=>O.hinhAnh?`${Qe}/api/upload/serve-image/${O.hinhAnh}`:O.image?`${Qe}/api/upload/serve-image/${O.image}`:O.maSP?`${Qe}/api/upload/serve-image/${O.maSP}_main.jfif`:O.id?`${Qe}/api/upload/serve-image/${O.id}_main.jfif`:"/placeholder-product.jpg",Ee=O=>{O.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0zMCAxNUMzMi43NjE0IDE1IDM1IDE3LjIzODYgMzUgMjBDMzUgMjIuNzYxNCAzMi43NjE0IDI1IDMwIDI1QzI3LjIzODYgMjUgMjUgMjIuNzYxNCAyNSAyMEMyNSAxNy4yMzg2IDI3LjIzODYgMTUgMzAgMTVaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0zMCAyN0MzMi43NjE0IDI3IDM1IDI5LjIzODYgMzUgMzJDMzUgMzQuNzYxNCAzMi43NjE0IDM3IDMwIDM3QzI3LjIzODYgMzcgMjUgMzQuNzYxNCAyNSAzMkMyNSAyOS4yMzg2IDI3LjIzODYgMjcgMzAgMjdaIiBmaWxsPSIjQ0NDIi8+Cjwvc3ZnPgo="},Te=O=>{if(!a.value)return;const J=L.value.length+b.value.length;switch(O.key){case"ArrowDown":O.preventDefault(),c.value=Math.min(c.value+1,J-1);break;case"ArrowUp":O.preventDefault(),c.value=Math.max(c.value-1,-1);break;case"Enter":if(O.preventDefault(),c.value>=0)if(c.value<L.value.length)E(L.value[c.value]);else{const ee=c.value-L.value.length;ue(b.value[ee])}break;case"Escape":O.preventDefault(),a.value=!1,r.value?.blur();break}},le=()=>{d.value=(d.value+1)%m.length};let A=null;return vt(()=>{A=setInterval(le,3e3),document.addEventListener("click",O=>{O.target.closest(".search-container")||(a.value=!1)})}),Zt(()=>{A&&clearInterval(A)}),rt(()=>s.searchQuery,O=>{O.length===0&&(l.value=!1,f.value=[],h.value=null)}),(O,J)=>(x(),P("div",nh,[i("div",{class:"search-wrapper",onClick:I},[i("div",sh,[ht(i("i",oh,null,512),[[es,!l.value]]),ht(i("div",rh,J[2]||(J[2]=[i("span",{class:"visually-hidden"},"Đang tìm kiếm...",-1)]),512),[[es,l.value]])]),i("input",{ref_key:"searchInput",ref:r,type:"text",class:"form-control search-input",placeholder:U.value,value:e.searchQuery,onInput:$,onFocus:R,onBlur:C,onKeydown:Te,autocomplete:"off",spellcheck:"false"},null,40,ah),i("div",ih,[e.searchQuery.length>0?(x(),P("button",{key:0,class:"btn btn-sm clear-btn",onClick:j,type:"button",title:"Xóa tìm kiếm"},J[3]||(J[3]=[i("i",{class:"fas fa-times"},null,-1)]))):pe("",!0)])]),ge(Vs,{name:"dropdown"},{default:Ne(()=>[a.value?(x(),P("div",{key:0,class:"search-dropdown",onMousedown:J[1]||(J[1]=je(()=>{},["prevent"]))},[e.searchQuery.length===0?(x(),P("div",lh,[i("div",ch,[J[5]||(J[5]=i("h6",{class:"section-title"},[i("i",{class:"fas fa-history text-muted me-2"}),q("Tìm kiếm gần đây ")],-1)),i("div",uh,[(x(!0),P(be,null,Le(_,(ee,D)=>(x(),P("button",{key:`recent-${D}`,class:"btn btn-sm btn-outline-secondary recent-search-item",onClick:se=>w(ee)},[J[4]||(J[4]=i("i",{class:"fas fa-history me-2"},null,-1)),q(z(ee),1)],8,dh))),128))])]),i("div",fh,[J[6]||(J[6]=i("h6",{class:"section-title"},[i("i",{class:"fas fa-fire text-danger me-2"}),q("Từ khóa phổ biến ")],-1)),i("div",hh,[(x(!0),P(be,null,Le(y,(ee,D)=>(x(),P("button",{key:`popular-${D}`,class:"btn btn-sm btn-outline-primary popular-keyword",onClick:se=>S(ee)},z(ee),9,gh))),128))])])])):(x(),P("div",mh,[h.value?(x(),P("div",ph,[i("div",vh,[J[8]||(J[8]=i("i",{class:"fas fa-exclamation-triangle text-warning"},null,-1)),J[9]||(J[9]=i("h6",null,"Lỗi tìm kiếm",-1)),i("p",null,z(h.value),1),i("button",{class:"btn btn-sm btn-outline-primary",onClick:J[0]||(J[0]=ee=>$({target:{value:e.searchQuery}}))},J[7]||(J[7]=[i("i",{class:"fas fa-redo me-2"},null,-1),q("Thử lại ")]))])])):b.value.length===0&&!l.value?(x(),P("div",yh,J[10]||(J[10]=[i("div",{class:"no-results-content"},[i("i",{class:"fas fa-search-minus text-muted"}),i("h6",null,"Không tìm thấy kết quả"),i("p",null,"Thử tìm kiếm với từ khóa khác")],-1)]))):pe("",!0),L.value.length>0?(x(),P("div",bh,[J[12]||(J[12]=i("h6",{class:"section-title"},[i("i",{class:"fas fa-lightbulb text-warning me-2"}),q("Gợi ý tìm kiếm ")],-1)),i("div",Th,[(x(!0),P(be,null,Le(L.value,(ee,D)=>(x(),P("button",{key:`suggestion-${D}`,class:ke(["suggestion-item",{active:c.value===D}]),onClick:se=>E(ee)},[J[11]||(J[11]=i("i",{class:"fas fa-search me-2"},null,-1)),q(z(ee),1)],10,wh))),128))])])):pe("",!0),b.value.length>0?(x(),P("div",_h,[i("div",Ch,[i("h6",Sh,[J[13]||(J[13]=i("i",{class:"fas fa-box text-primary me-2"},null,-1)),q(" Sản phẩm ("+z(b.value.length)+") ",1)])]),i("div",kh,[(x(!0),P(be,null,Le(b.value,(ee,D)=>(x(),P("div",{key:ee.maSP||ee.id||D,class:ke(["product-item",{active:c.value===L.value.length+D,"out-of-stock":(ee.trongLuong||ee.stock||0)===0||ee.inStock===!1}]),onClick:se=>ue(ee)},[i("div",Ah,[i("img",{src:oe(ee),alt:ee.tenSP||ee.name||"Sản phẩm",loading:"lazy",onError:Ee},null,40,Ih),ee.giamGia||ee.discount?(x(),P("div",$h," -"+z(ee.giamGia||ee.discount)+"% ",1)):pe("",!0)]),i("div",xh,[i("h6",Rh,z(ee.tenSP||ee.name||"Tên sản phẩm"),1),i("div",Ph,[ee.giaGoc||ee.originalPrice?(x(),P("span",Oh,z(re(ee.giaGoc||ee.originalPrice)),1)):pe("",!0),i("span",Dh,z(re(ee.giaHienTai||ee.giaBan||ee.price||0)),1)]),i("div",Lh,[i("div",Nh,[J[14]||(J[14]=i("i",{class:"fas fa-star text-warning"},null,-1)),i("span",null,z(ee.danhGia||ee.rating||4.5),1)]),(ee.trongLuong||ee.stock||0)===0||ee.inStock===!1?(x(),P("div",Mh," Hết hàng ")):pe("",!0)])]),i("div",Hh,[i("button",{class:"btn btn-sm btn-primary quick-add-btn",onClick:je(se=>ie(ee.maSP||ee.id),["stop"]),disabled:(ee.trongLuong||ee.stock||0)===0||ee.inStock===!1,title:"Thêm vào giỏ hàng"},J[15]||(J[15]=[i("i",{class:"fas fa-cart-plus"},null,-1)]),8,Uh)])],10,Eh))),128))])])):pe("",!0),T.value.length>0?(x(),P("div",Bh,[J[16]||(J[16]=i("h6",{class:"section-title"},[i("i",{class:"fas fa-layer-group text-success me-2"}),q("Danh mục ")],-1)),i("div",Kh,[(x(!0),P(be,null,Le(T.value,ee=>(x(),P("button",{key:ee.maLoaiSP||ee.id,class:"category-item",onClick:D=>F(ee)},[i("i",{class:ke(`${ee.icon} text-${ee.color} me-2`)},null,2),q(" "+z(ee.name)+" ",1),i("span",Fh,"("+z(ee.productCount)+")",1)],8,jh))),128))])])):pe("",!0)])),J[17]||(J[17]=i("div",{class:"search-footer"},[i("div",{class:"search-tips"},[i("small",{class:"text-muted"},[i("i",{class:"fas fa-keyboard me-1"}),q(" Enter để tìm kiếm, ↑↓ để điều hướng, Esc để đóng ")])])],-1))],32)):pe("",!0)]),_:1}),a.value&&v.value?(x(),P("div",{key:0,class:"search-overlay",onClick:V})):pe("",!0)]))}},Vh=st(Gh,[["__scopeId","data-v-867b3fb9"]]);class dt{static async createOrderFromCart(t){try{console.log("🚀 OrderService.createOrderFromCart - Starting invoice creation..."),console.log("📋 Order data received:",JSON.stringify(t,null,2));const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");console.log("🔑 JWT token found:",n.substring(0,20)+"...");const s=`${ae.BASE_URL}${ye.HOADON.CREATE_FROM_CART}`;if(console.log("🌐 Calling API:",s),console.log("📤 Request payload:"),console.log("   - maKH:",t.maKH),console.log("   - maNV:",t.maNV||"N/A"),console.log("   - ghiChu:",t.ghiChu||"N/A"),console.log("   - selectedCartItemIds:",t.selectedCartItemIds),console.log("   - trangThai:",t.trangThai||0),!t.selectedCartItemIds||t.selectedCartItemIds.length===0)throw new Error("Phải chọn ít nhất một item từ giỏ hàng để tạo hóa đơn");console.log("📤 Creating invoice with selectedCartItemIds:"),console.log("   - selectedCartItemIds:",t.selectedCartItemIds),console.log("   - selectedCartItemIds count:",t.selectedCartItemIds?.length||0);const o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(t)});if(console.log("📡 API Response status:",o.status),console.log("📡 API Response ok:",o.ok),console.log("📡 API Response headers:",Object.fromEntries(o.headers.entries())),!o.ok){const a=await o.json().catch(()=>null);console.error("❌ API Error response:",a);let l="Tạo hóa đơn thất bại";throw a?.message?l=a.message:a?.error?l=a.error:o.statusText&&(l+=`: ${o.statusText}`),new Error(l)}const r=await o.json();if(console.log("✅ Invoice creation successful!"),console.log("📦 Full API Response data:",JSON.stringify(r,null,2)),r.success||(console.warn("⚠️ Response success = false, but HTTP status is OK"),console.warn("   - Message:",r.message||"N/A"),console.warn("   - Error:",r.error||"N/A")),console.log(`
📋 === INVOICE DETAILS (HOADON) ===`),r.result?(console.log("✅ Invoice result object found in response"),console.log(`   - Mã hóa đơn: ${r.result.maHD||"N/A"}`),console.log(`   - Mã khách hàng: ${r.result.maKH||"N/A"}`),console.log(`   - Mã nhân viên: ${r.result.maNV||"N/A"}`),console.log(`   - Mã khuyến mãi: ${r.result.maKM||"N/A"}`),console.log(`   - Ngày lập: ${r.result.ngayLap||"N/A"}`),console.log(`   - Tổng tiền hàng: ${r.result.tongTienHang||"N/A"}`),console.log(`   - Tiền giảm giá: ${r.result.tienGiamGia||"N/A"}`),console.log(`   - Tổng tiền: ${r.result.tongTien||"N/A"}`),console.log(`   - Trạng thái: ${r.result.trangThai||"N/A"}`),console.log(`   - Điểm tích lũy: ${r.result.diemTichLuy||"N/A"}`),console.log(`   - Ghi chú: ${r.result.ghiChu||"N/A"}`)):console.log("❌ Invoice result object missing from response"),console.log(`
📦 === INVOICE ITEMS (CHITIETHOADON) ===`),r.result&&r.result.items){console.log(`✅ Chi tiết hóa đơn found: ${r.result.items.length} items`),r.result.items.forEach((d,u)=>{console.log(`
   📋 Item ${u+1}:`),console.log(`      - Mã sản phẩm: ${d.maSP||"N/A"}`),console.log(`      - Tên sản phẩm: ${d.tenSP||"N/A"}`),console.log(`      - Số lượng: ${d.soLuong||"N/A"}`),console.log(`      - Đơn giá bán: ${d.donGiaBan||d.donGia||"N/A"}`),console.log(`      - Thành tiền: ${d.thanhTien||"N/A"}`),console.log(`      - Giảm giá: ${d.giamGia||"N/A"}`),console.log(`      - Thành tiền sau giảm: ${d.thanhTienSauGiam||"N/A"}`)});const a=r.result.items.length,l=r.result.items.reduce((d,u)=>d+(u.soLuong||0),0),c=r.result.items.reduce((d,u)=>d+(u.thanhTien||0),0);console.log(`
📊 === SUMMARY ===`),console.log(`   - Tổng số sản phẩm: ${a}`),console.log(`   - Tổng số lượng: ${l}`),console.log(`   - Tổng thành tiền: ${c}`),console.log(`   - Tổng tiền hóa đơn: ${r.result.tongTien||"N/A"}`)}else console.log("❌ Chi tiết hóa đơn missing or empty"),r.result&&(console.log("   - Invoice result exists but no items"),console.log("   - Result keys:",Object.keys(r.result)));return console.log(`
🔍 === RESPONSE STRUCTURE ===`),console.log("   - Response keys:",Object.keys(r)),console.log("   - success:",r.success),console.log("   - message:",r.message||"N/A"),console.log("   - error:",r.error||"N/A"),console.log("   - result exists:",!!r.result),console.log("   - items exists:",!!(r.result&&r.result.items)),r}catch(n){throw console.error("💥 Error creating invoice from cart:",n),console.error("   - Error name:",n.name),console.error("   - Error message:",n.message),console.error("   - Error stack:",n.stack),n}}static async getOrdersByCustomer(t){try{const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const s=new Date().getTime(),o=`${ae.BASE_URL}${ye.HOADON.BY_CUSTOMER(t)}?_t=${s}`,r=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(!r.ok)throw new Error(`Lấy hóa đơn thất bại: ${r.statusText}`);return await r.json()}catch(n){throw console.error(`Error getting invoices for customer ${t}:`,n),n}}static async getOrdersByCustomerFullDetails(t){try{console.log("🚀 Getting orders with full details for customer:",t);const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const s=new Date().getTime(),o=`${ae.BASE_URL}${ye.HOADON.BY_CUSTOMER_FULL(t)}?_t=${s}`,r=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(console.log("📡 Full details API response status:",r.status),!r.ok)throw new Error(`Lấy hóa đơn chi tiết thất bại: ${r.statusText}`);const a=await r.json();if(console.log("✅ Orders with full details received:",a),console.log("🔍 Result structure:"),console.log("   - success:",a.success),console.log("   - result is array:",Array.isArray(a.result)),console.log("   - result length:",a.result?.length),a.result&&Array.isArray(a.result)&&a.result.length>0){const l=a.result[0];console.log("📦 First order structure:"),console.log("   - Keys:",Object.keys(l)),console.log("   - Has chiTietHoaDon:",!!l.chiTietHoaDon),console.log("   - ChiTietHoaDon length:",l.chiTietHoaDon?.length)}return a}catch(n){throw console.error(`Error getting full details for customer ${t}:`,n),n}}static async getOrderById(t){try{const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const s=await fetch(`${ae.BASE_URL}${ye.HOADON.BY_ID(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!s.ok)throw new Error(`Lấy hóa đơn thất bại: ${s.statusText}`);return await s.json()}catch(n){throw console.error(`Error getting invoice ${t}:`,n),n}}static async getOrderDetails(t){try{console.log("🔍 Getting order details for maHD:",t);const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");let s=await fetch(`${ae.BASE_URL}${ye.CHITIETHOADON.BY_HOADON(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(console.log("📡 Order details API response status:",s.status),!s.ok){console.log("⚠️ New API failed, trying fallback methods...");try{if(s=await fetch(`${ae.BASE_URL}${ye.HOADON.BY_ID_FULL(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}),console.log("📡 Full details fallback API response status:",s.status),s.ok){const r=await s.json();if(console.log("✅ Full invoice data received:",r),r&&r.success&&r.result){const a=r.result;if(a.chiTietHoaDon&&Array.isArray(a.chiTietHoaDon))return console.log(`📦 Found ${a.chiTietHoaDon.length} items in full invoice`),{success:!0,result:a.chiTietHoaDon,message:"Chi tiết từ hóa đơn full details"}}}}catch(r){console.warn("⚠️ Fallback API also failed:",r.message)}try{if(s=await fetch(`${ae.BASE_URL}${ye.CHITIETHOADON.BY_HOADON_OLD(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}),console.log("📡 Old API fallback response status:",s.status),!s.ok)throw new Error(`Tất cả API endpoints đều thất bại: ${s.statusText}`)}catch(r){throw new Error(`Không thể lấy chi tiết hóa đơn: ${r.message}`)}}const o=await s.json();return console.log("✅ Order details received:",o),console.log("🔍 Result structure:"),console.log("   - success:",o.success),console.log("   - result:",o.result),console.log("   - result is array:",Array.isArray(o.result)),console.log("   - result length:",o.result?.length),o.result&&Array.isArray(o.result)&&o.result.length>0&&console.log("📦 First item in result:",o.result[0]),o}catch(n){throw console.error(`Error getting order details for ${t}:`,n),n}}static async updateOrderStatus(t,n){try{const s=Se();if(!s)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const o=await fetch(`${ae.BASE_URL}${ye.HOADON.UPDATE_STATUS(t)}?trangThaiMoi=${encodeURIComponent(n)}`,{method:"PATCH",headers:{Authorization:`Bearer ${s}`}});if(!o.ok)throw new Error(`Cập nhật trạng thái hóa đơn thất bại: ${o.statusText}`);return await o.json()}catch(s){throw console.error(`Error updating invoice ${t} status:`,s),s}}static async cancelOrder(t,n="Khách hàng yêu cầu hủy"){try{console.log("❌ Cancelling order:",t,"with reason:",n);const s=Se();if(!s)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const o=`${ae.BASE_URL}${ye.HOADON.CANCEL(t)}?lyDoHuy=${encodeURIComponent(n)}`;console.log("🌐 Cancel API URL:",o);const r=await fetch(o,{method:"PATCH",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(console.log("📡 Cancel API response status:",r.status),!r.ok){let l=r.statusText||"Unknown error";try{const c=await r.json();console.log("📋 Error response data:",c),c?.message?l=c.message:c?.error?l=c.error:c?.details?l=c.details:typeof c=="string"?l=c:l=JSON.stringify(c)}catch(c){console.warn("⚠️ Could not parse error response as JSON:",c);try{const d=await r.text();console.log("📋 Error response text:",d),d&&(l=d)}catch(d){console.warn("⚠️ Could not get error response text:",d)}}throw console.log("❌ Final error message:",l),new Error(`Hủy hóa đơn thất bại: ${l}`)}const a=await r.json();return console.log("✅ Order cancelled successfully:",a),a}catch(s){throw console.error(`Error cancelling invoice ${t}:`,s),s}}static async getCustomerStatistics(t){try{console.log("📈 Getting customer statistics for:",t);const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const s=await fetch(`${ae.BASE_URL}${ye.HOADON.STATISTICS(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(console.log("📡 Statistics API response status:",s.status),!s.ok)throw new Error(`Lấy thống kê thất bại: ${s.statusText}`);const o=await s.json();return console.log("✅ Customer statistics received:",o),o}catch(n){throw console.error(`Error getting customer statistics for ${t}:`,n),n}}static async getCustomerStatusCounts(t){try{console.log("📊 Getting status counts for customer:",t);const n=Se();if(!n)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const s=await fetch(`${ae.BASE_URL}${ye.HOADON.COUNT_BY_STATUS_CUSTOMER(t)}`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(console.log("📡 Status counts API response status:",s.status),!s.ok)throw new Error(`Lấy thống kê trạng thái thất bại: ${s.statusText}`);const o=await s.json();return console.log("✅ Status counts received:",o),o}catch(n){throw console.error(`Error getting status counts for ${t}:`,n),n}}static async getOrdersByCustomerAndStatus(t,n){try{console.log("🔍 Getting orders by customer and status:",t,n);const s=Se();if(!s)throw new Error("Không có token xác thực. Vui lòng đăng nhập lại.");const o=await fetch(`${ae.BASE_URL}${ye.HOADON.BY_CUSTOMER_AND_STATUS(t,n)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(console.log("📡 Orders by status API response status:",o.status),!o.ok)throw new Error(`Lấy hóa đơn theo trạng thái thất bại: ${o.statusText}`);const r=await o.json();return console.log("✅ Orders by status received:",r),r}catch(s){throw console.error(`Error getting orders by customer ${t} and status ${n}:`,s),s}}}function pl(){const e=Q([]),t=Q(null),n=Q(!1),s=Q(null),o=async b=>{try{console.log("🎯 useOrders.createOrderFromCart - Starting..."),console.log("📋 Order data:",JSON.stringify(b,null,2)),n.value=!0,s.value=null,console.log("📞 Calling OrderService.createOrderFromCart...");const T=await dt.createOrderFromCart(b);return console.log("📦 Service result received:",JSON.stringify(T,null,2)),T.success&&T.result?(console.log("✅ Invoice created successfully, updating local state..."),console.log(`   - Invoice ID: ${T.result.maHD||T.result.id}`),console.log(`   - Customer: ${T.result.maKH}`),console.log(`   - Status: ${T.result.trangThai}`),e.value.unshift(T.result),t.value=T.result,console.log("📊 Local state updated:"),console.log(`   - Total invoices: ${e.value.length}`),console.log(`   - Current invoice set: ${t.value?"Yes":"No"}`)):(console.log("⚠️ Invoice creation result missing success or result data"),console.log("   - success:",T.success),console.log("   - result:",T.result?"Present":"Missing")),T}catch(T){throw console.error("💥 Error in useOrders.createOrderFromCart:",T),s.value=T.message,console.error("Error creating order from cart:",T),T}finally{n.value=!1,console.log("🏁 createOrderFromCart completed, loading set to false")}},r=async b=>{try{n.value=!0,s.value=null,console.log("🔄 Loading orders with full details for customer:",b);let T,v=!0;try{T=await dt.getOrdersByCustomerFullDetails(b),console.log("✅ Successfully used full-details API")}catch(C){console.warn("⚠️ Full-details API failed, falling back to basic API:",C.message),v=!1,T=await dt.getOrdersByCustomer(b)}let $=[];if(T&&T.success&&Array.isArray(T.result)?($=T.result,console.log(`✅ Got customer invoices from response.result: ${$.length} orders`)):Array.isArray(T)?($=T,console.log(`✅ Got customer invoices from direct array: ${$.length} orders`)):(console.warn("⚠️ Unexpected response format:",T),$=[]),$.length>0){const C=$[0];console.log("🔍 First invoice structure:"),console.log("   - Keys:",Object.keys(C)),console.log("   - Has chiTietHoaDon:",!!C.chiTietHoaDon),console.log("   - Has chiTietList:",!!C.chiTietList),console.log("   - ChiTietHoaDon length:",C.chiTietHoaDon?.length),console.log("   - ChiTietList length:",C.chiTietList?.length),C.chiTietHoaDon&&C.chiTietHoaDon.length>0?console.log("📦 First item in chiTietHoaDon:",C.chiTietHoaDon[0]):C.chiTietList&&C.chiTietList.length>0&&console.log("📦 First item in chiTietList:",C.chiTietList[0])}let R=[];if(v)console.log("✅ Using full-details API - orders already have complete details"),R=$.map(C=>{const V={...C};return C.chiTietList&&!C.chiTietHoaDon&&(console.log(`🔧 Normalizing order ${C.maHD}: chiTietList → chiTietHoaDon`),V.chiTietHoaDon=C.chiTietList,console.log(`   - Converted ${C.chiTietList.length} items`)),V});else{console.log(`🔄 Using basic API - loading details for ${$.length} orders...`);const C=3;for(let V=0;V<$.length;V+=C){const I=$.slice(V,V+C),j=await Promise.all(I.map(async N=>{try{if(console.log(`🔍 Loading details for order ${N.maHD}`),N.chiTietHoaDon&&Array.isArray(N.chiTietHoaDon)&&N.chiTietHoaDon.length>0)return console.log(`✅ Order ${N.maHD} already has ${N.chiTietHoaDon.length} items in chiTietHoaDon`),N;if(N.chiTietList&&Array.isArray(N.chiTietList)&&N.chiTietList.length>0)return console.log(`✅ Order ${N.maHD} has ${N.chiTietList.length} items in chiTietList, normalizing...`),{...N,chiTietHoaDon:N.chiTietList};const w=await dt.getOrderDetails(N.maHD);let S=[];if(w&&w.success&&Array.isArray(w.result))S=w.result;else if(Array.isArray(w))S=w;else if(w&&w.result){const E=w.result;E.items&&Array.isArray(E.items)?S=E.items:E.chiTietHoaDon&&Array.isArray(E.chiTietHoaDon)?S=E.chiTietHoaDon:(console.warn(`⚠️ Unexpected details format for order ${N.maHD}:`,w),S=[])}else console.warn(`⚠️ Unexpected details format for order ${N.maHD}:`,w),S=[];return console.log(`✅ Loaded ${S.length} items for order ${N.maHD}`),{...N,chiTietHoaDon:S}}catch(w){return console.error(`❌ Error loading details for order ${N.maHD}:`,w),{...N,chiTietHoaDon:N.chiTietHoaDon||[]}}}));R.push(...j),console.log(`📦 Batch ${Math.floor(V/C)+1} completed: ${j.length} orders`)}}if(e.value=R,console.log("✅ All orders processed, final count:",e.value.length),e.value.length>0){const C=e.value.reduce((V,I)=>{const j=I.chiTietHoaDon?.length||I.chiTietList?.length||0;return V+j},0);console.log(`📊 Final summary: ${e.value.length} orders with ${C} total items`),e.value.forEach(V=>{const I=V.chiTietHoaDon?.length||V.chiTietList?.length||0;console.log(`   - Order ${V.maHD}: ${I} items, Status: ${V.trangThai} (${typeof V.trangThai})`)})}return R}catch(T){return s.value=T.message,console.error("Error loading customer invoices:",T),[]}finally{n.value=!1}},a=async b=>{try{n.value=!0,s.value=null;const T=await dt.getOrderById(b);return t.value=T,T}catch(T){return s.value=T.message,console.error("Error loading invoice by ID:",T),null}finally{n.value=!1}},l=async(b,T)=>{try{n.value=!0,s.value=null;const v=await dt.updateOrderStatus(b,T),$=e.value.findIndex(R=>R.id===b||R.maHD===b);return $!==-1&&(e.value[$].trangThai=T),t.value&&(t.value.id===b||t.value.maHD===b)&&(t.value.trangThai=T),v}catch(v){throw s.value=v.message,console.error("Error updating invoice status:",v),v}finally{n.value=!1}},c=b=>{e.value=e.value.filter(T=>T.id!==b&&T.maHD!==b),t.value&&(t.value.id===b||t.value.maHD===b)&&(t.value=null)},d=()=>{e.value=[],t.value=null},u=b=>e.value.find(T=>T.id===b||T.maHD===b)||null,f=b=>e.value.filter(T=>T.trangThai===b),h=async b=>{try{return n.value=!0,s.value=null,await dt.getOrderDetails(b)}catch(T){return s.value=T.message,console.error("Error loading order details:",T),null}finally{n.value=!1}},m=b=>!b||!b.items?0:b.items.reduce((T,v)=>{const $=v.donGia||v.giaBan||v.gia||0,R=v.soLuong||0;return T+$*R},0),_=async(b,T)=>{try{n.value=!0,s.value=null;const v=await dt.cancelOrder(b,T),$=e.value.findIndex(R=>R.id===b||R.maHD===b);return $!==-1&&(e.value[$].trangThai=3),t.value&&(t.value.id===b||t.value.maHD===b)&&(t.value.trangThai=3),v}catch(v){throw s.value=v.message,console.error("Error cancelling order:",v),v}finally{n.value=!1}},y=async b=>{try{return n.value=!0,s.value=null,await dt.getCustomerStatistics(b)}catch(T){return s.value=T.message,console.error("Error loading customer statistics:",T),null}finally{n.value=!1}},U=async b=>{try{return n.value=!0,s.value=null,await dt.getCustomerStatusCounts(b)}catch(T){return s.value=T.message,console.error("Error loading customer status counts:",T),null}finally{n.value=!1}},L=async(b,T)=>{try{n.value=!0,s.value=null;const v=await dt.getOrdersByCustomerAndStatus(b,T);let $=[];return v&&v.success&&Array.isArray(v.result)?$=v.result:Array.isArray(v)?$=v:(console.warn("⚠️ Unexpected response format:",v),$=[]),$}catch(v){return s.value=v.message,console.error("Error loading orders by status:",v),[]}finally{n.value=!1}};return{orders:Z(()=>e.value),currentOrder:Z(()=>t.value),loading:Z(()=>n.value),error:Z(()=>s.value),createOrderFromCart:o,loadCustomerOrders:r,loadOrderById:a,loadOrderDetails:h,updateOrderStatus:l,removeOrderFromList:c,clearOrders:d,findOrderById:u,filterOrdersByStatus:f,calculateOrderTotal:m,cancelOrder:_,loadCustomerStatistics:y,loadCustomerStatusCounts:U,loadOrdersByStatus:L}}const zh={class:"cart-dropdown"},Yh={class:"nav-link px-3 py-2 rounded-pill position-relative cart-icon-wrapper"},qh={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger cart-count",style:{"font-size":"0.7rem"}},Wh={class:"card shadow-lg border-0",style:{width:"350px"}},Qh={class:"card-header bg-primary text-white d-flex justify-content-between align-items-center"},Jh={class:"mb-0"},Xh={class:"d-flex align-items-center"},Zh={class:"form-check me-3"},eg=["checked"],tg={class:"card-body p-0",style:{"max-height":"400px","overflow-y":"auto"}},ng={key:0,class:"text-center p-4"},sg={key:1},og={class:"form-check me-2"},rg=["checked","onChange","id"],ag={class:"flex-shrink-0 me-3"},ig=["src","alt"],lg={class:"flex-grow-1"},cg={class:"mb-1 text-truncate",style:{"max-width":"180px"}},ug={class:"d-flex justify-content-between align-items-center"},dg={class:"text-primary fw-bold"},fg={class:"quantity-controls d-flex align-items-center"},hg=["onClick","disabled"],gg={class:"mx-2 fw-bold"},mg=["onClick"],pg={class:"d-flex justify-content-between align-items-center mt-1"},vg={class:"text-muted"},yg=["onClick"],bg={key:0,class:"card-footer bg-light"},Tg={class:"d-flex justify-content-between align-items-center mb-2"},wg={class:"text-muted"},_g={class:"text-primary"},Cg={class:"d-grid gap-1"},Sg=["disabled"],kg={__name:"CartDropdown",setup(e){const t=en(),{cart:n,cartCount:s,removeFromCart:o,updateCartQuantity:r,reloadCartFromBackend:a,getBackendCartSnapshot:l}=Xs(),{createOrderFromCart:c}=pl(),{products:d,formatPrice:u,showNotification:f}=xn(),h=Q(!1),m=Q(new Set);let _=null;const y=Z(()=>n.value.map(w=>{const S=d.value.find(E=>E.id===w.productId);return{...w,product:S||w.product}}).filter(w=>w.product));Z(()=>y.value.reduce((w,S)=>w+(S.product?.price||0)*S.quantity,0));const U=Z(()=>y.value.filter(w=>m.value.has(w.productId))),L=Z(()=>U.value.reduce((w,S)=>w+(S.product?.price||0)*S.quantity,0)),b=()=>{h.value=!0,y.value.length>0&&(m.value.clear(),y.value.forEach(w=>{const S=w.productId||w.maSP;m.value.add(S),console.log(`🔄 [CartDropdown] Auto-selected item: ${S}`,w)}),console.log("🔄 [CartDropdown] Auto-selected all cart items:",m.value.size),console.log("🔄 [CartDropdown] Selected productIds:",Array.from(m.value)))},T=Z(()=>y.value.length>0&&y.value.every(w=>m.value.has(w.productId))),v=()=>{h.value?h.value=!1:b()},$=()=>{_&&clearTimeout(_),_=setTimeout(()=>{h.value=!1},200)},R=()=>{_&&(clearTimeout(_),_=null),h.value?h.value=!0:b()},C=(w,S)=>{S<=0?V(w):r(w,S)},V=w=>{const S=y.value.find(E=>E.productId===w);S&&(o(w),f(`Đã xóa ${S.product.name} khỏi giỏ hàng!`,"info"))},I=async()=>{try{if(m.value.size===0){f("Vui lòng chọn sản phẩm để thanh toán!","warning");return}const w=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!w){const Te=Array.from(m.value);localStorage.setItem("easymart-selected-items",JSON.stringify(Te)),localStorage.setItem("easymart-redirect-after-login","/checkout"),f("Vui lòng đăng nhập để tiến hành thanh toán!","warning"),h.value=!1,t.push("/login");return}h.value=!1,console.log("🧩 [CartDropdown] Loading cart data before checkout..."),await a();const S=n.value;if(console.log("🔍 [CartDropdown] Backend cart items:",S),console.log("🔍 [CartDropdown] Selected items:",Array.from(m.value)),!S||!Array.isArray(S)||S.length===0){f("Giỏ hàng trống. Vui lòng thêm sản phẩm trước khi thanh toán!","warning");return}const E=[],ue=Array.from(m.value);if(console.log("🔍 [CartDropdown] Backend cart structure:",S.map(Te=>({id:Te.id,productId:Te.productId,maSP:Te.maSP,keys:Object.keys(Te)}))),ue.forEach(Te=>{const le=S.find(A=>A.productId===Te||A.maSP===Te);if(console.log(`🔍 [CartDropdown] Looking for productId=${Te}, found:`,le),le){const A=le.itemId||le.id||le.maGH||le.cartId;A?(E.push(String(A)),console.log(`✅ [CartDropdown] Added cart item ID: ${A}`)):console.warn("⚠️ [CartDropdown] Cart item found but no ID field:",Object.keys(le))}else console.warn(`⚠️ [CartDropdown] No cart item found for productId: ${Te}`)}),console.log("🔍 [CartDropdown] Selected cart item IDs:",E),E.length===0){console.error("❌ [CartDropdown] No selected cart item IDs found"),f("Không tìm thấy sản phẩm đã chọn trong giỏ hàng!","error");return}console.log("✅ [CartDropdown] Validation passed, proceeding with order creation..."),console.log("🔍 [CartDropdown] User object:",w),console.log("🔍 [CartDropdown] Getting cart snapshot for maKH...");const F=await l();console.log("🔍 [CartDropdown] Cart snapshot:",F);const ie=F.maKH||w?.maKH||w?.id||w?.maNguoiDung||localStorage.getItem("easymart-user-id");if(console.log("🔍 [CartDropdown] Resolved maKH:",ie),console.log("🔍 [CartDropdown] cartSnapshot.maKH:",F.maKH),console.log("🔍 [CartDropdown] user.maKH:",w?.maKH),console.log("🔍 [CartDropdown] user.id:",w?.id),!ie){console.error("❌ [CartDropdown] No customer ID found"),f("Không tìm thấy thông tin khách hàng. Vui lòng đăng nhập lại!","error");return}const re=w?.maNV||"NV001",oe={maKH:ie,maNV:re,ghiChu:"Đặt hàng từ CartDropdown",selectedCartItemIds:E,trangThai:0};console.log("🚀 [CartDropdown] Creating order with payload:",oe),console.log("🚀 [CartDropdown] Order payload details:"),console.log("   - maKH:",oe.maKH),console.log("   - maNV:",oe.maNV),console.log("   - selectedCartItemIds:",oe.selectedCartItemIds),console.log("   - selectedCartItemIds length:",oe.selectedCartItemIds.length),f("Đang tạo hóa đơn từ giỏ...","info"),console.log("🚀 [CartDropdown] Calling createOrderFromCart with payload:",oe);const Ee=await c(oe);if(console.log("✅ [CartDropdown] createOrderFromCart result:",Ee),console.log("✅ [CartDropdown] Result success:",Ee?.success),console.log("✅ [CartDropdown] Result message:",Ee?.message),Ee?.success){f("Tạo hóa đơn thành công!","success");const Te={maHD:Ee.result?.maHD,maKH:Ee.result?.maKH,items:Ee.result?.items||[],tongTien:Ee.result?.tongTien,ngayLap:Ee.result?.ngayLap,trangThai:Ee.result?.trangThai};localStorage.setItem("easymart-invoice",JSON.stringify(Te)),localStorage.setItem("easymart-selected-items",JSON.stringify(E));try{await a(),console.log("✅ [CartDropdown] Cart reloaded after order creation")}catch(le){console.warn("⚠️ [CartDropdown] Failed to reload cart:",le)}console.log("🔄 [CartDropdown] Navigating to checkout in 1 second..."),setTimeout(()=>{console.log('🔄 [CartDropdown] Executing router.push("/checkout")'),t.push("/checkout").then(()=>{console.log("✅ [CartDropdown] Successfully navigated to /checkout")}).catch(le=>{console.error("❌ [CartDropdown] Navigation failed:",le)})},1e3)}else console.error("❌ [CartDropdown] Order creation failed:",Ee),f(Ee?.message||"Không thể tạo hóa đơn","error")}catch(w){console.error("❌ [CartDropdown] Checkout failed:",w),console.error("❌ [CartDropdown] Error stack:",w.stack),f(w?.message||"Thanh toán thất bại","error")}},j=w=>{m.value.has(w)?m.value.delete(w):m.value.add(w)},N=()=>{T.value?m.value.clear():y.value.forEach(w=>{m.value.add(w.productId)})};return Zt(()=>{_&&clearTimeout(_)}),(w,S)=>{const E=$n("router-link");return x(),P("div",zh,[i("div",{class:"cart-trigger position-relative",onClick:v,onMouseenter:R,onMouseleave:$},[i("div",Yh,[S[2]||(S[2]=i("i",{class:"fas fa-shopping-bag fs-5"},null,-1)),i("span",qh,z(K(s)),1)]),S[3]||(S[3]=i("i",{class:"fas fa-chevron-down ms-1 text-muted",style:{"font-size":"0.7rem"}},null,-1))],32),ht(i("div",{class:"cart-dropdown-content position-absolute",onMouseenter:R,onMouseleave:$},[i("div",Wh,[i("div",Qh,[i("h6",Jh,[S[4]||(S[4]=i("i",{class:"fas fa-shopping-cart me-2"},null,-1)),q("Giỏ hàng ("+z(K(s))+") ",1)]),i("div",Xh,[i("div",Zh,[i("input",{class:"form-check-input",type:"checkbox",checked:T.value,onChange:N,id:"selectAllDropdown"},null,40,eg),S[5]||(S[5]=i("label",{class:"form-check-label text-white small",for:"selectAllDropdown"}," Tất cả ",-1))]),i("button",{class:"btn btn-sm btn-outline-light",onClick:S[0]||(S[0]=ue=>h.value=!1)},S[6]||(S[6]=[i("i",{class:"fas fa-times"},null,-1)]))])]),i("div",tg,[y.value.length===0?(x(),P("div",ng,S[7]||(S[7]=[i("i",{class:"fas fa-shopping-cart text-muted fs-1 mb-3"},null,-1),i("p",{class:"text-muted mb-0"},"Giỏ hàng trống",-1),i("small",{class:"text-muted"},"Thêm sản phẩm để bắt đầu mua sắm",-1)]))):(x(),P("div",sg,[(x(!0),P(be,null,Le(y.value,ue=>(x(),P("div",{key:ue.productId,class:"cart-item d-flex align-items-center p-3 border-bottom"},[i("div",og,[i("input",{class:"form-check-input",type:"checkbox",checked:m.value.has(ue.productId),onChange:F=>j(ue.productId),id:`dropdown-item-${ue.productId}`},null,40,rg)]),i("div",ag,[i("img",{src:ue.product?.image||"https://via.placeholder.com/60",alt:ue.product?.name||"Product",class:"rounded",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,ig)]),i("div",lg,[i("h6",cg,z(ue.product?.name||"Sản phẩm"),1),i("div",ug,[i("span",dg,z(K(u)(ue.product?.price||0)),1),i("div",fg,[i("button",{class:"btn btn-sm btn-outline-secondary",onClick:F=>C(ue.productId,ue.quantity-1),disabled:ue.quantity<=1},S[8]||(S[8]=[i("i",{class:"fas fa-minus"},null,-1)]),8,hg),i("span",gg,z(ue.quantity),1),i("button",{class:"btn btn-sm btn-outline-secondary",onClick:F=>C(ue.productId,ue.quantity+1)},S[9]||(S[9]=[i("i",{class:"fas fa-plus"},null,-1)]),8,mg)])]),i("div",pg,[i("small",vg," Tổng: "+z(K(u)((ue.product?.price||0)*ue.quantity)),1),i("button",{class:"btn btn-sm btn-outline-danger",onClick:F=>V(ue.productId)},S[10]||(S[10]=[i("i",{class:"fas fa-trash"},null,-1)]),8,yg)])])]))),128))]))]),y.value.length>0?(x(),P("div",bg,[i("div",Tg,[i("small",wg,"Đã chọn: "+z(m.value.size)+"/"+z(y.value.length)+" sản phẩm",1),i("strong",_g,z(K(u)(L.value)),1)]),i("div",Cg,[ge(E,{to:"/cart",class:"btn btn-outline-primary w-100 py-2",onClick:S[1]||(S[1]=ue=>h.value=!1)},{default:Ne(()=>S[11]||(S[11]=[i("i",{class:"fas fa-shopping-cart me-2"},null,-1),q("Xem giỏ hàng ")])),_:1,__:[11]}),i("button",{class:"btn btn-primary w-100 py-2",onClick:I,disabled:m.value.size===0},[S[12]||(S[12]=i("i",{class:"fas fa-credit-card me-2"},null,-1)),q("Thanh toán ("+z(m.value.size)+") ",1)],8,Sg)])])):pe("",!0)])],544),[[es,h.value]])])}}},Eg=st(kg,[["__scopeId","data-v-b00133c7"]]),Ag={class:"navbar navbar-expand-lg navbar-light main-nav shadow-sm py-3"},Ig={class:"container"},$g={class:"flex-grow-1 mx-4"},xg={class:"collapse navbar-collapse",id:"navbarNav"},Rg={class:"navbar-nav ms-auto align-items-center"},Pg=["aria-expanded"],Og={class:"nav-item"},Dg={class:"dropdown-item-text text-center mb-2"},Lg={class:"fw-bold"},Ng={class:"small text-muted"},Mg={__name:"Header",props:{categories:{type:Array,required:!0},searchQuery:{type:String,required:!0}},emits:["update-search","add-to-cart"],setup(e,{emit:t}){const{user:n,isLoggedIn:s,logout:o}=os(),r=en(),a=Q(!1),l=Q(!1),c=Q(!1),d=Q(!0),u=Q(0),f=Q("up"),h=Q(null),m=Q(null),_=()=>{h.value&&(clearTimeout(h.value),h.value=null),a.value=!0,l.value=!1,Wn(()=>{const N=document.getElementById("category-trigger"),w=document.querySelector(".category-dropdown");if(N&&w){const S=N.getBoundingClientRect();w.style.top=`${S.bottom+8}px`,w.style.left=`${S.left}px`,w.style.right="auto"}})},y=()=>{h.value=setTimeout(()=>{a.value=!1},200)},U=()=>{h.value&&(clearTimeout(h.value),h.value=null)},L=()=>{m.value&&(clearTimeout(m.value),m.value=null),l.value=!0,a.value=!1,Wn(()=>{const N=document.getElementById("account-trigger"),w=document.querySelector(".account-dropdown");if(N&&w){const S=N.getBoundingClientRect();w.style.top=`${S.bottom+8}px`,w.style.left=`${S.left}px`,w.style.right="auto"}})},b=()=>{m.value=setTimeout(()=>{l.value=!1},200)},T=()=>{m.value&&(clearTimeout(m.value),m.value=null)},v=N=>{!N.target.closest(".dropdown")&&!N.target.closest(".cart-dropdown")&&(a.value=!1,l.value=!1)},$=()=>{const N=window.scrollY;c.value=N>50,N>u.value?f.value="down":f.value="up",N<10?d.value=!0:f.value==="down"&&N>100?(d.value=!1,a.value=!1,l.value=!1):f.value==="up"&&(d.value=!0),R(),u.value=N},R=()=>{if(a.value){const N=document.getElementById("category-trigger"),w=document.querySelector(".category-dropdown");if(N&&w){const S=N.getBoundingClientRect();w.style.top=`${S.bottom+8}px`,w.style.left=`${S.left}px`,w.style.right="auto"}}if(l.value){const N=document.getElementById("account-trigger"),w=document.querySelector(".account-dropdown");if(N&&w){const S=N.getBoundingClientRect();w.style.top=`${S.bottom+8}px`,w.style.left=`${S.left}px`,w.style.right="auto"}}},C=()=>{R()};let V=null;const I=()=>{V===null&&(V=setTimeout(()=>{$(),V=null},10))},j=async()=>{try{const N=await o();l.value=!1,N.success||console.warn("Logout warning:",N.error),r.push("/")}catch(N){console.error("Logout error:",N),r.push("/")}};return vt(()=>{document.addEventListener("click",v),window.addEventListener("scroll",I,{passive:!0}),window.addEventListener("resize",C,{passive:!0});const N=()=>{};window.addEventListener("user-updated",N),$()}),Zt(()=>{document.removeEventListener("click",v),window.removeEventListener("scroll",I),window.removeEventListener("resize",C),window.removeEventListener("user-updated",handleUserUpdated),h.value&&clearTimeout(h.value),m.value&&clearTimeout(m.value),V!==null&&(clearTimeout(V),V=null)}),(N,w)=>{const S=$n("router-link");return x(),P(be,null,[i("header",{class:ke(["header-container fixed-top",{"header-scrolled":c.value,"header-visible":d.value,"header-hidden":!d.value}])},[i("div",{class:ke(["top-bar py-2 border-bottom",{"top-bar-hidden":!d.value}])},w[4]||(w[4]=[Nt('<div class="container" data-v-99b98360><div class="row align-items-center" data-v-99b98360><div class="col-md-6" data-v-99b98360><small class="text-muted" data-v-99b98360><i class="fas fa-phone-alt text-primary me-2" data-v-99b98360></i>Hotline: 1900 1234 | <i class="fas fa-envelope text-primary ms-3 me-2" data-v-99b98360></i>cskh@easymart.vn </small></div><div class="col-md-6 text-end" data-v-99b98360><small class="text-muted" data-v-99b98360><i class="fas fa-truck text-primary me-2" data-v-99b98360></i>Miễn phí vận chuyển đơn hàng từ 200k </small></div></div></div>',1)]),2),i("nav",Ag,[i("div",Ig,[ge(S,{to:"/",class:"navbar-brand fw-bold text-primary fs-4"},{default:Ne(()=>w[5]||(w[5]=[i("i",{class:"fas fa-shopping-cart me-2"},null,-1),q("EasyMart ")])),_:1,__:[5]}),i("div",$g,[ge(Vh,{searchQuery:e.searchQuery,onUpdateSearch:w[0]||(w[0]=E=>N.$emit("update-search",E)),onAddToCart:w[1]||(w[1]=E=>N.$emit("add-to-cart",E))},null,8,["searchQuery"])]),w[8]||(w[8]=i("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[i("span",{class:"navbar-toggler-icon"})],-1)),i("div",xg,[i("ul",Rg,[i("li",{class:"nav-item dropdown me-3",style:{position:"static"},onMouseenter:_,onMouseleave:y},[ge(S,{to:"/categories",class:"nav-link dropdown-toggle px-3 py-2 rounded-pill",role:"button","aria-expanded":a.value,id:"category-trigger"},{default:Ne(()=>w[6]||(w[6]=[i("i",{class:"fas fa-th-large me-2"},null,-1),q("Danh mục ")])),_:1,__:[6]},8,["aria-expanded"])],32),i("li",{class:"nav-item dropdown me-3",style:{position:"static"},onMouseenter:L,onMouseleave:b},[i("a",{class:"nav-link dropdown-toggle px-3 py-2 rounded-pill",href:"#",role:"button","aria-expanded":l.value,id:"account-trigger"},w[7]||(w[7]=[i("i",{class:"fas fa-user me-2"},null,-1),q("Tài khoản ")]),8,Pg)],32),i("li",Og,[ge(Eg)])])])])])],2),(x(),ls(Xa,{to:"body"},[a.value?(x(),P("ul",{key:0,class:ke(["dropdown-menu dropdown-menu-end category-dropdown",{show:a.value}]),style:{position:"fixed !important","z-index":"2147483647 !important"},onMouseenter:U,onMouseleave:y},[(x(!0),P(be,null,Le(e.categories,E=>(x(),P("li",{key:E.id},[ge(S,{to:{name:"Category",params:{id:E.id}},class:"dropdown-item rounded-2 mx-2 my-1",onClick:w[2]||(w[2]=ue=>a.value=!1)},{default:Ne(()=>[i("i",{class:ke(`${E.icon} text-${E.color} me-3`)},null,2),q(z(E.name),1)]),_:2},1032,["to"])]))),128))],34)):pe("",!0),l.value?(x(),P("ul",{key:1,class:ke(["dropdown-menu dropdown-menu-end account-dropdown",{show:l.value}]),style:{position:"fixed !important","z-index":"2147483647 !important"},onMouseenter:T,onMouseleave:b},[K(s)?(x(),P(be,{key:0},[i("li",Dg,[w[9]||(w[9]=i("i",{class:"fas fa-user-circle fa-2x text-primary mb-2"},null,-1)),i("div",Lg,z(K(n)?.name||"Tài khoản của bạn"),1),i("div",Ng,z(K(n)?.email),1)]),i("li",null,[ge(S,{to:"/profile",class:"dropdown-item rounded-2 mx-2 my-1"},{default:Ne(()=>w[10]||(w[10]=[i("i",{class:"fas fa-user me-3 text-primary"},null,-1),q("Thông tin tài khoản")])),_:1,__:[10]})]),i("li",null,[ge(S,{to:"/orders",class:"dropdown-item rounded-2 mx-2 my-1",onClick:w[3]||(w[3]=E=>l.value=!1)},{default:Ne(()=>w[11]||(w[11]=[i("i",{class:"fas fa-box me-3 text-success"},null,-1),q("Đơn hàng của tôi")])),_:1,__:[11]})]),i("li",null,[ge(S,{to:"/wishlist",class:"dropdown-item rounded-2 mx-2 my-1"},{default:Ne(()=>w[12]||(w[12]=[i("i",{class:"fas fa-heart me-3 text-danger"},null,-1),q("Sản phẩm yêu thích")])),_:1,__:[12]})]),w[14]||(w[14]=i("li",null,[i("hr",{class:"dropdown-divider"})],-1)),i("li",null,[i("a",{href:"#",class:"dropdown-item rounded-2 mx-2 my-1 text-danger",onClick:je(j,["prevent"])},w[13]||(w[13]=[i("i",{class:"fas fa-sign-out-alt me-3"},null,-1),q("Đăng xuất")]))])],64)):(x(),P(be,{key:1},[i("li",null,[ge(S,{to:"/login",class:"dropdown-item rounded-2 mx-2 my-1"},{default:Ne(()=>w[15]||(w[15]=[i("i",{class:"fas fa-sign-in-alt text-primary me-3"},null,-1),q("Đăng nhập")])),_:1,__:[15]})]),i("li",null,[ge(S,{to:"/register",class:"dropdown-item rounded-2 mx-2 my-1"},{default:Ne(()=>w[16]||(w[16]=[i("i",{class:"fas fa-user-plus text-primary me-3"},null,-1),q("Đăng ký")])),_:1,__:[16]})])],64))],34)):pe("",!0)]))],64)}}},Hg=st(Mg,[["__scopeId","data-v-99b98360"]]),Ug={class:"main-footer"},Bg={class:"footer-content"},Kg={class:"container"},jg={class:"newsletter-section"},Fg={class:"row align-items-center"},Gg={class:"col-lg-6"},Vg={class:"newsletter-form"},zg={class:"input-group"},Yg=["disabled"],qg={key:0,class:"fas fa-paper-plane"},Wg={key:1,class:"spinner-border spinner-border-sm",role:"status"},Qg={class:"footer-main"},Jg={class:"row g-4"},Xg={class:"col-lg-2 col-md-6"},Zg={class:"footer-section"},em={class:"footer-links"},tm=["href","onClick"],nm={class:"col-lg-2 col-md-6"},sm={class:"footer-section"},om={class:"footer-links"},rm=["href","onClick"],am={class:"col-lg-3 col-md-12"},im={class:"footer-section"},lm={class:"social-links"},cm=["href","title","onClick"],um={class:"app-download"},dm={class:"download-buttons"},fm={class:"footer-bottom"},hm={class:"row align-items-center"},gm={class:"col-md-6"},mm={class:"copyright"},pm={class:"copyright-text"},vm={class:"legal-links"},ym={class:"col-md-6"},bm={class:"footer-stats"},Tm={class:"stat-item"},wm={class:"stat-item"},_m={class:"stat-item"},Cm={__name:"Footer",setup(e){const t=Q(""),n=Q(!1),s=Q(""),o=Q(""),r=Q(!1),a=Z(()=>new Date().getFullYear()),l=Z(()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)),c=Z(()=>o.value==="success"?"fas fa-check-circle":"fas fa-exclamation-circle"),d=Lt([{name:"Giới thiệu EasyMart",url:"/about",icon:"fas fa-info-circle"},{name:"Danh sách cửa hàng",url:"/stores",icon:"fas fa-store"},{name:"Tin tức & Sự kiện",url:"/news",icon:"fas fa-newspaper"},{name:"Tuyển dụng",url:"/careers",icon:"fas fa-briefcase"},{name:"Nhà đầu tư",url:"/investors",icon:"fas fa-chart-line"}]),u=Lt([{name:"Trung tâm trợ giúp",url:"/help",icon:"fas fa-question-circle"},{name:"Chính sách đổi trả",url:"/return-policy",icon:"fas fa-undo-alt"},{name:"Phương thức thanh toán",url:"/payment",icon:"fas fa-credit-card"},{name:"Vận chuyển & Giao hàng",url:"/shipping",icon:"fas fa-shipping-fast"},{name:"Khiếu nại & Góp ý",url:"/feedback",icon:"fas fa-comment-dots"}]),f=Lt([{name:"Facebook",url:"https://facebook.com/easymart",icon:"fab fa-facebook"},{name:"Instagram",url:"https://instagram.com/easymart",icon:"fab fa-instagram"},{name:"YouTube",url:"https://youtube.com/easymart",icon:"fab fa-youtube"},{name:"TikTok",url:"https://tiktok.com/@easymart",icon:"fab fa-tiktok"},{name:"Zalo",url:"https://zalo.me/easymart",icon:"fas fa-comments"}]),h=Q(125e3),m=Q(35e4),_=Q(4.8),y=async()=>{if(!(!l.value||n.value)){n.value=!0,s.value="";try{await new Promise(I=>setTimeout(I,1500)),o.value="success",s.value="Đăng ký thành công! Kiểm tra email để xác nhận.",t.value="",setTimeout(()=>{s.value=""},5e3)}catch{o.value="error",s.value="Có lỗi xảy ra. Vui lòng thử lại sau.",setTimeout(()=>{s.value=""},3e3)}finally{n.value=!1}}},U=I=>{console.log(`Navigating to: ${I.name}`)},L=I=>{console.log(`Opening ${I.name}`),window.open(I.url,"_blank")},b=I=>{console.log(`Downloading ${I} app`)},T=()=>{console.log("Show privacy policy")},v=()=>{console.log("Show terms of service")},$=()=>{console.log("Show cookie policy")},R=I=>new Intl.NumberFormat("vi-VN").format(I),C=()=>{window.scrollTo({top:0,behavior:"smooth"})},V=()=>{r.value=window.scrollY>300};return vt(()=>{window.addEventListener("scroll",V)}),Zt(()=>{window.removeEventListener("scroll",V)}),(I,j)=>(x(),P("footer",Ug,[i("div",Bg,[i("div",Kg,[i("div",jg,[i("div",Fg,[j[4]||(j[4]=i("div",{class:"col-lg-6"},[i("div",{class:"newsletter-content"},[i("h4",{class:"newsletter-title"},"Đăng ký nhận tin khuyến mãi"),i("p",{class:"newsletter-subtitle"}," Nhận ngay thông tin về các chương trình ưu đãi mới nhất từ EasyMart ")])],-1)),i("div",Gg,[i("div",Vg,[i("div",zg,[ht(i("input",{type:"email",class:"form-control newsletter-input",placeholder:"Nhập email của bạn...","onUpdate:modelValue":j[0]||(j[0]=N=>t.value=N),onKeyup:zu(y,["enter"])},null,544),[[wn,t.value]]),i("button",{class:"btn btn-primary newsletter-btn",onClick:y,disabled:n.value||!l.value},[n.value?(x(),P("div",Wg,j[3]||(j[3]=[i("span",{class:"visually-hidden"},"Loading...",-1)]))):(x(),P("i",qg)),q(" "+z(n.value?"Đang đăng ký...":"Đăng ký"),1)],8,Yg)]),s.value?(x(),P("div",{key:0,class:ke(["subscription-message",o.value])},[i("i",{class:ke(c.value)},null,2),q(" "+z(s.value),1)],2)):pe("",!0)])])])]),i("div",Qg,[i("div",Jg,[j[12]||(j[12]=Nt('<div class="col-lg-3 col-md-6" data-v-8ac511af><div class="footer-section" data-v-8ac511af><div class="company-info" data-v-8ac511af><div class="footer-logo" data-v-8ac511af><i class="fas fa-shopping-cart logo-icon" data-v-8ac511af></i><span class="logo-text" data-v-8ac511af>EasyMart</span></div><p class="company-description" data-v-8ac511af> Công Ty Cổ Phần Dịch Vụ Thương Mại Tổng Hợp EasyMart - Mang đến những sản phẩm chất lượng, dịch vụ tận tâm. </p><div class="company-certifications" data-v-8ac511af><div class="cert-item" data-v-8ac511af><i class="fas fa-certificate text-warning" data-v-8ac511af></i><span data-v-8ac511af>Chứng nhận ISO 9001</span></div><div class="cert-item" data-v-8ac511af><i class="fas fa-shield-alt text-success" data-v-8ac511af></i><span data-v-8ac511af>An toàn thực phẩm</span></div></div></div></div></div>',1)),i("div",Xg,[i("div",Zg,[j[5]||(j[5]=i("h6",{class:"footer-title"},"Về Chúng Tôi",-1)),i("ul",em,[(x(!0),P(be,null,Le(d,N=>(x(),P("li",{key:N.name,class:"footer-link-item"},[i("a",{href:N.url,class:"footer-link",onClick:je(w=>U(N),["prevent"])},[i("i",{class:ke(`${N.icon} me-2`)},null,2),q(z(N.name),1)],8,tm)]))),128))])])]),i("div",nm,[i("div",sm,[j[6]||(j[6]=i("h6",{class:"footer-title"},"Hỗ Trợ Khách Hàng",-1)),i("ul",om,[(x(!0),P(be,null,Le(u,N=>(x(),P("li",{key:N.name,class:"footer-link-item"},[i("a",{href:N.url,class:"footer-link",onClick:je(w=>U(N),["prevent"])},[i("i",{class:ke(`${N.icon} me-2`)},null,2),q(z(N.name),1)],8,rm)]))),128))])])]),j[13]||(j[13]=Nt('<div class="col-lg-2 col-md-6" data-v-8ac511af><div class="footer-section" data-v-8ac511af><h6 class="footer-title" data-v-8ac511af>Liên Hệ</h6><div class="contact-info" data-v-8ac511af><div class="contact-item" data-v-8ac511af><i class="fas fa-map-marker-alt text-primary" data-v-8ac511af></i><div class="contact-details" data-v-8ac511af><strong data-v-8ac511af>Địa chỉ:</strong><span data-v-8ac511af>123 Đường ABC, Quận XYZ, TP.HCM</span></div></div><div class="contact-item" data-v-8ac511af><i class="fas fa-phone-alt text-success" data-v-8ac511af></i><div class="contact-details" data-v-8ac511af><strong data-v-8ac511af>Hotline:</strong><a href="tel:19001234" data-v-8ac511af>1900 1234</a></div></div><div class="contact-item" data-v-8ac511af><i class="fas fa-envelope text-info" data-v-8ac511af></i><div class="contact-details" data-v-8ac511af><strong data-v-8ac511af>Email:</strong><a href="mailto:cskh@easymart.vn" data-v-8ac511af>cskh@easymart.vn</a></div></div></div></div></div>',1)),i("div",am,[i("div",im,[j[10]||(j[10]=i("h6",{class:"footer-title"},"Kết Nối Với Chúng Tôi",-1)),i("div",lm,[(x(!0),P(be,null,Le(f,N=>(x(),P("a",{key:N.name,href:N.url,class:"social-link",title:N.name,onClick:je(w=>L(N),["prevent"])},[i("i",{class:ke(N.icon)},null,2)],8,cm))),128))]),i("div",um,[j[9]||(j[9]=i("h6",{class:"download-title"},"Tải Ứng Dụng",-1)),i("div",dm,[i("a",{href:"#",class:"download-btn",onClick:j[1]||(j[1]=je(N=>b("ios"),["prevent"]))},j[7]||(j[7]=[i("i",{class:"fab fa-apple"},null,-1),i("div",{class:"download-text"},[i("small",null,"Download on the"),i("strong",null,"App Store")],-1)])),i("a",{href:"#",class:"download-btn",onClick:j[2]||(j[2]=je(N=>b("android"),["prevent"]))},j[8]||(j[8]=[i("i",{class:"fab fa-google-play"},null,-1),i("div",{class:"download-text"},[i("small",null,"Get it on"),i("strong",null,"Google Play")],-1)]))])]),j[11]||(j[11]=Nt('<div class="payment-methods" data-v-8ac511af><h6 class="payment-title" data-v-8ac511af>Phương Thức Thanh Toán</h6><div class="payment-icons" data-v-8ac511af><i class="fab fa-cc-visa payment-icon" title="Visa" data-v-8ac511af></i><i class="fab fa-cc-mastercard payment-icon" title="Mastercard" data-v-8ac511af></i><i class="fas fa-money-bill-wave payment-icon" title="Tiền mặt" data-v-8ac511af></i><i class="fas fa-mobile-alt payment-icon" title="Mobile Banking" data-v-8ac511af></i></div></div>',1))])])])]),i("div",fm,[i("div",hm,[i("div",gm,[i("div",mm,[i("p",pm," © "+z(a.value)+" EasyMart. Tất cả các quyền được bảo lưu. ",1),i("div",vm,[i("a",{href:"#",onClick:je(T,["prevent"])},"Chính sách bảo mật"),j[14]||(j[14]=i("span",{class:"separator"},"|",-1)),i("a",{href:"#",onClick:je(v,["prevent"])},"Điều khoản sử dụng"),j[15]||(j[15]=i("span",{class:"separator"},"|",-1)),i("a",{href:"#",onClick:je($,["prevent"])},"Chính sách Cookie")])])]),i("div",ym,[i("div",bm,[i("div",Tm,[j[16]||(j[16]=i("i",{class:"fas fa-users text-primary"},null,-1)),i("span",null,z(R(h.value))+"+ khách hàng",1)]),i("div",wm,[j[17]||(j[17]=i("i",{class:"fas fa-shopping-bag text-success"},null,-1)),i("span",null,z(R(m.value))+"+ đơn hàng",1)]),i("div",_m,[j[18]||(j[18]=i("i",{class:"fas fa-star text-warning"},null,-1)),i("span",null,z(_.value)+"/5 sao",1)])])])])])])]),ge(Vs,{name:"fade"},{default:Ne(()=>[r.value?(x(),P("button",{key:0,class:"back-to-top-btn",onClick:C,title:"Lên đầu trang"},j[19]||(j[19]=[i("i",{class:"fas fa-arrow-up"},null,-1)]))):pe("",!0)]),_:1})]))}},Sm=st(Cm,[["__scopeId","data-v-8ac511af"]]),km={id:"app",class:"bg-white"},Em={class:"router-view-container"},Am={__name:"App",setup(e){const{notification:t,categories:n,searchQuery:s,addToCart:o}=xn();return en(),(r,a)=>{const l=$n("router-view");return x(),P("div",km,[K(t)?(x(),ls(th,{key:0,message:K(t).message,type:K(t).type},null,8,["message","type"])):pe("",!0),ge(Hg,{categories:K(n),searchQuery:K(s),onUpdateSearch:a[0]||(a[0]=c=>s.value=c),onAddToCart:K(o)},null,8,["categories","searchQuery","onAddToCart"]),i("div",Em,[ge(l)]),ge(Sm)])}}},Im={class:"hero-fullscreen mb-4"},$m={id:"heroCarousel",class:"carousel slide carousel-fade hero-carousel-animated","data-bs-ride":"carousel","data-bs-interval":"4000"},xm={class:"carousel-indicators"},Rm=["data-bs-slide-to"],Pm={class:"carousel-inner overflow-hidden"},Om=["src","alt"],Dm={class:"carousel-caption animated-caption"},Lm={class:"bg-dark bg-opacity-50 rounded-3 p-4"},Nm={class:"fw-bold"},Mm={class:"mb-0"},Hm={__name:"HeroCarousel",setup(e){const t=[{image:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",title:"Sản phẩm tươi ngon mỗi ngày",description:"Chất lượng hàng đầu - Giá cả cạnh tranh"},{image:"https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",title:"Mua sắm tiện lợi",description:"Giao hàng tận nơi - Thanh toán đa dạng"},{image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80",title:"Khuyến mãi hấp dẫn",description:"Tiết kiệm lên đến 50% cho các sản phẩm chọn lọc"}];return(n,s)=>(x(),P("div",Im,[i("div",$m,[i("div",xm,[(x(),P(be,null,Le(t,(o,r)=>i("button",{key:r,type:"button","data-bs-target":"#heroCarousel","data-bs-slide-to":r,class:ke({active:r===0})},null,10,Rm)),64))]),i("div",Pm,[(x(),P(be,null,Le(t,(o,r)=>i("div",{key:r,class:ke(["carousel-item animated-slide",{active:r===0}])},[i("img",{src:o.image,class:"d-block w-100 carousel-image",style:{height:"400px","object-fit":"cover"},alt:o.title},null,8,Om),i("div",Dm,[i("div",Lm,[i("h3",Nm,z(o.title),1),i("p",Mm,z(o.description),1)])])],2)),64))]),s[0]||(s[0]=Nt('<button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev" data-v-a2750e6a><div class="bg-primary rounded-circle p-3" data-v-a2750e6a><span class="carousel-control-prev-icon" data-v-a2750e6a></span></div></button><button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next" data-v-a2750e6a><div class="bg-primary rounded-circle p-3" data-v-a2750e6a><span class="carousel-control-next-icon" data-v-a2750e6a></span></div></button>',2))])]))}},Um=st(Hm,[["__scopeId","data-v-a2750e6a"]]);class go{static async getAllProductsWithStock(t){try{let n=`${ae.BASE_URL}${ye.PRODUCTS.WITH_STOCK_LIST}`;t&&(n+=`?maKho=${encodeURIComponent(t)}`);const s=await fetch(n);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(n){throw console.error("Error fetching products with stock:",n),n}}static async getProductWithStock(t,n){try{let s=`${ae.BASE_URL}${ye.PRODUCTS.BY_ID_WITH_STOCK(t)}`;n&&(s+=`?maKho=${encodeURIComponent(n)}`);const o=await fetch(s);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(s){throw console.error(`Error fetching product ${t} with stock:`,s),s}}static async compareMaSP(t=void 0){try{let n=`${ae.BASE_URL}${ye.INVENTORY.COMPARE_MASP}`;t&&(n+=`?type=${encodeURIComponent(t)}`);const s=await fetch(n);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(n){throw console.error("Error comparing maSP:",n),n}}static async getSanPhamOnlyMaSP(){return await this.compareMaSP("sanpham-only")}static async getTonKhoOnlyMaSP(){return await this.compareMaSP("tonkho-only")}static async getBothMaSP(){return await this.compareMaSP("both")}}function vl(){const e=Q({}),t=Q(!1),n=Q(null),s=async(_,y)=>{if(!_)return 0;try{t.value=!0,n.value=null;const U=await go.getProductWithStock(_,y),L=U?.soLuongTon??U?.stock??0,b=y?`${_}@${y}`:`${_}`;return e.value[b]=L,L}catch(U){return n.value=U.message,0}finally{t.value=!1}},o=async _=>{try{return t.value=!0,n.value=null,await go.getAllProductsWithStock(_)}catch(y){return n.value=y.message,[]}finally{t.value=!1}},r=Z(()=>_=>{const y=e.value[_];return typeof y=="number"?y>0:!1}),a=Z(()=>_=>{const y=e.value[_];return typeof y!="number"?"Không xác định":y===0?"Hết hàng":y<=10?"Sắp hết hàng":"Còn hàng"}),l=Z(()=>_=>{const y=e.value[_];return typeof y!="number"?"text-muted":y===0?"text-danger":y<=10?"text-warning":"text-success"}),c=Z(()=>_=>{const y=e.value[_];return typeof y!="number"?"fas fa-question-circle":y===0?"fas fa-times-circle":y<=10?"fas fa-exclamation-triangle":"fas fa-check-circle"}),d=(_,y)=>{const U=y?`${_}@${y}`:`${_}`,L=e.value[U];return typeof L=="number"?L:null},u=(_,y,U)=>{const L=U?`${_}@${U}`:`${_}`,b=d(_,U);b!==null&&(e.value[L]=Math.max(0,b-y))},f=(_,y)=>{const U=y?`${_}@${y}`:`${_}`;delete e.value[U]},h=()=>{e.value={}},m=async _=>{try{return t.value=!0,n.value=null,await go.compareMaSP(_)}catch(y){return n.value=y.message,_?[]:{sanPhamOnly:[],tonKhoOnly:[],both:[]}}finally{t.value=!1}};return{inventoryData:Z(()=>e.value),loading:Z(()=>t.value),error:Z(()=>n.value),getProductStock:s,getAllProductsWithStock:o,isProductInStock:r,getStockStatus:a,getStockStatusClass:l,getStockStatusIcon:c,getCurrentStock:d,updateStock:u,clearProductStock:f,clearAllStock:h,compareMaSP:m}}const Bm={class:"position-relative overflow-hidden",style:{height:"200px"}},Km=["src","alt"],jm={class:"position-absolute top-0 start-0 end-0 bottom-0 d-flex flex-column justify-content-between p-3 product-overlay"},Fm={class:"d-flex flex-wrap gap-2"},Gm={key:0,class:"badge bg-danger rounded-pill"},Vm={key:1,class:"badge bg-success rounded-pill"},zm={key:2,class:"badge bg-warning rounded-pill"},Ym={class:"d-flex justify-content-center gap-2 quick-actions"},qm=["title"],Wm=["title"],Qm=["title"],Jm={class:"card-body d-flex flex-column"},Xm={class:"d-flex align-items-center justify-content-between mb-2"},Zm={class:"d-flex gap-1"},ep={key:1,class:"text-muted ms-2"},tp={class:"card-title fw-semibold text-dark mb-3 lh-sm",style:{height:"2.8rem",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},np={class:"mb-auto"},sp={key:0,class:"text-muted text-decoration-line-through me-2",style:{"font-size":"0.875rem"}},op={class:"fw-bold text-primary fs-5"},rp={class:"mt-3"},ap=["disabled"],ip={key:0,class:"fas fa-cart-plus me-2"},lp={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},va=1,cp={__name:"ProductCard",props:{product:{type:Object,required:!0},formatPrice:{type:Function,required:!0}},emits:["add-to-cart","view-detail","add-to-wishlist"],setup(e,{emit:t}){const n=e,s=t,o=Q(!1),{getProductStock:r,getStockStatusClass:a}=vl(),l=Q(null),c=Q("text-muted"),d=Z(()=>n.product.originalPrice?Math.round((1-n.product.price/n.product.originalPrice)*100):0),u=Z(()=>n.product.isNew||Math.random()>.7),f=Z(()=>n.product.isBestSeller||Math.random()>.8),h=T=>{const v=Number(T);return Number.isFinite(v)?v:0},m=Z(()=>{const T=h(n.product.price),v=h(n.product.giaHienTai);return T>0?T:v>0?v:0}),_=async()=>{o.value=!0;try{await new Promise(T=>setTimeout(T,500)),s("add-to-cart",n.product.maSP||n.product.id)}finally{o.value=!1}},y=()=>{s("view-detail",n.product.maSP||n.product.id)},U=()=>{s("add-to-wishlist",n.product.maSP||n.product.id)},L=()=>{y()},b=async()=>{const T=[n.product?.maSP,n.product?.id,n.product?.maSanPham,n.product?.productId,n.product?.code].filter(Boolean);if(T.length>0){for(const v of T)try{const $=await r(v,va);if($!=null&&$>0){l.value=$,c.value=a.value(`${v}@${va}`);return}}catch{continue}l.value=0,c.value="text-muted"}else l.value=0,c.value="text-muted"};return rt(()=>n.product,()=>{b()},{immediate:!1,deep:!1}),vt(()=>{b()}),(T,v)=>(x(),P("div",{class:"card h-100 shadow-sm border-0 position-relative overflow-hidden product-card",onClick:L},[i("div",Bm,[i("img",{src:e.product.image,class:"card-img-top w-100 h-100 object-fit-cover",alt:e.product.name,loading:"lazy"},null,8,Km),i("div",jm,[i("div",Fm,[d.value>0?(x(),P("span",Gm," -"+z(d.value)+"% ",1)):pe("",!0),u.value?(x(),P("span",Vm," Mới ")):pe("",!0),f.value?(x(),P("span",zm," Bán chạy ")):pe("",!0)]),i("div",Ym,[i("button",{class:"btn btn-light btn-sm rounded-circle p-2",onClick:je(_,["stop"]),title:"Thêm "+e.product.name+" vào giỏ hàng",style:{width:"40px",height:"40px"}},v[0]||(v[0]=[i("i",{class:"fas fa-cart-plus"},null,-1)]),8,qm),i("button",{class:"btn btn-light btn-sm rounded-circle p-2",onClick:je(y,["stop"]),title:"Xem chi tiết "+e.product.name,style:{width:"40px",height:"40px"}},v[1]||(v[1]=[i("i",{class:"fas fa-eye"},null,-1)]),8,Wm),i("button",{class:"btn btn-light btn-sm rounded-circle p-2",onClick:je(U,["stop"]),title:"Thêm "+e.product.name+" vào yêu thích",style:{width:"40px",height:"40px"}},v[2]||(v[2]=[i("i",{class:"fas fa-heart"},null,-1)]),8,Qm)])])]),i("div",Jm,[i("div",Xm,[i("div",Zm,[(x(),P(be,null,Le(5,$=>i("i",{key:$,class:ke(["fas fa-star",$<=e.product.rating?"text-warning":"text-muted"]),style:{"font-size":"0.875rem"}},null,2)),64))]),l.value!==null?(x(),P("small",{key:0,class:ke([c.value,"ms-2"])},"("+z(l.value)+")",3)):(x(),P("small",ep,"(Đang tải...)"))]),i("h6",tp,z(e.product.name),1),i("div",np,[e.product.originalPrice?(x(),P("span",sp,z(e.formatPrice(h(e.product.originalPrice))),1)):pe("",!0),i("span",op,z(e.formatPrice(m.value)),1)]),i("div",rp,[i("button",{class:"btn btn-primary w-100 fw-semibold rounded-3 py-2",onClick:je(_,["stop"]),disabled:o.value},[o.value?(x(),P("div",lp,v[3]||(v[3]=[i("span",{class:"visually-hidden"},"Loading...",-1)]))):(x(),P("i",ip)),q(" "+z(o.value?"Đang thêm...":"Thêm giỏ hàng"),1)],8,ap)])])]))}},yl=st(cp,[["__scopeId","data-v-0b0cc175"]]),up=["id"],dp={class:"container"},fp={class:"d-flex flex-column flex-md-row align-items-center justify-content-between mb-4 p-4 bg-light rounded-4 shadow-sm"},hp={class:"d-flex align-items-center gap-4 mb-3 mb-md-0"},gp={class:"bg-white rounded-4 p-3 shadow-sm border",style:{width:"90px",height:"90px",display:"flex","align-items":"center","justify-content":"center"}},mp={class:"fw-bold text-dark mb-2 fs-2"},pp={key:0,class:"text-muted mb-3 fs-6"},vp={class:"d-flex flex-wrap gap-3"},yp={class:"badge bg-primary bg-opacity-10 text-primary p-2 rounded-pill"},bp={class:"badge bg-warning bg-opacity-10 text-warning p-2 rounded-pill"},Tp={key:0,class:"badge bg-danger p-2 rounded-pill"},wp={class:"d-flex align-items-center gap-3"},_p={class:"mt-4 mb-5"},Cp={key:0,class:"text-center py-5"},Sp={key:1},kp={key:2,class:"text-center py-5"},Ep={class:"text-center mt-5 p-4 bg-light bg-opacity-50 rounded-4 border"},Ap={key:0,class:"d-flex flex-column align-items-center gap-3 py-4"},Ip={key:1},$p={key:0,class:"d-flex justify-content-center align-items-center gap-3 flex-wrap"},xp={key:1,class:"mt-3"},Rp={key:2,class:"text-muted"},Pp={class:"mt-3"},Op={key:0,class:"mt-5 pt-4 border-top"},Dp={class:"row g-3"},Lp={class:"d-flex align-items-center gap-3 p-3 bg-white rounded-3 shadow-sm border feature-item"},Np={class:"fw-semibold text-dark"},Mp={__name:"CategorySection",props:{category:{type:Object,required:!0},products:{type:Array,required:!0},isLoadingProducts:{type:Boolean,default:!1},formatPrice:{type:Function,required:!0},initialDisplayCount:{type:Number,default:8}},emits:["add-to-cart","view-product","add-to-wishlist","show-more","show-all","load-products"],setup(e,{emit:t}){const n=e,s=t,o=Q("default"),r=Q(n.initialDisplayCount),a=Q(!1),l=Q(!1),c=Z(()=>{let R=[...n.products].map(C=>({...C,price:Number.isFinite(Number(C.price))&&Number(C.price)>0?Number(C.price):Number(C.giaHienTai)||0}));switch(o.value){case"name":return R.sort((C,V)=>C.name.localeCompare(V.name,"vi"));case"price-low":return R.sort((C,V)=>C.price-V.price);case"price-high":return R.sort((C,V)=>V.price-C.price);case"newest":return R.sort((C,V)=>new Date(V.createdAt||Date.now())-new Date(C.createdAt||Date.now()));case"popular":return R.sort((C,V)=>(V.popularity||0)-(C.popularity||0));default:return R}}),d=Z(()=>c.value.slice(0,r.value)),u=Z(()=>r.value<n.products.length),f=Z(()=>n.products.length-r.value),h=Z(()=>n.products.length===0?0:n.products.reduce((C,V)=>C+(V.rating||4.5),0)/n.products.length),m=Z(()=>n.products.some(R=>R.isNew||Math.random()>.8)),_=()=>({primary:"#0d6efd",success:"#198754",danger:"#dc3545",warning:"#ffc107",info:"#0dcaf0",secondary:"#6c757d"})[n.category.color]||"#0d6efd",y=()=>{},U=async()=>{a.value=!0,l.value=!0,await new Promise(R=>setTimeout(R,1e3)),r.value=Math.min(r.value+n.initialDisplayCount,n.products.length),a.value=!1,l.value=!1,s("show-more",{categoryId:n.category.id,displayCount:r.value})},L=()=>{r.value=n.products.length,s("show-all",{categoryId:n.category.id,totalProducts:n.products.length})},b=()=>{r.value=n.initialDisplayCount,document.getElementById(`category-${n.category.id}`)?.scrollIntoView({behavior:"smooth",block:"start"})},T=R=>{s("add-to-cart",R)},v=R=>{s("view-product",R)},$=R=>{s("add-to-wishlist",R)};return rt(()=>n.category.id,()=>{r.value=n.initialDisplayCount,o.value="default"}),(R,C)=>{const V=$n("router-link");return e.products.length>0?(x(),P("section",{key:0,class:"py-5 my-4",id:`category-${e.category.id}`},[i("div",dp,[i("div",fp,[i("div",hp,[i("div",gp,[i("i",{class:ke(`${e.category.icon} fs-1`),style:bn({color:_()})},null,6)]),i("div",null,[i("h2",mp,z(e.category.name),1),e.category.description?(x(),P("p",pp,z(e.category.description),1)):pe("",!0),i("div",vp,[i("span",yp,[C[2]||(C[2]=i("i",{class:"fas fa-box me-2"},null,-1)),q(" "+z(e.products.length)+" sản phẩm ",1)]),i("span",bp,[C[3]||(C[3]=i("i",{class:"fas fa-star me-2"},null,-1)),q(" "+z(h.value.toFixed(1))+" sao ",1)]),m.value?(x(),P("span",Tp,C[4]||(C[4]=[i("i",{class:"fas fa-sparkles me-2"},null,-1),q(" Có sản phẩm mới ")]))):pe("",!0)])])]),i("div",wp,[C[6]||(C[6]=i("div",{class:"bg-primary bg-opacity-10 border border-primary border-opacity-25 rounded-3 px-3 py-2"},[i("span",{class:"text-primary fw-semibold small"},[i("i",{class:"fas fa-th me-2"}),q(" Hiển thị dạng lưới ")])],-1)),i("div",null,[ht(i("select",{"onUpdate:modelValue":C[0]||(C[0]=I=>o.value=I),class:"form-select form-select-sm rounded-3 border-primary border-opacity-25 fw-semibold",onChange:y,style:{"min-width":"160px"}},C[5]||(C[5]=[Nt('<option value="default" data-v-996cfb6f>Mặc định</option><option value="name" data-v-996cfb6f>Tên A-Z</option><option value="price-low" data-v-996cfb6f>Giá thấp - cao</option><option value="price-high" data-v-996cfb6f>Giá cao - thấp</option><option value="newest" data-v-996cfb6f>Mới nhất</option><option value="popular" data-v-996cfb6f>Phổ biến</option>',6)]),544),[[Bi,o.value]])])])]),i("div",_p,[e.isLoadingProducts?(x(),P("div",Cp,C[7]||(C[7]=[i("div",{class:"spinner-border text-primary",role:"status"},[i("span",{class:"visually-hidden"},"Đang tải sản phẩm...")],-1),i("p",{class:"text-muted mt-3"},"Đang tải sản phẩm trong danh mục...",-1)]))):e.products.length>0?(x(),P("div",Sp,[ge(Lu,{name:"products",tag:"div",class:"row g-3"},{default:Ne(()=>[(x(!0),P(be,null,Le(d.value,(I,j)=>(x(),P("div",{key:I.id,class:ke(["col-12","col-sm-6","col-md-4","col-lg-3","product-item"]),style:bn({animationDelay:`${j*.1}s`})},[ge(yl,{product:I,formatPrice:e.formatPrice,onAddToCart:T,onViewDetail:v,onAddToWishlist:$},null,8,["product","formatPrice"])],4))),128))]),_:1})])):(x(),P("div",kp,[C[9]||(C[9]=i("div",{class:"empty-icon mb-4"},[i("i",{class:"fas fa-box-open fa-4x text-muted"})],-1)),C[10]||(C[10]=i("h4",{class:"text-muted mb-3"},"Chưa có sản phẩm nào",-1)),C[11]||(C[11]=i("p",{class:"text-muted mb-4"},"Danh mục này chưa có sản phẩm nào được thêm vào",-1)),i("button",{class:"btn btn-primary",onClick:C[1]||(C[1]=I=>s("load-products",e.category.id))},C[8]||(C[8]=[i("i",{class:"fas fa-refresh me-2"},null,-1),q("Tải lại sản phẩm ")]))]))]),i("div",Ep,[a.value?(x(),P("div",Ap,C[12]||(C[12]=[i("div",{class:"spinner-border text-primary",role:"status"},[i("span",{class:"visually-hidden"},"Đang tải...")],-1),i("p",{class:"text-muted fw-semibold mb-0 fs-6"},"Đang tải thêm sản phẩm...",-1)]))):(x(),P("div",Ip,[u.value?(x(),P("div",$p,[i("button",{class:"btn btn-primary fw-bold px-4 py-2 rounded-3",onClick:U},[C[13]||(C[13]=i("i",{class:"fas fa-plus me-2"},null,-1)),q("Xem thêm "+z(f.value)+" sản phẩm ",1)]),i("button",{class:"btn btn-outline-primary fw-bold px-4 py-2 rounded-3",onClick:L},C[14]||(C[14]=[i("i",{class:"fas fa-expand me-2"},null,-1),q("Hiển thị tất cả ")])),ge(V,{to:{name:"Category",params:{id:e.category.id}},class:"btn btn-outline-success fw-bold px-4 py-2 rounded-3"},{default:Ne(()=>C[15]||(C[15]=[i("i",{class:"fas fa-arrow-right me-2"},null,-1),q("Xem trang danh mục ")])),_:1,__:[15]},8,["to"])])):d.value.length>e.initialDisplayCount?(x(),P("div",xp,[i("button",{class:"btn btn-outline-secondary fw-semibold px-4 py-2 rounded-3",onClick:b},C[16]||(C[16]=[i("i",{class:"fas fa-compress me-2"},null,-1),q("Thu gọn ")])),ge(V,{to:{name:"Category",params:{id:e.category.id}},class:"btn btn-outline-success fw-bold px-4 py-2 rounded-3 ms-2"},{default:Ne(()=>C[17]||(C[17]=[i("i",{class:"fas fa-arrow-right me-2"},null,-1),q("Xem trang danh mục ")])),_:1,__:[17]},8,["to"])])):(x(),P("div",Rp,[C[19]||(C[19]=i("i",{class:"fas fa-check-circle text-success me-2"},null,-1)),C[20]||(C[20]=q(" Đã hiển thị tất cả sản phẩm trong danh mục ")),i("div",Pp,[ge(V,{to:{name:"Category",params:{id:e.category.id}},class:"btn btn-outline-success fw-bold px-4 py-2 rounded-3"},{default:Ne(()=>C[18]||(C[18]=[i("i",{class:"fas fa-arrow-right me-2"},null,-1),q("Xem trang danh mục ")])),_:1,__:[18]},8,["to"])])]))]))]),R.categoryFeatures&&R.categoryFeatures.length>0?(x(),P("div",Op,[C[21]||(C[21]=i("h5",{class:"fw-bold text-dark text-center mb-4"},"Đặc điểm danh mục",-1)),i("div",Dp,[(x(!0),P(be,null,Le(R.categoryFeatures,I=>(x(),P("div",{key:I.id,class:"col-md-6 col-lg-4"},[i("div",Lp,[i("i",{class:ke(`${I.icon} fs-4 text-primary`)},null,2),i("span",Np,z(I.text),1)])]))),128))])])):pe("",!0)])],8,up)):pe("",!0)}}},Hp=st(Mp,[["__scopeId","data-v-996cfb6f"]]),Up={id:"productCategories"},Bp={key:0,class:"text-center py-5"},Kp={__name:"Home",setup(e){const t=en(),n=Q(!1),{categories:s,getProductsByCategory:o,formatPrice:r,addToCart:a,isLoadingCategories:l}=xn(),c=Q({}),d=Q({}),u=_=>{t.push({name:"ProductDetail",params:{id:_}})},f=async _=>{if(c.value[_])return c.value[_];try{d.value[_]=!0;const y=await o(_);return c.value[_]=y,y}catch(y){return console.error(`Failed to load products for category ${_}:`,y),[]}finally{d.value[_]=!1}},h=()=>{t.push({name:"Promotions"})},m=()=>{const _=window.scrollY;n.value=_>300};return vt(()=>{window.addEventListener("scroll",m),m(),rt(s,async _=>{if(_.length>0){const y=_.slice(0,3);for(const U of y)await f(U.id)}},{immediate:!0})}),Zt(()=>{window.removeEventListener("scroll",m)}),(_,y)=>(x(),P("div",null,[ge(Um),i("div",Up,[K(l)?(x(),P("div",Bp,y[0]||(y[0]=[i("div",{class:"spinner-border text-primary",role:"status"},[i("span",{class:"visually-hidden"},"Đang tải danh mục...")],-1),i("p",{class:"text-muted mt-3"},"Đang tải danh mục sản phẩm...",-1)]))):(x(!0),P(be,{key:1},Le(K(s),U=>(x(),ls(Hp,{key:U.id,category:U,products:c.value[U.id]||[],isLoadingProducts:d.value[U.id],formatPrice:K(r),onAddToCart:K(a),onViewProduct:u,onLoadProducts:f},null,8,["category","products","isLoadingProducts","formatPrice","onAddToCart"]))),128))]),ge(Vs,{name:"fade"},{default:Ne(()=>[n.value?(x(),P("button",{key:0,class:"promotion-btn",onClick:h,title:"Xem khuyến mãi"},y[1]||(y[1]=[i("i",{class:"fas fa-gift"},null,-1)]))):pe("",!0)]),_:1})]))}},jp=st(Kp,[["__scopeId","data-v-7ff373c1"]]);function Fp(e,t=null){const{products:n,categories:s,addToCart:o,formatPrice:r,showNotification:a}=xn(),l=Q(null),c=Q({}),d=Q([]),u=Q([]),f=Q(1),h=Q(0),m=Q("description"),_=Q(!1),y=Z(()=>l.value?c.value[l.value.id]||{description:"Sản phẩm chất lượng cao, được chọn lọc kỹ càng để đảm bảo tươi ngon và an toàn cho sức khỏe. Được nuôi trồng theo quy trình khép kín, đảm bảo vệ sinh an toàn thực phẩm.",nutrition:"Giàu protein, ít chất béo, cung cấp các vitamin và khoáng chất thiết yếu cho cơ thể. Đặc biệt tốt cho việc phát triển cơ bắp và duy trì sức khỏe tổng thể.",storage:"Bảo quản trong tủ lạnh từ 0-4°C, sử dụng trong vòng 2-3 ngày sau khi mở gói",origin:"Việt Nam - Đồng bằng sông Cửu Long"}:null),U=Z(()=>l.value?l.value.reviews||d.value[l.value.id]||[{id:1,name:"Nguyễn Văn A",rating:5,content:"Sản phẩm rất tốt, tươi ngon! Chất lượng vượt mong đợi, sẽ tiếp tục ủng hộ.",date:"2025-01-01"},{id:2,name:"Trần Thị B",rating:4,content:"Chất lượng ổn, sẽ mua lại. Giá cả hợp lý, giao hàng nhanh.",date:"2025-01-02"},{id:3,name:"Lê Văn C",rating:5,content:"Tuyệt vời! Gia đình tôi rất hài lòng với sản phẩm này.",date:"2025-01-03"}]:[]),L=Z(()=>{if(!l.value)return[];if(l.value?.images&&l.value.images.length>0)return l.value.images.map((ie,re)=>({id:re+1,url:ie,alt:re===0?"Hình chính":`Góc nhìn ${re+1}`,isMain:re===0}));const F=l.value?.image||"https://via.placeholder.com/800x600?text=No+Image";return u.value[l.value.id]||[{id:1,url:F,alt:"Hình chính",isMain:!0},{id:2,url:F,alt:"Góc nhìn 2",isMain:!1},{id:3,url:F,alt:"Góc nhìn 3",isMain:!1}]}),b=Z(()=>U.value.length===0?0:U.value.reduce((F,ie)=>F+ie.rating,0)/U.value.length),T=Z(()=>!l.value||!l.value.originalPrice?0:Math.round((1-l.value.price/l.value.originalPrice)*100)),v=Z(()=>l.value?n.value.filter(F=>F.categoryId===l.value.categoryId&&(F.maSP||F.id)!==(l.value.maSP||l.value.id)).slice(0,4):[]),$=Z(()=>l.value?s.value.find(F=>F.id===l.value.categoryId):null),R=Z(()=>{const F=[{name:"Trang chủ",href:"#",icon:"fas fa-home"}];return $.value&&F.push({name:$.value.name,href:`#category-${$.value.id}`}),l.value&&F.push({name:l.value.name,active:!0}),F}),C=async F=>{console.log("🚀 loadProduct called with ID:",F),console.log("🚀 Current products.value:",n.value),_.value=!0;try{const ie=`http://localhost:8080/api/sanpham/${F}`;console.log("🌐 Calling API:",ie);const re=await fetch(ie);if(console.log("📡 API Response status:",re.status),console.log("📡 API Response ok:",re.ok),!re.ok)throw new Error(`HTTP error! status: ${re.status}`);const oe=await re.json();console.log("📦 API Response data:",oe);const Ee={id:oe.maSP||oe.id,name:oe.tenSP||oe.name,price:oe.giaHienTai||oe.giaBan||oe.price,originalPrice:oe.giaGoc||oe.originalPrice,categoryId:oe.loaiSanPham?.maLoaiSP||oe.categoryId,categoryName:oe.loaiSanPham?.tenLoai||oe.categoryName,image:`http://localhost:8080/api/upload/serve-image/${oe.maSP}_main.jfif`,images:[`http://localhost:8080/api/upload/serve-image/${oe.maSP}_main.jfif`,`http://localhost:8080/api/upload/serve-image/${oe.maSP}_main1.jfif`,`http://localhost:8080/api/upload/serve-image/${oe.maSP}_main2.jfif`],description:oe.moTa||oe.description,isFlashSale:oe.isFlashSale||!1,isActive:oe.isActive!==!1,stock:oe.trongLuong||oe.stock||0,unit:oe.donViTinh||oe.unit||"cái",rating:oe.danhGia||oe.rating||4.5,reviews:oe.danhGia||oe.reviews||[],weight:oe.trongLuong||null,weightUnit:oe.donViTinh||null,shelfLifeDays:oe.hanSuDung||null};l.value=Ee,h.value=0,f.value=1}catch(ie){console.error(`❌ Failed to load product ${F} from API:`,ie);const re=n.value.find(oe=>oe.id===F||oe.id===String(F)||oe.id===parseInt(F)||oe.maSP===F||oe.maSP===String(F));re?(l.value=re,h.value=0,f.value=1):(console.error("❌ Product not found in local data either"),l.value=null)}finally{_.value=!1}},V=(F,ie=10)=>{const re=Math.max(1,Math.min(ie,f.value+F));f.value=re},I=F=>{h.value=F},j=()=>{l.value&&o(l.value.maSP||l.value.id,f.value)},N=()=>{if(!l.value){a("Không tìm thấy sản phẩm!","error");return}if(!JSON.parse(localStorage.getItem("easymart-user")||"null")){localStorage.setItem("easymart-selected-items",JSON.stringify([l.value.maSP||l.value.id])),localStorage.setItem("easymart-redirect-after-login","/checkout"),a("Vui lòng đăng nhập để tiến hành thanh toán!","warning"),setTimeout(()=>{window.location.href="/login"},800);return}j(),localStorage.setItem("easymart-selected-items",JSON.stringify([l.value.maSP||l.value.id])),localStorage.setItem("easymart-invoice",JSON.stringify({items:[{maSP:l.value.maSP||l.value.id,tenSP:l.value.name,donGia:l.value.price,soLuong:f.value}],orderId:"NEW",timestamp:new Date().toISOString()})),a("Chuyển đến trang thanh toán...","info"),setTimeout(()=>{t?t.push("/checkout"):window.location.href="/checkout"},800)},w=()=>{a("Đã thêm vào danh sách yêu thích!","success")},S=()=>{navigator.share&&l.value?navigator.share({title:l.value.name,text:`Xem sản phẩm tuyệt vời này tại EasyMart: ${l.value.name}`,url:window.location.href}).catch(()=>{F()}):F();function F(){navigator.clipboard.writeText(window.location.href).then(()=>{a("Đã copy link sản phẩm!","info")})}},E=()=>{a("Tính năng so sánh sẽ có trong phiên bản tiếp theo!","info")},ue=F=>{m.value=F};return vt(()=>{e&&C(e)}),{currentProduct:l,quantity:f,selectedImageIndex:h,activeTab:m,isLoading:_,currentProductDetail:y,currentReviews:U,currentImages:L,averageRating:b,discountPercentage:T,relatedProducts:v,currentCategory:$,breadcrumbs:R,loadProduct:C,changeQuantity:V,changeMainImage:I,addToCartWithQuantity:j,buyNow:N,addToWishlist:w,shareProduct:S,compareProduct:E,setActiveTab:ue,formatPrice:r,addToCart:o}}const Gp={class:"product-reviews"},Vp={class:"row"},zp={class:"col-lg-10 mx-auto"},Yp={class:"mb-4 text-center"},qp={class:"d-flex justify-content-center align-items-center mb-3"},Wp={class:"text-muted"},Qp={class:"row g-4"},Jp={class:"card mb-3 border-primary"},Xp={class:"card-body"},Zp={class:"d-flex justify-content-between align-items-start mb-2"},ev={class:"card-title mb-0 text-primary"},tv={class:"text-muted"},nv={class:"text-warning mb-2"},sv={class:"card-text"},ov={key:0,class:"text-center text-muted py-5"},rv={__name:"ProductReviews",props:{product:{type:Object,required:!0},reviews:{type:Array,required:!1}},setup(e){const t=e,n=Z(()=>(console.log("🔍 ProductReviews - Props reviews:",t.reviews),console.log("🔍 ProductReviews - Reviews length:",t.reviews?.length||0),t.reviews||[]));return(s,o)=>(x(),P("div",Gp,[i("div",Vp,[i("div",zp,[i("div",Yp,[o[2]||(o[2]=i("h5",{class:"text-primary mb-3"},"Đánh giá từ khách hàng",-1)),i("div",qp,[o[1]||(o[1]=Nt('<div class="text-warning fs-3 me-3" data-v-bc63e91b><i class="fas fa-star" data-v-bc63e91b></i><i class="fas fa-star" data-v-bc63e91b></i><i class="fas fa-star" data-v-bc63e91b></i><i class="fas fa-star" data-v-bc63e91b></i><i class="fas fa-star-half-alt" data-v-bc63e91b></i></div>',1)),i("div",null,[o[0]||(o[0]=i("div",{class:"fs-4 fw-bold text-primary"},"4.5/5",-1)),i("small",Wp,"("+z(n.value.length)+" đánh giá)",1)])])]),i("div",Qp,[(x(!0),P(be,null,Le(n.value,r=>(x(),P("div",{class:"col-12",key:r.id},[i("div",Jp,[i("div",Xp,[i("div",Zp,[i("h6",ev,z(r.name),1),i("small",tv,z(r.date),1)]),i("div",nv,[(x(!0),P(be,null,Le(r.rating,a=>(x(),P("i",{key:a,class:"fas fa-star"}))),128)),(x(!0),P(be,null,Le(5-r.rating,a=>(x(),P("i",{key:a+r.rating,class:"far fa-star"}))),128))]),i("p",sv,z(r.content),1)])])]))),128))]),n.value.length===0?(x(),P("div",ov,o[3]||(o[3]=[i("i",{class:"fas fa-info-circle fa-2x mb-3"},null,-1),i("div",null,"Chưa có đánh giá nào cho sản phẩm này.",-1)]))):pe("",!0)])])]))}},av=st(rv,[["__scopeId","data-v-bc63e91b"]]),iv={class:"write-review-section"},lv={key:0,class:"text-center mb-4"},cv={key:1,class:"text-center mb-4"},uv={key:2,class:"card shadow-sm border-0 mb-4"},dv={class:"card-body"},fv={class:"d-flex align-items-center mb-3 p-3 bg-light rounded"},hv=["src","alt"],gv={class:"mb-0"},mv={class:"text-muted"},pv={class:"mb-3"},vv={class:"rating-input d-flex align-items-center gap-3"},yv={class:"star-rating"},bv=["onClick","onMouseover"],Tv={class:"text-muted"},wv={class:"mb-3"},_v={class:"form-text"},Cv={class:"mb-3"},Sv={class:"mb-4"},kv={class:"form-check"},Ev={class:"d-flex gap-2"},Av=["disabled"],Iv={key:0,class:"fas fa-paper-plane me-2"},$v={key:1,class:"spinner-border spinner-border-sm me-2",role:"status"},xv=["disabled"],Rv={key:3,class:"alert alert-success alert-dismissible fade show",role:"alert"},Pv={__name:"WriteReview",props:{product:{type:Object,required:!0}},emits:["review-submitted"],setup(e,{emit:t}){const n=t,{user:s,isLoggedIn:o}=os(),r=Q(!1),a=Q(0),l=Q(0),c=Q(""),d=Q(""),u=Q(!1),f=Q(!1),h=Q(!1),m=Z(()=>{switch(l.value||a.value){case 1:return"Rất tệ";case 2:return"Tệ";case 3:return"Bình thường";case 4:return"Tốt";case 5:return"Tuyệt vời";default:return"Chọn số sao"}}),_=async()=>{if(!(a.value===0||c.value.trim().length<10)){f.value=!0;try{await new Promise(b=>setTimeout(b,1500));const L={id:Date.now(),name:s.value.name,email:s.value.email,avatar:s.value.avatar,rating:a.value,title:d.value.trim()||null,content:c.value.trim(),wouldRecommend:u.value,date:new Date().toISOString().split("T")[0],isVerifiedPurchase:!0};n("review-submitted",L),h.value=!0,U(),setTimeout(()=>{h.value=!1},5e3)}catch(L){console.error("Error submitting review:",L)}finally{f.value=!1}}},y=()=>{U()},U=()=>{r.value=!1,a.value=0,l.value=0,c.value="",d.value="",u.value=!1};return(L,b)=>{const T=$n("router-link");return x(),P("div",iv,[!K(o)&&!r.value?(x(),P("div",lv,[b[7]||(b[7]=i("div",{class:"alert alert-info"},[i("i",{class:"fas fa-info-circle me-2"}),i("strong",null,"Bạn cần đăng nhập để viết đánh giá")],-1)),ge(T,{to:"/login",class:"btn btn-primary"},{default:Ne(()=>b[6]||(b[6]=[i("i",{class:"fas fa-sign-in-alt me-2"},null,-1),q("Đăng nhập ngay ")])),_:1,__:[6]})])):K(o)&&!r.value?(x(),P("div",cv,[i("button",{class:"btn btn-success btn-lg",onClick:b[0]||(b[0]=v=>r.value=!0)},b[8]||(b[8]=[i("i",{class:"fas fa-pen me-2"},null,-1),q("Viết đánh giá ")]))])):pe("",!0),r.value&&K(o)?(x(),P("div",uv,[b[14]||(b[14]=i("div",{class:"card-header bg-primary text-white"},[i("h5",{class:"mb-0"},[i("i",{class:"fas fa-star me-2"}),q("Viết đánh giá cho sản phẩm này ")])],-1)),i("div",dv,[i("form",{onSubmit:je(_,["prevent"])},[i("div",fv,[i("img",{src:K(s).avatar,class:"rounded-circle me-3",width:"50",height:"50",alt:K(s).name},null,8,hv),i("div",null,[i("h6",gv,z(K(s).name),1),i("small",mv,z(K(s).email),1)])]),i("div",pv,[b[9]||(b[9]=i("label",{class:"form-label fw-semibold"},"Đánh giá của bạn *",-1)),i("div",vv,[i("div",yv,[(x(),P(be,null,Le(5,v=>i("i",{key:v,class:ke(["fas fa-star star-clickable",v<=a.value?"text-warning":"text-muted"]),onClick:$=>a.value=v,onMouseover:$=>l.value=v,onMouseleave:b[1]||(b[1]=$=>l.value=0),style:{cursor:"pointer","font-size":"1.5rem","margin-right":"0.25rem"}},null,42,bv)),64))]),i("span",Tv,z(m.value),1)])]),i("div",wv,[b[10]||(b[10]=i("label",{for:"reviewContent",class:"form-label fw-semibold"},"Nội dung đánh giá *",-1)),ht(i("textarea",{"onUpdate:modelValue":b[2]||(b[2]=v=>c.value=v),class:"form-control",id:"reviewContent",rows:"4",required:"",placeholder:"Chia sẻ trải nghiệm của bạn về sản phẩm này...",maxlength:"500"},null,512),[[wn,c.value]]),i("div",_v,z(c.value.length)+"/500 ký tự",1)]),i("div",Cv,[b[11]||(b[11]=i("label",{for:"reviewTitle",class:"form-label fw-semibold"},"Tiêu đề đánh giá (tùy chọn)",-1)),ht(i("input",{"onUpdate:modelValue":b[3]||(b[3]=v=>d.value=v),type:"text",class:"form-control",id:"reviewTitle",placeholder:"Ví dụ: Sản phẩm tuyệt vời!",maxlength:"100"},null,512),[[wn,d.value]])]),i("div",Sv,[i("div",kv,[ht(i("input",{"onUpdate:modelValue":b[4]||(b[4]=v=>u.value=v),class:"form-check-input",type:"checkbox",id:"wouldRecommend"},null,512),[[Ui,u.value]]),b[12]||(b[12]=i("label",{class:"form-check-label",for:"wouldRecommend"},[i("i",{class:"fas fa-thumbs-up me-2"}),q("Tôi sẽ giới thiệu sản phẩm này cho bạn bè ")],-1))])]),i("div",Ev,[i("button",{type:"submit",class:"btn btn-success",disabled:f.value||a.value===0||c.value.trim().length<10},[f.value?pe("",!0):(x(),P("i",Iv)),f.value?(x(),P("span",$v)):pe("",!0),q(" "+z(f.value?"Đang gửi...":"Gửi đánh giá"),1)],8,Av),i("button",{type:"button",class:"btn btn-outline-secondary",onClick:y,disabled:f.value},b[13]||(b[13]=[i("i",{class:"fas fa-times me-2"},null,-1),q("Hủy ")]),8,xv)])],32)])])):pe("",!0),h.value?(x(),P("div",Rv,[b[15]||(b[15]=i("i",{class:"fas fa-check-circle me-2"},null,-1)),b[16]||(b[16]=i("strong",null,"Cảm ơn bạn!",-1)),b[17]||(b[17]=q(" Đánh giá của bạn đã được gửi thành công. ")),i("button",{type:"button",class:"btn-close",onClick:b[5]||(b[5]=v=>h.value=!1)})])):pe("",!0)])}}},Ov=st(Pv,[["__scopeId","data-v-d2a00896"]]),Dv={id:"productDetail",class:"bg-white"},Lv={class:"container mt-4"},Nv={"aria-label":"breadcrumb"},Mv={class:"breadcrumb mb-0"},Hv={class:"breadcrumb-item"},Uv={key:0,class:"breadcrumb-item"},Bv=["href"],Kv={key:1,class:"breadcrumb-item active"},jv={class:"container my-5"},Fv={key:0,class:"row"},Gv={key:1,class:"row"},Vv={class:"col-12 text-center"},zv={class:"debug-info mt-4 p-3 bg-light rounded text-start"},Yv={key:2,class:"row animate-fade-in"},qv={class:"col-lg-6"},Wv={class:"position-relative"},Qv=["src","alt"],Jv={class:"row g-2 mt-3"},Xv={class:"product-thumbnail-container"},Zv=["src","onClick","alt"],ey={class:"col-lg-6"},ty={class:"ps-lg-4"},ny={class:"fs-2 fw-bold text-dark mb-3"},sy={class:"mb-3"},oy={key:0,class:"feature-badge"},ry={class:"d-flex align-items-center mb-3"},ay={class:"text-warning me-3"},iy={class:"text-muted ms-3"},ly={class:"mb-4"},cy={key:0,class:"discount-badge"},uy={class:"d-flex align-items-baseline"},dy={key:0,class:"original-price"},fy={class:"detail-price"},hy={key:1,class:"text-muted"},gy={class:"stock-info mb-4"},my={class:"row"},py={class:"col-6"},vy={class:"text-center"},yy={class:"mt-2"},by={class:"small text-muted"},Ty={key:0},wy={key:1},_y={class:"row g-3 mb-4"},Cy={class:"col-md-4"},Sy={class:"quantity-selector d-flex"},ky=["disabled"],Ey=["max","disabled"],Ay=["disabled"],Iy={key:0,class:"text-danger"},$y={key:1,class:"text-muted"},xy={class:"col-md-8"},Ry={class:"d-flex gap-2"},Py=["disabled"],Oy=["disabled"],Dy={class:"row g-2 mt-3"},Ly={class:"col-4"},Ny={class:"col-4"},My={class:"col-4"},Hy={key:0,class:"container my-5"},Uy={class:"nav nav-pills product-tabs justify-content-center mb-4",role:"tablist"},By={class:"nav-item",role:"presentation"},Ky={class:"nav-item",role:"presentation"},jy={class:"tab-content",style:{"min-height":"400px",background:"white","border-radius":"10px",padding:"20px"}},Fy={class:"tab-pane",style:{display:"block"}},Gy={class:"row"},Vy={class:"col-lg-8 mx-auto"},zy={class:"card border-0 shadow-sm rounded-4"},Yy={class:"card-body p-5"},qy={class:"text-primary mb-4"},Wy={class:"lead"},Qy={class:"mt-4"},Jy={class:"list-unstyled small mb-0"},Xy={key:0},Zy={key:0},eb={key:1},tb={key:2},nb={class:"tab-pane",style:{display:"block",width:"100%"}},sb={key:1,class:"container my-5"},ob={class:"row g-4"},ya=1,rb={__name:"ProductDetail",props:{productId:{type:[Number,String],required:!0}},emits:["go-home","view-product"],setup(e,{emit:t}){const n=e,s=en(),{products:o,addToCart:r,formatPrice:a,showNotification:l}=xn(),{currentProduct:c,quantity:d,selectedImageIndex:u,activeTab:f,currentReviews:h,currentImages:m,discountPercentage:_,relatedProducts:y,currentCategory:U,isLoading:L,loadProduct:b,changeQuantity:T,addToCartWithQuantity:v,buyNow:$,addToWishlist:R,shareProduct:C,compareProduct:V}=Fp(n.productId,s),{getProductStock:I,getStockStatus:j,getStockStatusClass:N,getStockStatusIcon:w}=vl(),S=Z(()=>{const le=c.value?.maSP||c.value?.id;return le?`${le}@${ya}`:null}),E=Q(null),ue=Q("Đang kiểm tra..."),F=Q("text-muted"),ie=Q("fas fa-spinner fa-spin"),re=Q("text-muted"),oe=Z(()=>c.value?.description||"Sản phẩm chất lượng cao, được chọn lọc kỹ càng để đảm bảo tươi ngon và an toàn cho sức khỏe. Được nuôi trồng theo quy trình khép kín, đảm bảo vệ sinh an toàn thực phẩm."),Ee=le=>{console.log("🎉 New review submitted:",le),c.value&&c.value.reviews&&c.value.reviews.unshift(le),l("Cảm ơn bạn đã đánh giá sản phẩm!","success")},Te=async()=>{const le=c.value?.maSP||c.value?.id;if(le)try{const A=await I(le,ya);E.value=A,S.value&&(ue.value=j.value(S.value),F.value=N.value(S.value),ie.value=w.value(S.value),re.value=F.value)}catch(A){console.error("Error loading stock info:",A),ue.value="Không xác định",F.value="text-muted",ie.value="fas fa-question-circle",re.value="text-muted"}};return rt(()=>n.productId,async le=>{console.log("🔄 ProductDetail - ProductId changed to:",le),console.log("🔄 ProductDetail - currentProduct before load:",c.value),le&&(await b(le),console.log("🔄 ProductDetail - currentProduct after load:",c.value),await Te())},{immediate:!0}),rt(h,le=>{console.log("🔄 ProductDetail - currentReviews changed:",le),console.log("🔄 ProductDetail - currentReviews length:",le?.length||0)},{immediate:!0}),rt(c,async le=>{(le?.maSP||le?.id)&&await Te()},{immediate:!1,deep:!1}),rt(f,le=>{console.log("🔄 ProductDetail - activeTab changed to:",le)},{immediate:!0}),vt(async()=>{console.log("🚀 ProductDetail - Component mounted with productId:",n.productId),console.log("🚀 ProductDetail - currentProduct on mount:",c.value),n.productId&&(await b(n.productId),console.log("🚀 ProductDetail - currentProduct after mount load:",c.value),await Te())}),(le,A)=>(x(),P("div",Dv,[i("div",Lv,[i("nav",Nv,[i("ol",Mv,[i("li",Hv,[i("a",{href:"#",onClick:A[0]||(A[0]=je(O=>le.$emit("go-home"),["prevent"])),class:"text-decoration-none"},A[13]||(A[13]=[i("i",{class:"fas fa-home me-1"},null,-1),q("Trang chủ ")]))]),K(U)?(x(),P("li",Uv,[i("a",{href:`#category-${K(U).id}`,class:"text-decoration-none"},z(K(U).name),9,Bv)])):pe("",!0),K(c)?(x(),P("li",Kv,z(K(c).name),1)):pe("",!0)])])]),i("div",jv,[!K(c)&&K(L)?(x(),P("div",Fv,A[14]||(A[14]=[i("div",{class:"col-12 text-center py-5"},[i("div",{class:"spinner-border text-primary",role:"status"},[i("span",{class:"visually-hidden"},"Đang tải sản phẩm...")]),i("p",{class:"text-muted mt-3"},"Đang tải thông tin sản phẩm...")],-1)]))):K(c)?(x(),P("div",Yv,[i("div",qv,[i("div",Wv,[i("img",{src:K(m)[K(u)]?.url||K(c).image,class:"w-100 product-image-main shadow-product",alt:K(c).name},null,8,Qv),A[24]||(A[24]=i("div",{class:"position-absolute top-0 end-0 m-3 bg-dark bg-opacity-75 text-white p-2 rounded"},[i("i",{class:"fas fa-search-plus me-1"}),q("Zoom ")],-1))]),i("div",Jv,[(x(!0),P(be,null,Le(K(m),(O,J)=>(x(),P("div",{key:J,class:"col-3"},[i("div",Xv,[i("img",{src:O.url,class:ke(["w-100 product-thumbnail",{active:J===K(u)}]),onClick:ee=>u.value=J,alt:O.alt},null,10,Zv)])]))),128))])]),i("div",ey,[i("div",ty,[i("h1",ny,z(K(c).name),1),i("div",sy,[A[25]||(A[25]=i("span",{class:"feature-badge"},"Tươi sống",-1)),A[26]||(A[26]=i("span",{class:"feature-badge"},"Chất lượng cao",-1)),A[27]||(A[27]=i("span",{class:"feature-badge"},"An toàn",-1)),K(c).originalPrice?(x(),P("span",oy,"Giảm giá")):pe("",!0)]),i("div",ry,[i("div",ay,[(x(),P(be,null,Le(5,O=>i("i",{key:O,class:"fas fa-star"})),64)),A[28]||(A[28]=i("span",{class:"text-dark ms-2 fw-semibold"},"4.8",-1))]),A[30]||(A[30]=i("span",{class:"text-muted"},"|",-1)),i("span",iy,[A[29]||(A[29]=i("i",{class:"fas fa-shopping-cart me-1"},null,-1)),q(z(Math.floor(Math.random()*500)+100)+" đã bán ",1)])]),i("div",ly,[K(_)>0?(x(),P("div",cy," -"+z(K(_))+"% GIẢM GIÁ ",1)):pe("",!0),i("div",uy,[K(c).originalPrice?(x(),P("span",dy,z(K(a)(K(c).originalPrice)),1)):pe("",!0),i("span",fy,z(K(a)(K(c).price)),1)]),K(c).originalPrice?(x(),P("small",hy," Tiết kiệm: "+z(K(a)(K(c).originalPrice-K(c).price)),1)):pe("",!0)]),i("div",gy,[i("div",my,[i("div",py,[i("div",vy,[i("i",{class:ke([ie.value,re.value])},null,2),i("div",yy,[i("strong",{class:ke(F.value)},z(ue.value),3),i("div",by,[E.value!==null?(x(),P("span",Ty,"Còn "+z(E.value)+" sản phẩm",1)):(x(),P("span",wy,"Đang kiểm tra..."))])])])]),A[31]||(A[31]=Nt('<div class="col-6" data-v-7c5929bf><div class="text-center" data-v-7c5929bf><i class="fas fa-shield-alt text-primary fs-4" data-v-7c5929bf></i><div class="mt-2" data-v-7c5929bf><strong class="text-primary" data-v-7c5929bf>Chất lượng</strong><div class="small text-muted" data-v-7c5929bf>Đảm bảo tươi ngon</div></div></div></div>',1))])]),i("div",_y,[i("div",Cy,[A[34]||(A[34]=i("label",{class:"form-label fw-semibold"},"Số lượng:",-1)),i("div",Sy,[i("button",{class:"quantity-btn",onClick:A[2]||(A[2]=O=>K(T)(-1,E.value)),disabled:E.value===0},A[32]||(A[32]=[i("i",{class:"fas fa-minus"},null,-1)]),8,ky),ht(i("input",{type:"number",class:"form-control quantity-input","onUpdate:modelValue":A[3]||(A[3]=O=>Ve(d)?d.value=O:null),min:1,max:E.value||10,disabled:E.value===0},null,8,Ey),[[wn,K(d)]]),i("button",{class:"quantity-btn",onClick:A[4]||(A[4]=O=>K(T)(1,E.value)),disabled:E.value===0},A[33]||(A[33]=[i("i",{class:"fas fa-plus"},null,-1)]),8,Ay)]),E.value===0?(x(),P("small",Iy,"Sản phẩm đã hết hàng")):E.value!==null?(x(),P("small",$y,"Còn "+z(E.value)+" sản phẩm",1)):pe("",!0)]),i("div",xy,[A[37]||(A[37]=i("label",{class:"form-label fw-semibold"},"Hành động:",-1)),i("div",Ry,[i("button",{class:"btn add-to-cart-btn text-white flex-fill",onClick:A[5]||(A[5]=(...O)=>K(v)&&K(v)(...O)),disabled:E.value===0},[A[35]||(A[35]=i("i",{class:"fas fa-cart-plus me-2"},null,-1)),q(z(E.value===0?"Hết hàng":"Thêm vào giỏ"),1)],8,Py),i("button",{class:"btn buy-now-btn text-white flex-fill",onClick:A[6]||(A[6]=(...O)=>K($)&&K($)(...O)),disabled:E.value===0},[A[36]||(A[36]=i("i",{class:"fas fa-bolt me-2"},null,-1)),q(z(E.value===0?"Hết hàng":"Mua ngay"),1)],8,Oy)])])]),A[41]||(A[41]=Nt('<div class="delivery-info p-3" data-v-7c5929bf><h6 class="fw-bold text-success mb-3" data-v-7c5929bf><i class="fas fa-shipping-fast me-2" data-v-7c5929bf></i>Thông tin giao hàng </h6><div class="row g-3" data-v-7c5929bf><div class="col-md-6" data-v-7c5929bf><div class="d-flex align-items-center" data-v-7c5929bf><i class="fas fa-clock text-success me-3" data-v-7c5929bf></i><div data-v-7c5929bf><strong data-v-7c5929bf>Giao hàng nhanh</strong><div class="small text-muted" data-v-7c5929bf>Trong 2 giờ</div></div></div></div><div class="col-md-6" data-v-7c5929bf><div class="d-flex align-items-center" data-v-7c5929bf><i class="fas fa-truck text-success me-3" data-v-7c5929bf></i><div data-v-7c5929bf><strong data-v-7c5929bf>Miễn phí ship</strong><div class="small text-muted" data-v-7c5929bf>Đơn từ 200k</div></div></div></div></div></div>',1)),i("div",Dy,[i("div",Ly,[i("button",{class:"btn btn-outline-primary w-100 rounded-pill",onClick:A[7]||(A[7]=(...O)=>K(R)&&K(R)(...O))},A[38]||(A[38]=[i("i",{class:"fas fa-heart me-1"},null,-1),q("Yêu thích ")]))]),i("div",Ny,[i("button",{class:"btn btn-outline-secondary w-100 rounded-pill",onClick:A[8]||(A[8]=(...O)=>K(C)&&K(C)(...O))},A[39]||(A[39]=[i("i",{class:"fas fa-share-alt me-1"},null,-1),q("Chia sẻ ")]))]),i("div",My,[i("button",{class:"btn btn-outline-info w-100 rounded-pill",onClick:A[9]||(A[9]=(...O)=>K(V)&&K(V)(...O))},A[40]||(A[40]=[i("i",{class:"fas fa-balance-scale me-1"},null,-1),q("So sánh ")]))])])])])])):(x(),P("div",Gv,[i("div",Vv,[A[22]||(A[22]=i("h3",null,"Không tìm thấy sản phẩm",-1)),A[23]||(A[23]=i("p",{class:"text-muted"},"Sản phẩm bạn tìm kiếm không tồn tại.",-1)),i("div",zv,[A[20]||(A[20]=i("h6",{class:"text-muted"},"Debug Info:",-1)),i("p",null,[A[15]||(A[15]=i("strong",null,"Product ID:",-1)),q(" "+z(n.productId),1)]),i("p",null,[A[16]||(A[16]=i("strong",null,"Current Product:",-1)),q(" "+z(K(c)),1)]),i("p",null,[A[17]||(A[17]=i("strong",null,"Is Loading:",-1)),q(" "+z(K(L)),1)]),i("p",null,[A[18]||(A[18]=i("strong",null,"Products Count:",-1)),q(" "+z(K(o).length),1)]),i("p",null,[A[19]||(A[19]=i("strong",null,"Available Product IDs:",-1)),q(" "+z(K(o).map(O=>O.id).join(", ")),1)])]),i("button",{class:"btn btn-primary mt-3",onClick:A[1]||(A[1]=O=>le.$emit("go-home"))},A[21]||(A[21]=[i("i",{class:"fas fa-home me-2"},null,-1),q("Về trang chủ ")]))])]))]),K(c)?(x(),P("div",Hy,[i("ul",Uy,[i("li",By,[i("button",{class:ke(["nav-link",{active:K(f)==="description"}]),onClick:A[10]||(A[10]=O=>f.value="description")},A[42]||(A[42]=[i("i",{class:"fas fa-info-circle me-2"},null,-1),q("Mô tả sản phẩm ")]),2)]),i("li",Ky,[i("button",{class:ke(["nav-link",{active:K(f)==="reviews"}]),onClick:A[11]||(A[11]=O=>f.value="reviews")},A[43]||(A[43]=[i("i",{class:"fas fa-star me-2"},null,-1),q("Đánh giá ")]),2)])]),i("div",jy,[ht(i("div",Fy,[i("div",Gy,[i("div",Vy,[i("div",zy,[i("div",Yy,[i("h5",qy,[A[44]||(A[44]=i("i",{class:"fas fa-info-circle me-2"},null,-1)),q("Về sản phẩm "+z(K(c).name),1)]),i("p",Wy,z(oe.value),1),A[53]||(A[53]=i("div",{class:"feature-highlight"},[i("h6",{class:"text-primary mb-2"},[i("i",{class:"fas fa-certificate me-2"}),q("Cam kết chất lượng ")]),i("p",{class:"mb-0"}," Chúng tôi cam kết 100% sản phẩm tươi ngon, an toàn. Nếu không hài lòng, hoàn tiền trong 24h. ")],-1)),i("div",Qy,[A[52]||(A[52]=i("h6",{class:"text-primary mb-3"},[i("i",{class:"fas fa-list-ul me-2"}),q("Thông số sản phẩm ")],-1)),i("ul",Jy,[K(c).weight?(x(),P("li",Xy,[A[45]||(A[45]=i("i",{class:"fas fa-weight-hanging text-muted me-2"},null,-1)),A[46]||(A[46]=q(" Trọng lượng: ")),i("strong",null,z(K(c).weight),1),A[47]||(A[47]=q()),K(c).weightUnit?(x(),P("span",Zy,z(K(c).weightUnit),1)):pe("",!0)])):pe("",!0),K(c).weightUnit&&!K(c).weight?(x(),P("li",eb,[A[48]||(A[48]=i("i",{class:"fas fa-balance-scale text-muted me-2"},null,-1)),A[49]||(A[49]=q(" Đơn vị tính: ")),i("strong",null,z(K(c).weightUnit),1)])):pe("",!0),K(c).shelfLifeDays?(x(),P("li",tb,[A[50]||(A[50]=i("i",{class:"fas fa-hourglass-half text-muted me-2"},null,-1)),A[51]||(A[51]=q(" Hạn sử dụng: ")),i("strong",null,z(K(c).shelfLifeDays)+" ngày",1)])):pe("",!0)])])])])])])],512),[[es,K(f)==="description"]]),ht(i("div",nb,[ge(Ov,{product:K(c),onReviewSubmitted:Ee},null,8,["product"]),ge(av,{product:K(c),reviews:K(h)},null,8,["product","reviews"])],512),[[es,K(f)==="reviews"]])])])):pe("",!0),K(y).length>0?(x(),P("div",sb,[A[54]||(A[54]=i("h3",{class:"section-title fs-2 fw-bold text-dark mb-4"},[i("i",{class:"fas fa-heart text-danger me-3"}),q("Sản phẩm liên quan ")],-1)),i("div",ob,[(x(!0),P(be,null,Le(K(y),O=>(x(),P("div",{key:O.id,class:"col-lg-3 col-md-4 col-sm-6"},[ge(yl,{product:O,formatPrice:K(a),onAddToCart:K(r),onViewDetail:A[12]||(A[12]=J=>le.$emit("view-product",J))},null,8,["product","formatPrice","onAddToCart"])]))),128))])])):pe("",!0)]))}},ab=st(rb,[["__scopeId","data-v-7c5929bf"]]),ib={__name:"ProductDetail",setup(e){const t=en(),n=tf(),s=Z(()=>n.params.id),o=()=>{t.push({name:"Home"})},r=a=>{t.push({name:"ProductDetail",params:{id:a}})};return(a,l)=>(x(),P("div",null,[ge(ab,{productId:s.value,onGoHome:o,onViewProduct:r},null,8,["productId"])]))}},lb=st(ib,[["__scopeId","data-v-2119db9b"]]),cb={class:"cart-page"},ub={class:"container py-5 mt-5"},db={"aria-label":"breadcrumb",class:"mb-4"},fb={class:"breadcrumb"},hb={class:"breadcrumb-item"},gb={key:0,class:"row"},mb={class:"col-lg-8"},pb={class:"card"},vb={class:"card-body"},yb={class:"table-responsive"},bb={class:"table align-middle"},Tb={class:"table-light"},wb={width:"50"},_b={class:"form-check"},Cb=["checked"],Sb={class:"form-check"},kb=["checked","onChange","id"],Eb={class:"d-flex align-items-center"},Ab=["src","alt","onClick"],Ib=["onClick"],$b={class:"text-muted"},xb={class:"fw-bold text-danger"},Rb={class:"quantity-controls"},Pb=["onClick","disabled"],Ob={class:"quantity-display"},Db=["onClick"],Lb={class:"fw-bold text-danger fs-6"},Nb=["onClick"],Mb={class:"col-lg-4"},Hb={class:"card sticky-top",style:{top:"100px"}},Ub={class:"card-body"},Bb={class:"order-summary"},Kb={class:"d-flex justify-content-between mb-2"},jb={class:"d-flex justify-content-between mb-3"},Fb={class:"text-danger fs-5"},Gb=["disabled"],Vb={key:1,class:"row"},zb={class:"col-12"},Yb={class:"empty-cart text-center py-5"},qb={__name:"Cart",setup(e){const t=en(),{formatPrice:n,getCategoryById:s,products:o,showNotification:r}=xn(),{cart:a,cartCount:l,removeFromCart:c,updateCartQuantity:d,reloadCartFromBackend:u,getBackendCartSnapshot:f}=Xs(),{createOrderFromCart:h}=pl(),m=Q(new Set);Q("123 Đường ABC, Quận 1, TP.HCM");const _=Z(()=>a.value.map(S=>{const E=o.value.find(ue=>ue.id===S.productId);return{...S,product:E}}).filter(S=>S.product)),y=Z(()=>_.value.reduce((S,E)=>S+(E.product?.price||0)*E.quantity,0)),U=Z(()=>y.value>=2e5?0:3e4);Z(()=>y.value+U.value),Z(()=>_.value.reduce((S,E)=>S+E.quantity,0));const L=Z(()=>_.value.filter(S=>m.value.has(S.productId))),b=Z(()=>L.value.reduce((S,E)=>S+(E.product?.price||0)*E.quantity,0)),T=Z(()=>b.value),v=Z(()=>L.value.reduce((S,E)=>S+E.quantity,0)),$=Z(()=>_.value.length>0&&_.value.every(S=>m.value.has(S.productId))),R=S=>{t.push({name:"ProductDetail",params:{id:S}})},C=S=>{const E=s(S);return E?E.name:"Không xác định"},V=(S,E)=>{if(E<=0){const ue=_.value.find(F=>F.productId===S);I(S,ue?.product?.name||"Sản phẩm")}else d(S,E)},I=(S,E)=>{confirm(`Bạn có chắc muốn xóa "${E}" khỏi giỏ hàng?`)&&(c(S),m.value.delete(S),r(`Đã xóa ${E} khỏi giỏ hàng!`,"info"))},j=async()=>{try{if(m.value.size===0){r("Vui lòng chọn sản phẩm để thanh toán!","warning");return}const S=JSON.parse(localStorage.getItem("easymart-user")||"null");if(!S){const O=Array.from(m.value);localStorage.setItem("easymart-selected-items",JSON.stringify(O)),localStorage.setItem("easymart-redirect-after-login","/checkout"),r("Vui lòng đăng nhập để tiến hành thanh toán!","warning"),t.push("/login");return}console.log("🧩 Loading cart data before checkout..."),await u();const E=a.value;try{console.log("🔍 Backend cart items:",E),console.log("🔍 Backend cart items type:",typeof E),console.log("🔍 Backend cart items length:",E?.length)}catch(O){console.error("❌ Error logging backend cart items:",O),r("Lỗi khi xử lý dữ liệu giỏ hàng. Vui lòng thử lại.","error");return}console.log("🔍 User object from localStorage:",S);const ue=await f(),F=ue.maKH||S?.maKH||S?.id||S?.maNguoiDung||localStorage.getItem("easymart-user-id");if(console.log("🔍 maKH resolved:",F),console.log("🔍 cartSnapshot.maKH:",ue.maKH),!F){r("Không thể xác định mã khách hàng. Vui lòng đăng nhập lại.","error");return}const ie=S?.maNV||"NV001";console.log("🔑 User info for checkout:"),console.log("   - user object:",S),console.log("   - maKH resolved:",F),console.log("   - maNV resolved:",ie),console.log("🔍 selectedItems.value:",m.value);const re=Array.from(m.value);console.log("🎯 Selected product IDs:",re),console.log("🔍 Filtering backend items..."),console.log("🔍 backendCartItems:",E),console.log("🔍 selectedProductIds:",re);const oe=E.filter(O=>(console.log("🔍 Checking backendItem:",O),console.log("🔍 backendItem.productId:",O.productId),console.log("🔍 selectedProductIds.includes(backendItem.productId):",re.includes(O.productId)),re.includes(O.productId)));console.log("📦 Selected backend items:",oe);try{console.log("🔍 Backend cart items structure:"),E.forEach((O,J)=>{console.log(`   Item ${J}:`,{keys:Object.keys(O),values:Object.values(O)})}),console.log("🔍 Selected backend items structure:"),oe.forEach((O,J)=>{console.log(`   Selected Item ${J}:`,{keys:Object.keys(O),values:Object.values(O)}),console.log(`   Selected Item ${J} details:`,{productId:O.productId,itemId:O.itemId,quantity:O.quantity,price:O.price}),console.log(`   Selected Item ${J} original data:`,O.originalData)})}catch(O){console.error("❌ Error logging cart structure:",O),r("Lỗi khi xử lý cấu trúc giỏ hàng. Vui lòng thử lại.","error");return}const Ee=O=>O.itemId,Te=oe.filter(O=>!Ee(O));if(Te.length>0){console.warn("⚠️ Some selected items are missing cart item ID. Items:",Te.map(O=>O.productId)),console.log("🔍 Available fields for missing items:"),Te.forEach(O=>{console.log(`   Product ${O.productId}:`,Object.keys(O))}),r("Không thể tạo hóa đơn: một số sản phẩm chưa có ID giỏ hàng. Vui lòng làm mới giỏ hàng và thử lại.","error");return}const le=oe.map(O=>String(Ee(O)));console.log("🆔 Selected cart item IDs:",le);const A={maKH:F,maNV:ie||"NV001",selectedCartItemIds:le,trangThai:0};console.log("🧾 Building invoice payload from cart:"),console.log("   - maKH:",A.maKH),console.log("   - maNV:",A.maNV),console.log("   - selectedCartItemIds:",A.selectedCartItemIds),console.log("   - trangThai:",A.trangThai);try{r("Đang tạo hóa đơn từ giỏ...","info"),console.log("🚀 Calling createOrderFromCart with payload:",A);const O=await h(A);if(console.log("✅ createOrderFromCart result:",O),O?.success){r("Tạo hóa đơn thành công!","success");const J={maHD:O.result?.maHD,maKH:O.result?.maKH,items:O.result?.items||[],tongTien:O.result?.tongTien,ngayLap:O.result?.ngayLap,trangThai:O.result?.trangThai};localStorage.setItem("easymart-invoice",JSON.stringify(J)),localStorage.setItem("easymart-selected-items",JSON.stringify(le)),console.log("🗑️ Items đã được chuyển sang hóa đơn, clearing cart...");try{await u(),console.log("✅ Cart reloaded after order creation")}catch(ee){console.warn("⚠️ Failed to reload cart after order creation:",ee)}setTimeout(()=>{t.push("/checkout")},1e3)}else r(O?.message||"Không thể tạo hóa đơn","error")}catch(O){console.error("❌ Checkout failed:",O),r(O?.message||"Thanh toán thất bại","error")}}catch(S){console.error("❌ Checkout function error:",S),r("Lỗi không mong muốn trong quá trình thanh toán. Vui lòng thử lại.","error")}},N=S=>{m.value.has(S)?m.value.delete(S):m.value.add(S)},w=()=>{$.value?m.value.clear():_.value.forEach(S=>{m.value.add(S.productId)})};return(S,E)=>{const ue=$n("router-link");return x(),P("div",cb,[i("div",ub,[i("nav",db,[i("ol",fb,[i("li",hb,[ge(ue,{to:"/",class:"text-decoration-none"},{default:Ne(()=>E[0]||(E[0]=[i("i",{class:"fas fa-home"},null,-1),q(" Trang chủ ")])),_:1,__:[0]})]),E[1]||(E[1]=i("li",{class:"breadcrumb-item active","aria-current":"page"},[i("i",{class:"fas fa-shopping-cart"}),q(" Giỏ hàng ")],-1))])]),E[20]||(E[20]=i("h2",{class:"mb-4"},[i("i",{class:"fas fa-shopping-cart text-primary me-2"}),q(" Giỏ hàng của bạn ")],-1)),K(a).length>0?(x(),P("div",gb,[i("div",mb,[i("div",pb,[i("div",vb,[i("div",yb,[i("table",bb,[i("thead",Tb,[i("tr",null,[i("th",wb,[i("div",_b,[i("input",{class:"form-check-input",type:"checkbox",checked:$.value,onChange:w,id:"selectAll"},null,40,Cb),E[2]||(E[2]=i("label",{class:"form-check-label",for:"selectAll"}," Tất cả ",-1))])]),E[3]||(E[3]=i("th",null,"Sản phẩm",-1)),E[4]||(E[4]=i("th",null,"Đơn giá",-1)),E[5]||(E[5]=i("th",null,"Số lượng",-1)),E[6]||(E[6]=i("th",null,"Thành tiền",-1)),E[7]||(E[7]=i("th",null,null,-1))])]),i("tbody",null,[(x(!0),P(be,null,Le(_.value,F=>(x(),P("tr",{key:F.productId},[i("td",null,[i("div",Sb,[i("input",{class:"form-check-input",type:"checkbox",checked:m.value.has(F.productId),onChange:ie=>N(F.productId),id:`item-${F.productId}`},null,40,kb)])]),i("td",null,[i("div",Eb,[i("img",{src:F.product?.image,alt:F.product?.name,class:"cart-item-image me-3",onClick:ie=>R(F.productId)},null,8,Ab),i("div",null,[i("h6",{class:"mb-1 product-name",onClick:ie=>R(F.productId)},z(F.product?.name),9,Ib),i("small",$b," Danh mục: "+z(C(F.product?.categoryId)),1)])])]),i("td",null,[i("span",xb,z(K(n)(F.product?.price||0)),1)]),i("td",null,[i("div",Rb,[i("button",{class:"btn btn-outline-secondary btn-sm",onClick:ie=>V(F.productId,F.quantity-1),disabled:F.quantity<=1},E[8]||(E[8]=[i("i",{class:"fas fa-minus"},null,-1)]),8,Pb),i("span",Ob,z(F.quantity),1),i("button",{class:"btn btn-outline-secondary btn-sm",onClick:ie=>V(F.productId,F.quantity+1)},E[9]||(E[9]=[i("i",{class:"fas fa-plus"},null,-1)]),8,Db)])]),i("td",null,[i("span",Lb,z(K(n)((F.product?.price||0)*F.quantity)),1)]),i("td",null,[i("button",{class:"btn btn-outline-danger btn-sm",onClick:ie=>I(F.productId,F.product?.name),title:"Xóa sản phẩm"},E[10]||(E[10]=[i("i",{class:"fas fa-trash"},null,-1)]),8,Nb)])]))),128))])])])])])]),i("div",Mb,[i("div",Hb,[E[15]||(E[15]=i("div",{class:"card-header bg-primary text-white"},[i("h5",{class:"mb-0"},[i("i",{class:"fas fa-receipt me-2"}),q(" Tổng kết đơn hàng ")])],-1)),i("div",Ub,[i("div",Bb,[i("div",Kb,[i("span",null,"Đã chọn ("+z(v.value)+" sản phẩm):",1),i("span",null,z(K(n)(b.value)),1)]),E[14]||(E[14]=i("hr",null,null,-1)),i("div",jb,[E[11]||(E[11]=i("strong",{class:"fs-5"},"Tổng cộng:",-1)),i("strong",Fb,z(K(n)(T.value)),1)]),i("button",{class:"btn btn-primary w-100 mb-2 py-2",onClick:j,disabled:m.value.size===0},E[12]||(E[12]=[i("i",{class:"fas fa-credit-card me-2"},null,-1),q(" Tiến hành thanh toán ")]),8,Gb),ge(ue,{to:"/",class:"btn btn-outline-secondary w-100"},{default:Ne(()=>E[13]||(E[13]=[i("i",{class:"fas fa-arrow-left me-2"},null,-1),q(" Tiếp tục mua sắm ")])),_:1,__:[13]})])])])])])):(x(),P("div",Vb,[i("div",zb,[i("div",Yb,[E[17]||(E[17]=i("div",{class:"empty-cart-icon mb-4"},[i("i",{class:"fas fa-shopping-cart fa-5x text-muted"})],-1)),E[18]||(E[18]=i("h3",{class:"text-muted mb-3"},"Giỏ hàng trống",-1)),E[19]||(E[19]=i("p",{class:"text-muted mb-4"},"Bạn chưa có sản phẩm nào trong giỏ hàng",-1)),ge(ue,{to:"/",class:"btn btn-primary btn-lg"},{default:Ne(()=>E[16]||(E[16]=[i("i",{class:"fas fa-shopping-bag me-2"},null,-1),q(" Bắt đầu mua sắm ")])),_:1,__:[16]})])])]))])])}}},Wb=st(qb,[["__scopeId","data-v-0f60b109"]]),Qb=[{path:"/",name:"Home",component:jp,meta:{title:"EasyMart - Siêu thị thực phẩm online",description:"Mua sắm thực phẩm tươi sống, hàng hóa chất lượng cao với giá tốt nhất"}},{path:"/promotions",name:"Promotions",component:()=>Ke(()=>import("./Promotions-ChseY8ki.js"),__vite__mapDeps([0,1])),meta:{title:"Khuyến mãi - EasyMart",description:"Khám phá các ưu đãi và mã giảm giá hấp dẫn tại EasyMart"}},{path:"/product/:id",name:"ProductDetail",component:lb,props:!0,meta:{title:"Chi tiết sản phẩm - EasyMart",description:"Xem chi tiết sản phẩm với thông tin đầy đủ, hình ảnh chất lượng cao"}},{path:"/cart",name:"Cart",component:Wb,meta:{title:"Giỏ hàng - EasyMart",description:"Xem và quản lý sản phẩm trong giỏ hàng của bạn"}},{path:"/checkout",name:"Checkout",component:()=>Ke(()=>import("./Checkout-DiC4gs-H.js"),__vite__mapDeps([2,3])),meta:{title:"Thanh toán - EasyMart",description:"Tiến hành thanh toán đơn hàng"}},{path:"/payment-success",name:"PaymentSuccess",component:()=>Ke(()=>import("./PaymentSuccess-BdyAO8FZ.js"),__vite__mapDeps([4,5])),meta:{title:"Thanh toán thành công - EasyMart",description:"Xác nhận đơn hàng đã được thanh toán thành công"}},{path:"/search",name:"Search",component:()=>Ke(()=>import("./Search-Cnw5C4KS.js"),__vite__mapDeps([6,7])),meta:{title:"Tìm kiếm sản phẩm - EasyMart",description:"Tìm kiếm và khám phá hàng nghìn sản phẩm chất lượng tại EasyMart"}},{path:"/categories",name:"Categories",component:()=>Ke(()=>import("./Categories-CpwFVewK.js"),__vite__mapDeps([8,9])),meta:{title:"Danh mục sản phẩm - EasyMart",description:"Khám phá tất cả danh mục sản phẩm tại EasyMart"}},{path:"/category/:id",name:"Category",component:()=>Ke(()=>import("./Category-BvikqT9e.js"),__vite__mapDeps([10,11])),props:!0,meta:{title:"Danh mục sản phẩm - EasyMart",description:"Xem tất cả sản phẩm trong danh mục"}},{path:"/about",name:"About",component:()=>Ke(()=>import("./About-DFt95wEK.js"),__vite__mapDeps([12,13])),meta:{title:"Giới thiệu - EasyMart",description:"Thông tin về EasyMart - Siêu thị thực phẩm online uy tín"}},{path:"/contact",name:"Contact",component:()=>Ke(()=>import("./Contact-DqRWzNQk.js"),__vite__mapDeps([14,15])),meta:{title:"Liên hệ - EasyMart",description:"Thông tin liên hệ và hỗ trợ khách hàng"}},{path:"/login",name:"Login",component:()=>Ke(()=>import("./Login-C0CfRfwu.js"),__vite__mapDeps([16,17,18,19])),meta:{title:"Đăng nhập - EasyMart",description:"Đăng nhập vào tài khoản EasyMart của bạn"}},{path:"/register",name:"Register",component:()=>Ke(()=>import("./Register-BU_PsUbi.js"),__vite__mapDeps([20,17,18,21])),meta:{title:"Đăng ký - EasyMart",description:"Tạo tài khoản mới tại EasyMart"}},{path:"/forgot-password",name:"ForgotPassword",component:()=>Ke(()=>import("./ForgotPassword-6-E1zI_4.js"),__vite__mapDeps([22,23])),meta:{title:"Quên mật khẩu - EasyMart",description:"Đặt lại mật khẩu tài khoản EasyMart của bạn"}},{path:"/profile",name:"Profile",component:()=>Ke(()=>import("./Profile-hCMgzTFJ.js"),__vite__mapDeps([24,25])),meta:{title:"Hồ sơ cá nhân - EasyMart",description:"Quản lý thông tin cá nhân và tài khoản EasyMart"}},{path:"/orders",name:"Orders",component:()=>Ke(()=>import("./Orders-DpZ5BaZd.js"),__vite__mapDeps([26,27])),meta:{title:"Đơn hàng của tôi - EasyMart",description:"Xem và quản lý tất cả đơn hàng của bạn tại EasyMart"}},{path:"/oauth2/success",name:"OAuth2Success",component:()=>Ke(()=>import("./OAuth2Success-R3yVrL8a.js"),__vite__mapDeps([28,29])),meta:{title:"Đăng nhập thành công - EasyMart",description:"Đang xử lý đăng nhập OAuth2..."}},{path:"/:pathMatch(.*)*",name:"NotFound",redirect:"/"}],cr=Zd({history:Id(),routes:Qb,scrollBehavior(e,t,n){return n||{top:0}}});cr.beforeEach((e,t,n)=>{if(e.meta.title&&(document.title=e.meta.title),e.meta.description){const o=document.querySelector('meta[name="description"]');o&&o.setAttribute("content",e.meta.description)}if(["Checkout","PaymentSuccess","Orders","Profile"].includes(e.name)&&!JSON.parse(localStorage.getItem("easymart-user")||"null")){localStorage.setItem("easymart-redirect-after-login",e.fullPath),n({name:"Login"});return}n()});cr.afterEach(()=>{});async function Jb(e,t={}){const n=Se();if(!n)throw new Error("No JWT token found. Please login again.");const s={headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",...t.headers}},o=e.startsWith("http")?e:`${ae.BASE_URL}${e}`;try{const r=await fetch(o,{...t,...s,headers:{...s.headers,...t.headers}});if(!r.ok){if(r.status===401){console.warn("JWT token expired or invalid"),cf(),localStorage.removeItem("easymart-user"),window.location.href="/login";return}const a=await r.json().catch(()=>null);throw new Error(a?.message||`API call failed: ${r.statusText}`)}return await r.json()}catch(r){throw console.error("API call error:",r),r}}function Xb(){const e=Se();if(!e)return!1;try{const t=JSON.parse(atob(e.split(".")[1])),n=Math.floor(Date.now()/1e3);return t.exp>n}catch(t){return console.error("Error validating token:",t),!1}}async function ba(){const e=Se();if(e)try{const t=JSON.parse(atob(e.split(".")[1])),n=Math.floor(Date.now()/1e3),s=t.exp-n;if(s<300&&s>0){console.log("Token expiring soon, attempting refresh...");const o=await Jb("/api/oauth2/get-jwt-token");o.success&&o.result.jwt_token&&(lf(o.result.jwt_token),console.log("✅ Token refreshed successfully"))}}catch(t){console.error("Auto-refresh failed:",t)}}function Zb(){return ba(),setInterval(ba,6e4)}const eT={USER:"easymart-user",TOKEN:"easymart-token",SELECTED_ITEMS:"easymart-selected-items",INVOICE:"easymart-invoice",LAST_ORDER:"easymart-last-order",REDIRECT_AFTER_LOGIN:"easymart-redirect-after-login"},tT=()=>{["easymart-user-email","easymart-user-role","easymart-user-id","easymart-user-maKH","easymart-orders","easymart-cart","easymart-auth","checkout-order","single-product-checkout"].forEach(t=>{try{localStorage.removeItem(t),console.log(`🧹 Removed deprecated localStorage key: ${t}`)}catch(n){console.warn(`Failed to remove ${t}:`,n)}})},nT=()=>{const e=Object.values(eT),t=Object.keys(localStorage),n=t.filter(o=>o.startsWith("easymart-")&&!e.includes(o)),s=t.filter(o=>!o.startsWith("easymart-")&&!o.startsWith("oauth2-")&&!o.startsWith("google-")&&!o.startsWith("facebook-"));return console.log("📊 LocalStorage Health Check:"),console.log(`   - Essential keys: ${e.length}`),console.log(`   - Deprecated keys: ${n.length}`),console.log(`   - Unknown keys: ${s.length}`),n.length>0&&console.warn("⚠️ Deprecated keys found:",n),s.length>0&&console.warn("⚠️ Unknown keys found:",s),{essential:e.length,deprecated:n.length,unknown:s.length,deprecatedKeys:n,unknownKeys:s}},sT=()=>{tT(),nT(),console.log("✅ LocalStorage Manager initialized")};sT();const bl=Wu(Am);bl.use(cr);Xb()&&(console.log("Starting JWT token auto-refresh..."),Zb());typeof window<"u"&&(setInterval(async()=>{const{autoLogoutIfInvalid:e}=os();await e()},3e4),window.addEventListener("focus",async()=>{const{autoLogoutIfInvalid:e}=os();await e()}),console.log("🔐 Auto-logout checking enabled (30s interval + on focus)"));bl.mount("#app");export{Se as A,ae as B,ye as C,tf as D,rt as E,be as F,Bi as G,zu as H,Wn as I,Qe as J,Lt as K,oT as L,Ui as M,nf as N,es as O,yl as P,pl as Q,Zt as R,lf as S,st as _,i as a,Nt as b,P as c,pe as d,Le as e,ke as f,q as g,Z as h,vt as i,ls as j,ge as k,Ne as l,$n as m,bn as n,x as o,en as p,Xs as q,Q as r,os as s,z as t,xn as u,ht as v,je as w,wn as x,K as y,Ku as z};
