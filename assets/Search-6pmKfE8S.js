import{_ as A,u as B,r as v,h as b,i as D,D as L,E as G,c as l,a as e,k as h,l as g,m as M,g as c,d as E,t as p,v as y,G as R,b as x,x as j,H as F,F as I,e as U,p as W,o as r,y as T,P as Z}from"./index-BLaNa9iG.js";const H={class:"search-page"},z={class:"container py-5 mt-5"},J={"aria-label":"breadcrumb",class:"mb-4"},O={class:"breadcrumb"},X={class:"breadcrumb-item"},Y={class:"search-header mb-4"},$={class:"d-flex justify-content-between align-items-center"},Q={key:0,class:"text-muted mb-0"},tt={class:"ms-2"},et={class:"search-sort"},st={class:"search-box mb-5"},at={class:"row justify-content-center"},ot={class:"col-md-8"},nt={class:"input-group"},lt={key:0},rt={class:"row g-4"},it={key:1,class:"no-results text-center py-5"},ct={class:"no-results-content"},dt={class:"text-muted mb-4"},ut={key:2,class:"initial-state text-center py-5"},mt={__name:"Search",setup(vt){const f=W(),k=L(),{products:q,searchQuery:d,formatPrice:C,addToCart:w,showNotification:S}=B(),n=v(""),a=v(""),u=v("relevance"),m=b(()=>!a.value||a.value.length<2?[]:q.value.filter(s=>{const t=a.value.toLowerCase();return s.name.toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t)})),V=b(()=>{const s=[...m.value];switch(u.value){case"name-asc":return s.sort((t,o)=>t.name.localeCompare(o.name));case"name-desc":return s.sort((t,o)=>o.name.localeCompare(t.name));case"price-asc":return s.sort((t,o)=>t.price-o.price);case"price-desc":return s.sort((t,o)=>o.price-t.price);default:return s}}),_=()=>{n.value.trim()&&(a.value=n.value.trim(),d.value=n.value.trim(),f.push({name:"Search",query:{q:a.value}}))},P=s=>{f.push({name:"ProductDetail",params:{id:s}})},K=s=>{S("Đã thêm vào danh sách yêu thích!","success")},N=()=>{};return D(()=>{const s=k.query.q;s&&(a.value=s,n.value=s,d.value=s)}),G(()=>k.query.q,s=>{s&&(a.value=s,n.value=s,d.value=s)}),(s,t)=>{const o=M("router-link");return r(),l("div",H,[e("div",z,[e("nav",J,[e("ol",O,[e("li",X,[h(o,{to:"/",class:"text-decoration-none"},{default:g(()=>t[2]||(t[2]=[e("i",{class:"fas fa-home"},null,-1),c(" Trang chủ ")])),_:1,__:[2]})]),t[3]||(t[3]=e("li",{class:"breadcrumb-item active","aria-current":"page"},[e("i",{class:"fas fa-search"}),c(" Kết quả tìm kiếm ")],-1))])]),e("div",Y,[e("div",$,[e("div",null,[t[5]||(t[5]=e("h2",{class:"mb-2"},[e("i",{class:"fas fa-search text-primary me-2"}),c(" Kết quả tìm kiếm ")],-1)),a.value?(r(),l("p",Q,[t[4]||(t[4]=c(" Tìm kiếm cho: ")),e("strong",null,'"'+p(a.value)+'"',1),e("span",tt,"("+p(m.value.length)+" sản phẩm)",1)])):E("",!0)]),e("div",et,[y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=i=>u.value=i),onChange:N,class:"form-select form-select-sm"},t[6]||(t[6]=[x('<option value="relevance" data-v-974de08a>Liên quan nhất</option><option value="name-asc" data-v-974de08a>Tên A-Z</option><option value="name-desc" data-v-974de08a>Tên Z-A</option><option value="price-asc" data-v-974de08a>Giá thấp - cao</option><option value="price-desc" data-v-974de08a>Giá cao - thấp</option>',5)]),544),[[R,u.value]])])])]),e("div",st,[e("div",at,[e("div",ot,[e("div",nt,[y(e("input",{type:"text",class:"form-control form-control-lg",placeholder:"Tìm kiếm sản phẩm... (có thể tìm không dấu: 'tim kiem' thay vì 'tìm kiếm')","onUpdate:modelValue":t[1]||(t[1]=i=>n.value=i),onKeyup:F(_,["enter"])},null,544),[[j,n.value]]),e("button",{class:"btn btn-primary btn-lg",type:"button",onClick:_},t[7]||(t[7]=[e("i",{class:"fas fa-search"},null,-1)]))])])])]),m.value.length>0?(r(),l("div",lt,[e("div",rt,[(r(!0),l(I,null,U(V.value,i=>(r(),l("div",{key:i.id,class:"col-6 col-md-4 col-lg-3"},[h(Z,{product:i,formatPrice:T(C),onAddToCart:T(w),onViewDetail:P,onAddToWishlist:K},null,8,["product","formatPrice","onAddToCart"])]))),128))])])):a.value?(r(),l("div",it,[e("div",ct,[t[10]||(t[10]=e("i",{class:"fas fa-search fa-4x text-muted mb-4"},null,-1)),t[11]||(t[11]=e("h3",{class:"text-muted mb-3"},"Không tìm thấy kết quả",-1)),e("p",dt,[t[8]||(t[8]=c(" Không tìm thấy sản phẩm nào cho từ khóa ")),e("strong",null,'"'+p(a.value)+'"',1)]),t[12]||(t[12]=e("div",{class:"search-suggestions"},[e("p",{class:"mb-3"},[e("strong",null,"Gợi ý:")]),e("ul",{class:"list-unstyled text-muted"},[e("li",null,"• Kiểm tra chính tả từ khóa"),e("li",null,"• Thử sử dụng từ khóa khác"),e("li",null,"• Sử dụng từ khóa ngắn gọn hơn"),e("li",null,'• Thử tìm kiếm không dấu (ví dụ: "tim kiem" thay vì "tìm kiếm")')])],-1)),h(o,{to:"/",class:"btn btn-primary mt-3"},{default:g(()=>t[9]||(t[9]=[e("i",{class:"fas fa-arrow-left me-2"},null,-1),c(" Về trang chủ ")])),_:1,__:[9]})])])):(r(),l("div",ut,t[13]||(t[13]=[x('<div class="initial-content" data-v-974de08a><i class="fas fa-search fa-4x text-muted mb-4" data-v-974de08a></i><h3 class="text-muted mb-3" data-v-974de08a>Tìm kiếm sản phẩm</h3><p class="text-muted mb-4" data-v-974de08a>Nhập từ khóa để tìm kiếm sản phẩm bạn muốn</p><p class="text-muted small" data-v-974de08a><i class="fas fa-info-circle me-1" data-v-974de08a></i> Bạn có thể tìm kiếm có hoặc không dấu. Ví dụ: &quot;tìm kiếm&quot; hoặc &quot;tim kiem&quot; </p></div>',1)])))])])}}},pt=A(mt,[["__scopeId","data-v-974de08a"]]);export{pt as default};
